"undefined"!=typeof self&&self.Prism&&self.document&&document.createRange&&(Prism.hooks.add("before-highlight",function(e){function r(e,n){var o={};n||(o.clone=e.cloneNode(!1),o.posOpen=p,l.push(o));for(var d=0,t=e.childNodes.length;d<t;d++){var a=e.childNodes[d];1===a.nodeType?r(a):3===a.nodeType&&(s||(a.data=a.data.replace(/^(?:\r?\n|\r)/,""),s=!0),p+=a.data.length)}n||(o.posClose=p)}var s=!1,p=0,l=[];r(e.element,!0),l&&l.length&&(e.keepMarkup=l)}),Prism.hooks.add("after-highlight",function(n){var a;n.keepMarkup&&n.keepMarkup.length&&(a=function(e,n){for(var o=0,d=e.childNodes.length;o<d;o++){var t=e.childNodes[o];if(1===t.nodeType){if(!a(t,n))return!1}else 3===t.nodeType&&(!n.nodeStart&&n.pos+t.data.length>n.node.posOpen&&(n.nodeStart=t,n.nodeStartPos=n.node.posOpen-n.pos),n.nodeStart&&n.pos+t.data.length>=n.node.posClose&&(n.nodeEnd=t,n.nodeEndPos=n.node.posClose-n.pos),n.pos+=t.data.length);if(n.nodeStart&&n.nodeEnd)return(t=document.createRange()).setStart(n.nodeStart,n.nodeStartPos),t.setEnd(n.nodeEnd,n.nodeEndPos),n.node.clone.appendChild(t.extractContents()),t.insertNode(n.node.clone),t.detach(),!1}return!0},n.keepMarkup.forEach(function(e){a(n.element,{node:e,pos:0})}))}));