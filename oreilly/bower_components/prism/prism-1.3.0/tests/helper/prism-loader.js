"use strict";var fs=require("fs"),vm=require("vm"),components=require("./components"),languagesCatalog=components.languages;module.exports={createInstance:function(e){var a={loadedLanguages:[],Prism:this.createEmptyPrism()};return this.loadLanguages(e,a).Prism},loadLanguages:function(e,a){var r=this;return(e="string"==typeof e?[e]:e).forEach(function(e){a=r.loadLanguage(e,a)}),a},loadLanguage:function(e,a){var r;if(languagesCatalog[e])return-1<a.loadedLanguages.indexOf(e)||(languagesCatalog[e].require&&(a=this.loadLanguages(languagesCatalog[e].require,a)),r=this.loadFileSource(e),a.Prism=this.runFileWithContext(r,{Prism:a.Prism}).Prism,a.loadedLanguages.push(e)),a;throw new Error("Language '"+e+"' not found.")},createEmptyPrism:function(){var e=this.loadFileSource("core");return this.runFileWithContext(e).Prism},fileSourceCache:{},loadFileSource:function(e){return this.fileSourceCache[e]=this.fileSourceCache[e]||fs.readFileSync(__dirname+"/../../components/prism-"+e+".js","utf8")},runFileWithContext:function(e,a){return vm.runInNewContext(e,a=a||{}),a}};