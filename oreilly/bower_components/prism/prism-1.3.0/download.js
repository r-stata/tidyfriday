!function(){var e,d={},t=$("form"),v=!0,n={},r=new Promise(function(t){$u.xhr({url:"https://api.github.com/repos/PrismJS/prism/git/trees/gh-pages?recursive=1",callback:function(e){e.status<400&&t(JSON.parse(e.responseText).tree)}})}),o=window.location.search.match(/(?:languages|plugins)=[-+\w]+|themes=[-\w]+/g);for(e in o&&o.forEach(function(e){var e=e.split("=",2),n=e[0],e=e[1].split("+");if("meta"!==n&&"core"!==n&&components[n]){for(var t in components[n])components[n][t].option&&delete components[n][t].option;e.forEach(function(e){if("meta"!==e&&components[n][e])for(var t=e;t&&components[n][t]&&"default"!==components[n][t].option;)"string"==typeof components[n][t]&&(components[n][t]={title:components[n][t]}),components[n][t].option="default",t=components[n][t].require})}}),components){var i,s=components[e];for(i in s.meta.section=$u.element.create("section",{className:"options",id:"category-"+e,contents:{tag:"h1",contents:e.charAt(0).toUpperCase()+e.slice(1)},inside:"#components"}),s.meta.addCheckAll&&$u.element.create("label",{attributes:{"data-id":"check-all-"+e},contents:[{tag:"input",properties:{type:"checkbox",name:"check-all-"+e,value:"",checked:!1,onclick:function(e,n){return function(){var t=this;$$('input[name="download-'+e+'"]').forEach(function(e){n[e.value].enabled=e.checked=t.checked}),m()}}(e,s)}},"Select/unselect all"],inside:s.meta.section}),s)if("meta"!==i){var a=!1,c=!1;switch(s[i].option||s.meta.option){case"mandatory":c=!0;case"default":a=!0}var l=s.meta.path.replace(/\{id}/g,i),p=s[i]={title:s[i].title||s[i],noCSS:s[i].noCSS||s.meta.noCSS,noJS:s[i].noJS||s.meta.noJS,enabled:a,require:"string"===$u.type(s[i].require)?[s[i].require]:s[i].require,owner:s[i].owner,files:{minified:{paths:[],size:0},dev:{paths:[],size:0}}};p.require&&p.require.forEach(function(e){n[e]=(n[e]||[]).concat(i)}),s[i].noJS||/\.css$/.test(l)||(p.files.minified.paths.push(l.replace(/(\.js)?$/,".min.js")),p.files.dev.paths.push(l.replace(/(\.js)?$/,".js"))),(s[i].noCSS||/\.js$/.test(l))&&!/\.css$/.test(l)||(l=l.replace(/(\.css)?$/,".css"),p.files.minified.paths.push(l),p.files.dev.paths.push(l)),$u.element.create("label",{attributes:{"data-id":i},contents:[{tag:"input",properties:{type:s.meta.exclusive?"radio":"checkbox",name:"download-"+e,value:i,checked:a,disabled:c,onclick:function(e,t){return function(){$$('input[name="'+this.name+'"]').forEach(function(e){t[e.value].enabled=e.checked}),t[e].require&&this.checked&&t[e].require.forEach(function(e){e=$('label[data-id="'+e+'"] > input');e.checked=!0,e.onclick()}),n[e]&&!this.checked&&n[e].forEach(function(e){e=$('label[data-id="'+e+'"] > input');e.checked=!1,e.onclick()}),m(0,e)}}(i,s)}},s.meta.link?{tag:"a",properties:{href:s.meta.link.replace(/\{id}/g,i)},contents:p.title}:p.title,s[i].owner?{tag:"a",properties:{href:"http://github.com/"+s[i].owner,className:"owner",target:"_blank"},contents:s[i].owner}:" ",{tag:"strong",className:"filesize"}],inside:s.meta.section})}}function u(){for(var s in components){var a,c,e=components[s];for(a in e)"meta"!==a&&(c=e[a].files[v?"minified":"dev"]).paths.forEach(function(e){var t,n,o,i=d[e]=d[e]||{};i.size?m(0,a):(t=s,n=a,o=e,r.then(function(e){for(var t=0,n=e.length;t<n;t++)if(e[t].path===o)return e[t].size}).then(function(e){e&&(i.size=e,c.size+=i.size,m(0,n))}))})}}function h(e){return Math.round(100*e/1024)/100+"KB"}function m(e,s){var t,a={js:0,css:0},c={js:0,css:0};for(t in components){var r,n=components[t],o=!0;for(r in n){var l=n[r];!l.enabled&&r!=s||l.files[v?"minified":"dev"].paths.forEach(function(e){var t,n,o,i;d[e]&&(t=d[e],n=e.match(/\.(\w+)$/)[1],o=t.size||0,l.enabled&&(t.contentsPromise||(t.contentsPromise=(i=e,new Promise(function(t,n){$u.xhr({url:i,callback:function(e){e.status<400&&e.responseText?t(e.responseText):n()}})}))),a[n]+=o),r==s&&(c[n]+=o))}),"meta"===r||l.enabled||(o=!1)}n.meta.addCheckAll&&($('input[name="check-all-'+t+'"]').checked=o)}a.all=a.js+a.css,s&&(c.all=c.js+c.css,$u.element.prop($('label[data-id="'+s+'"] .filesize'),{textContent:h(c.all),title:(c.js?Math.round(100*c.js/c.all)+"% JavaScript":"")+(c.js&&c.css?" + ":"")+(c.css?Math.round(100*c.css/c.all)+"% CSS":"")})),$("#filesize").textContent=h(a.all),$u.element.prop($("#percent-js"),{textContent:Math.round(100*a.js/a.all)+"%",title:h(a.js)}),$u.element.prop($("#percent-css"),{textContent:Math.round(100*a.css/a.all)+"%",title:h(a.css)}),0!==f&&clearTimeout(f),f=setTimeout(g,500)}t.elements.compression[0].onclick=t.elements.compression[1].onclick=function(){v=!!+this.value,u()},u();var f=0;function g(){var e,n=[],a={};for(e in components)for(var t=components[e],o=function(e){var t,n=[];for(t in e)n.push(t);for(var o=0;o<n.length;){var i,s=n[o],a=o,c=!1;for(i in e[s].require)if(o<(a=n.indexOf(e[s].require[i]))){c=!0;break}c?(tmp=n[o],n[o]=n[a],n[a]=tmp):o++}return n}(t),i=0;i<o.length;i++){var s,c=o[i];"meta"!==c&&((s=t[c]).enabled&&("core"!==e&&(a[e]=a[e]||[],a[e].push(c)),s.files[v?"minified":"dev"].paths.forEach(function(e){var t;d[e]&&(t=e.match(/\.(\w+)$/)[1],n.push({contentsPromise:d[e].contentsPromise,path:e,type:t}))})))}var r,l,p,u,h,m=$("#download .error");function f(t){var n;l<p?((n=r[l]).contentsPromise.then(function(e){u[n.type]+=e+("js"!==n.type||/;\s*$/.test(e)?"":";")+"\n",l++,f(t)}),n.contentsPromise.catch(function(){h.push($u.element.create({tag:"p",prop:{textContent:'An error occurred while fetching the file "'+n.path+'".'}})),l++,f(t)})):t({code:u,errors:h})}m.style.display="",l=0,p=(r=n).length,u={js:"",css:""},h=[],new Promise(f).then(function(e){var t,n,o=e.code,e=e.errors,i=(e.length&&(m.style.display="block",m.innerHTML="",$u.element.contents(m,e)),window.location.href.split("?")[0]+"?");for(t in a)i+=t+"="+a[t].join("+")+"&";for(n in i="/* "+i.replace(/&$/,"")+" */",o){var s=$("#download-"+n+" code");s.textContent=i+"\n"+o[n],Prism.highlightElement(s,!0),$("#download-"+n+" .download-button").href="data:application/octet-stream;charset=utf-8,"+encodeURIComponent(i+"\n"+o[n])}})}}();