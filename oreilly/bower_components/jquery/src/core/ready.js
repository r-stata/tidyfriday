define(["../core","../core/init","../deferred"],function(d){var r;function n(){document.removeEventListener("DOMContentLoaded",n,!1),window.removeEventListener("load",n,!1),d.ready()}d.fn.ready=function(e){return d.ready.promise().done(e),this},d.extend({isReady:!1,readyWait:1,holdReady:function(e){e?d.readyWait++:d.ready(!0)},ready:function(e){(!0===e?--d.readyWait:d.isReady)||(d.isReady=!0)!==e&&0<--d.readyWait||(r.resolveWith(document,[d]),d.fn.triggerHandler&&(d(document).triggerHandler("ready"),d(document).off("ready")))}}),d.ready.promise=function(e){return r||(r=d.Deferred(),"complete"===document.readyState?setTimeout(d.ready):(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1))),r.promise(e)},d.ready.promise()});