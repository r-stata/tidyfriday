define(["./core","./var/pnum","./css/var/cssExpand","./css/var/isHidden","./css/defaultDisplay","./data/var/data_priv","./core/init","./effects/Tween","./queue","./css","./deferred","./traversing"],function(m,e,s,v,w,g){var x,t,y=/^(?:toggle|show|hide)$/,f=new RegExp("^(?:([+-])=|)("+e+")([a-z%]*)$","i"),u=/queueHooks$/,q=[function(t,e,n){var i,o,s,r,u,f,a,l=this,c={},d=t.style,p=t.nodeType&&v(t),h=g.get(t,"fxshow");n.queue||(null==(u=m._queueHooks(t,"fx")).unqueued&&(u.unqueued=0,f=u.empty.fire,u.empty.fire=function(){u.unqueued||f()}),u.unqueued++,l.always(function(){l.always(function(){u.unqueued--,m.queue(t,"fx").length||u.empty.fire()})}));1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],a=m.css(t,"display"),"inline"===("none"===a?g.get(t,"olddisplay")||w(t.nodeName):a)&&"none"===m.css(t,"float")&&(d.display="inline-block"));n.overflow&&(d.overflow="hidden",l.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in e)if(o=e[i],y.exec(o)){if(delete e[i],s=s||"toggle"===o,o===(p?"hide":"show")){if("show"!==o||!h||void 0===h[i])continue;p=!0}c[i]=h&&h[i]||m.style(t,i)}else a=void 0;if(m.isEmptyObject(c))"inline"===("none"===a?w(t.nodeName):a)&&(d.display=a);else for(i in h?"hidden"in h&&(p=h.hidden):h=g.access(t,"fxshow",{}),s&&(h.hidden=!p),p?m(t).show():l.done(function(){m(t).hide()}),l.done(function(){for(var e in g.remove(t,"fxshow"),c)m.style(t,e,c[e])}),c)r=b(p?h[i]:0,i,l),i in h||(h[i]=r.start,p&&(r.end=r.start,r.start="width"===i||"height"===i?1:0))}],a={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),t=f.exec(t),o=t&&t[3]||(m.cssNumber[e]?"":"px"),s=(m.cssNumber[e]||"px"!==o&&+i)&&f.exec(m.css(n.elem,e)),r=1,u=20;if(s&&s[3]!==o)for(o=o||s[3],t=t||[],s=+i||1;s/=r=r||".5",m.style(n.elem,e,s+o),r!==(r=n.cur()/i)&&1!==r&&--u;);return t&&(s=n.start=+s||+i||0,n.unit=o,n.end=t[1]?s+(t[1]+1)*t[2]:+t[2]),n}]};function T(){return setTimeout(function(){x=void 0}),x=m.now()}function r(e,t){var n,i=0,o={height:e};for(t=t?1:0;i<4;i+=2-t)o["margin"+(n=s[i])]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function b(e,t,n){for(var i,o=(a[t]||[]).concat(a["*"]),s=0,r=o.length;s<r;s++)if(i=o[s].call(n,t,e))return i}function l(o,e,t){var n,s,i,r,u,f,a,l=0,c=q.length,d=m.Deferred().always(function(){delete p.elem}),p=function(){if(s)return!1;for(var e=x||T(),e=Math.max(0,h.startTime+h.duration-e),t=1-(e/h.duration||0),n=0,i=h.tweens.length;n<i;n++)h.tweens[n].run(t);return d.notifyWith(o,[h,t,e]),t<1&&i?e:(d.resolveWith(o,[h]),!1)},h=d.promise({elem:o,props:m.extend({},e),opts:m.extend(!0,{specialEasing:{}},t),originalProperties:e,originalOptions:t,startTime:x||T(),duration:t.duration,tweens:[],createTween:function(e,t){t=m.Tween(o,h.opts,e,t,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(t),t},stop:function(e){var t=0,n=e?h.tweens.length:0;if(!s){for(s=!0;t<n;t++)h.tweens[t].run(1);e?d.resolveWith(o,[h,e]):d.rejectWith(o,[h,e])}return this}}),v=h.props,w=v,g=h.opts.specialEasing;for(i in w)if(u=g[r=m.camelCase(i)],f=w[i],m.isArray(f)&&(u=f[1],f=w[i]=f[0]),i!==r&&(w[r]=f,delete w[i]),(a=m.cssHooks[r])&&"expand"in a)for(i in f=a.expand(f),delete w[r],f)i in w||(w[i]=f[i],g[i]=u);else g[r]=u;for(;l<c;l++)if(n=q[l].call(h,o,v,h.opts))return n;return m.map(v,b,h),m.isFunction(h.opts.start)&&h.opts.start.call(o,h),m.fx.timer(m.extend(p,{elem:o,anim:h,queue:h.opts.queue})),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}return m.Animation=m.extend(l,{tweener:function(e,t){for(var n,i=0,o=(e=m.isFunction(e)?(t=e,["*"]):e.split(" ")).length;i<o;i++)n=e[i],a[n]=a[n]||[],a[n].unshift(t)},prefilter:function(e,t){t?q.unshift(e):q.push(e)}}),m.speed=function(e,t,n){var i=e&&"object"==typeof e?m.extend({},e):{complete:n||!n&&t||m.isFunction(e)&&e,duration:e,easing:n&&t||t&&!m.isFunction(t)&&t};return i.duration=m.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in m.fx.speeds?m.fx.speeds[i.duration]:m.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){m.isFunction(i.old)&&i.old.call(this),i.queue&&m.dequeue(this,i.queue)},i},m.fn.extend({fadeTo:function(e,t,n,i){return this.filter(v).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(t,e,n,i){function o(){var e=l(this,m.extend({},t),r);(s||g.get(this,"finish"))&&e.stop(!0)}var s=m.isEmptyObject(t),r=m.speed(e,n,i);return o.finish=o,s||!1===r.queue?this.each(o):this.queue(r.queue,o)},stop:function(o,e,s){function r(e){var t=e.stop;delete e.stop,t(s)}return"string"!=typeof o&&(s=e,e=o,o=void 0),e&&!1!==o&&this.queue(o||"fx",[]),this.each(function(){var e=!0,t=null!=o&&o+"queueHooks",n=m.timers,i=g.get(this);if(t)i[t]&&i[t].stop&&r(i[t]);else for(t in i)i[t]&&i[t].stop&&u.test(t)&&r(i[t]);for(t=n.length;t--;)n[t].elem!==this||null!=o&&n[t].queue!==o||(n[t].anim.stop(s),e=!1,n.splice(t,1));!e&&s||m.dequeue(this,o)})},finish:function(r){return!1!==r&&(r=r||"fx"),this.each(function(){var e,t=g.get(this),n=t[r+"queue"],i=t[r+"queueHooks"],o=m.timers,s=n?n.length:0;for(t.finish=!0,m.queue(this,r,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===r&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<s;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),m.each(["toggle","show","hide"],function(e,i){var o=m.fn[i];m.fn[i]=function(e,t,n){return null==e||"boolean"==typeof e?o.apply(this,arguments):this.animate(r(i,!0),e,t,n)}}),m.each({slideDown:r("show"),slideUp:r("hide"),slideToggle:r("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,i){m.fn[e]=function(e,t,n){return this.animate(i,e,t,n)}}),m.timers=[],m.fx.tick=function(){var e,t=0,n=m.timers;for(x=m.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||m.fx.stop(),x=void 0},m.fx.timer=function(e){m.timers.push(e),e()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){t=t||setInterval(m.fx.tick,m.fx.interval)},m.fx.stop=function(){clearInterval(t),t=null},m.fx.speeds={slow:600,fast:200,_default:400},m});