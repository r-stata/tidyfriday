define(["./core","./var/indexOf","./traversing/var/rneedsContext","./core/init","./traversing/findFilter","./selector"],function(s,t,l){var u=/^(?:parents|prev(?:Until|All))/,o={children:!0,contents:!0,next:!0,prev:!0};function e(n,t){for(;(n=n[t])&&1!==n.nodeType;);return n}return s.extend({dir:function(n,t,e){for(var i=[],r=void 0!==e;(n=n[t])&&9!==n.nodeType;)if(1===n.nodeType){if(r&&s(n).is(e))break;i.push(n)}return i},sibling:function(n,t){for(var e=[];n;n=n.nextSibling)1===n.nodeType&&n!==t&&e.push(n);return e}}),s.fn.extend({has:function(n){var t=s(n,this),e=t.length;return this.filter(function(){for(var n=0;n<e;n++)if(s.contains(this,t[n]))return!0})},closest:function(n,t){for(var e,i=0,r=this.length,u=[],o=l.test(n)||"string"!=typeof n?s(n,t||this.context):0;i<r;i++)for(e=this[i];e&&e!==t;e=e.parentNode)if(e.nodeType<11&&(o?-1<o.index(e):1===e.nodeType&&s.find.matchesSelector(e,n))){u.push(e);break}return this.pushStack(1<u.length?s.unique(u):u)},index:function(n){return n?"string"==typeof n?t.call(s(n),this[0]):t.call(this,n.jquery?n[0]:n):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(n,t){return this.pushStack(s.unique(s.merge(this.get(),s(n,t))))},addBack:function(n){return this.add(null==n?this.prevObject:this.prevObject.filter(n))}}),s.each({parent:function(n){n=n.parentNode;return n&&11!==n.nodeType?n:null},parents:function(n){return s.dir(n,"parentNode")},parentsUntil:function(n,t,e){return s.dir(n,"parentNode",e)},next:function(n){return e(n,"nextSibling")},prev:function(n){return e(n,"previousSibling")},nextAll:function(n){return s.dir(n,"nextSibling")},prevAll:function(n){return s.dir(n,"previousSibling")},nextUntil:function(n,t,e){return s.dir(n,"nextSibling",e)},prevUntil:function(n,t,e){return s.dir(n,"previousSibling",e)},siblings:function(n){return s.sibling((n.parentNode||{}).firstChild,n)},children:function(n){return s.sibling(n.firstChild)},contents:function(n){return n.contentDocument||s.merge([],n.childNodes)}},function(i,r){s.fn[i]=function(n,t){var e=s.map(this,r,n);return(t="Until"!==i.slice(-5)?n:t)&&"string"==typeof t&&(e=s.filter(t,e)),1<this.length&&(o[i]||s.unique(e),u.test(i)&&e.reverse()),this.pushStack(e)}}),s});