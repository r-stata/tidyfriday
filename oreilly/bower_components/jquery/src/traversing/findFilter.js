define(["../core","../var/indexOf","./var/rneedsContext","../selector"],function(f,n,e){var i=/^.[^:#\[\.,]*$/;function r(t,e,r){if(f.isFunction(e))return f.grep(t,function(t,n){return!!e.call(t,n,t)!==r});if(e.nodeType)return f.grep(t,function(t){return t===e!==r});if("string"==typeof e){if(i.test(e))return f.filter(e,t,r);e=f.filter(e,t)}return f.grep(t,function(t){return 0<=n.call(e,t)!==r})}f.filter=function(t,n,e){var r=n[0];return e&&(t=":not("+t+")"),1===n.length&&1===r.nodeType?f.find.matchesSelector(r,t)?[r]:[]:f.find.matches(t,f.grep(n,function(t){return 1===t.nodeType}))},f.fn.extend({find:function(t){var n,e=this.length,r=[],i=this;if("string"!=typeof t)return this.pushStack(f(t).filter(function(){for(n=0;n<e;n++)if(f.contains(i[n],this))return!0}));for(n=0;n<e;n++)f.find(t,i[n],r);return(r=this.pushStack(1<e?f.unique(r):r)).selector=this.selector?this.selector+" "+t:t,r},filter:function(t){return this.pushStack(r(this,t||[],!1))},not:function(t){return this.pushStack(r(this,t||[],!0))},is:function(t){return!!r(this,"string"==typeof t&&e.test(t)?f(t):t||[],!1).length}})});