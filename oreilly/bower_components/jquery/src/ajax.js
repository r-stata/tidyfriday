define(["./core","./var/rnotwhite","./ajax/var/nonce","./ajax/var/rquery","./core/init","./ajax/parseJSON","./ajax/parseXML","./deferred"],function(T,S,w,C){var b=/#.*$/,H=/([?&])_=[^&]*/,L=/^(.*?):[ \t]*([^\r\n]*)$/gm,M=/^(?:GET|HEAD)$/,R=/^\/\//,q=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,F={},D={},N="*/".concat("*"),O=window.location.href,E=q.exec(O.toLowerCase())||[];function e(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var a,r=0,n=e.toLowerCase().match(S)||[];if(T.isFunction(t))for(;a=n[r++];)"+"===a[0]?(a=a.slice(1)||"*",(o[a]=o[a]||[]).unshift(t)):(o[a]=o[a]||[]).push(t)}}function $(t,r,n,o){var s={},i=t===D;function c(e){var a;return s[e]=!0,T.each(t[e]||[],function(e,t){t=t(r,n,o);return"string"!=typeof t||i||s[t]?i?!(a=t):void 0:(r.dataTypes.unshift(t),c(t),!1)}),a}return c(r.dataTypes[0])||!s["*"]&&c("*")}function a(e,t){var a,r,n=T.ajaxSettings.flatOptions||{};for(a in t)void 0!==t[a]&&((n[a]?e:r=r||{})[a]=t[a]);return r&&T.extend(!0,e,r),e}return T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:O,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(E[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":N,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":T.parseJSON,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?a(a(e,T.ajaxSettings),t):a(T.ajaxSettings,e)},ajaxPrefilter:e(F),ajaxTransport:e(D),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var c,d,f,a,p,u,r,l=T.ajaxSetup({},t=t||{}),x=l.context||l,y=l.context&&(x.nodeType||x.jquery)?T(x):T.event,h=T.Deferred(),m=T.Callbacks("once memory"),g=l.statusCode||{},n={},o={},v=0,s="canceled",j={readyState:0,getResponseHeader:function(e){var t;if(2===v){if(!a)for(a={};t=L.exec(f);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===v?f:null},setRequestHeader:function(e,t){var a=e.toLowerCase();return v||(e=o[a]=o[a]||e,n[e]=t),this},overrideMimeType:function(e){return v||(l.mimeType=e),this},statusCode:function(e){if(e)if(v<2)for(var t in e)g[t]=[g[t],e[t]];else j.always(e[j.status]);return this},abort:function(e){e=e||s;return c&&c.abort(e),i(0,e),this}};if(h.promise(j).complete=m.add,j.success=j.done,j.error=j.fail,l.url=((e||l.url||O)+"").replace(b,"").replace(R,E[1]+"//"),l.type=t.method||t.type||l.method||l.type,l.dataTypes=T.trim(l.dataType||"*").toLowerCase().match(S)||[""],null==l.crossDomain&&(e=q.exec(l.url.toLowerCase()),l.crossDomain=!(!e||e[1]===E[1]&&e[2]===E[2]&&(e[3]||("http:"===e[1]?"80":"443"))===(E[3]||("http:"===E[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=T.param(l.data,l.traditional)),$(F,l,t,j),2!==v){for(r in(u=T.event&&l.global)&&0==T.active++&&T.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!M.test(l.type),d=l.url,l.hasContent||(l.data&&(d=l.url+=(C.test(d)?"&":"?")+l.data,delete l.data),!1===l.cache&&(l.url=H.test(d)?d.replace(H,"$1_="+w++):d+(C.test(d)?"&":"?")+"_="+w++)),l.ifModified&&(T.lastModified[d]&&j.setRequestHeader("If-Modified-Since",T.lastModified[d]),T.etag[d]&&j.setRequestHeader("If-None-Match",T.etag[d])),(l.data&&l.hasContent&&!1!==l.contentType||t.contentType)&&j.setRequestHeader("Content-Type",l.contentType),j.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+N+"; q=0.01":""):l.accepts["*"]),l.headers)j.setRequestHeader(r,l.headers[r]);if(l.beforeSend&&(!1===l.beforeSend.call(x,j,l)||2===v))return j.abort();for(r in s="abort",{success:1,error:1,complete:1})j[r](l[r]);if(c=$(D,l,t,j)){j.readyState=1,u&&y.trigger("ajaxSend",[j,l]),l.async&&0<l.timeout&&(p=setTimeout(function(){j.abort("timeout")},l.timeout));try{v=1,c.send(n,i)}catch(e){if(!(v<2))throw e;i(-1,e)}}else i(-1,"No Transport")}return j;function i(e,t,a,r){var n,o,s,i=t;2!==v&&(v=2,p&&clearTimeout(p),c=void 0,f=r||"",j.readyState=0<e?4:0,r=200<=e&&e<300||304===e,a&&(s=function(e,t,a){for(var r,n,o,s,i=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(n in i)if(i[n]&&i[n].test(r)){c.unshift(n);break}if(c[0]in a)o=c[0];else{for(n in a){if(!c[0]||e.converters[n+" "+c[0]]){o=n;break}s=s||n}o=o||s}if(o)return o!==c[0]&&c.unshift(o),a[o]}(l,j,a)),s=function(e,t,a,r){var n,o,s,i,c,d={},f=e.dataTypes.slice();if(f[1])for(s in e.converters)d[s.toLowerCase()]=e.converters[s];for(o=f.shift();o;)if(e.responseFields[o]&&(a[e.responseFields[o]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=f.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(s=d[c+" "+o]||d["* "+o]))for(n in d)if((i=n.split(" "))[1]===o&&(s=d[c+" "+i[0]]||d["* "+i[0]])){!0===s?s=d[n]:!0!==d[n]&&(o=i[0],f.unshift(i[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}(l,s,j,r),r?(l.ifModified&&((a=j.getResponseHeader("Last-Modified"))&&(T.lastModified[d]=a),(a=j.getResponseHeader("etag"))&&(T.etag[d]=a)),204===e||"HEAD"===l.type?i="nocontent":304===e?i="notmodified":(i=s.state,n=s.data,r=!(o=s.error))):(o=i,!e&&i||(i="error",e<0&&(e=0))),j.status=e,j.statusText=(t||i)+"",r?h.resolveWith(x,[n,i,j]):h.rejectWith(x,[j,i,o]),j.statusCode(g),g=void 0,u&&y.trigger(r?"ajaxSuccess":"ajaxError",[j,l,r?n:o]),m.fireWith(x,[j,i]),u&&(y.trigger("ajaxComplete",[j,l]),--T.active||T.event.trigger("ajaxStop")))}},getJSON:function(e,t,a){return T.get(e,t,a,"json")},getScript:function(e,t){return T.get(e,void 0,t,"script")}}),T.each(["get","post"],function(e,n){T[n]=function(e,t,a,r){return T.isFunction(t)&&(r=r||a,a=t,t=void 0),T.ajax({url:e,type:n,dataType:r,data:t,success:a})}}),T});