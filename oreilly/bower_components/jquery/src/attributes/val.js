define(["../core","./support","../core/init"],function(s,u){var r=/\r/g;s.fn.extend({val:function(t){var n,e,o,i=this[0];return arguments.length?(o=s.isFunction(t),this.each(function(e){1===this.nodeType&&(null==(e=o?t.call(this,e,s(this).val()):t)?e="":"number"==typeof e?e+="":s.isArray(e)&&(e=s.map(e,function(e){return null==e?"":e+""})),(n=s.valHooks[this.type]||s.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,e,"value")||(this.value=e))})):i?(n=s.valHooks[i.type]||s.valHooks[i.nodeName.toLowerCase()])&&"get"in n&&void 0!==(e=n.get(i,"value"))?e:"string"==typeof(e=i.value)?e.replace(r,""):null==e?"":e:void 0}}),s.extend({valHooks:{option:{get:function(e){var t=s.find.attr(e,"value");return null!=t?t:s.trim(s.text(e))}},select:{get:function(e){for(var t,n=e.options,o=e.selectedIndex,i="select-one"===e.type||o<0,r=i?null:[],l=i?o+1:n.length,a=o<0?l:i?o:0;a<l;a++)if(((t=n[a]).selected||a===o)&&(u.optDisabled?!t.disabled:null===t.getAttribute("disabled"))&&(!t.parentNode.disabled||!s.nodeName(t.parentNode,"optgroup"))){if(t=s(t).val(),i)return t;r.push(t)}return r},set:function(e,t){for(var n,o,i=e.options,r=s.makeArray(t),l=i.length;l--;)((o=i[l]).selected=0<=s.inArray(o.value,r))&&(n=!0);return n||(e.selectedIndex=-1),r}}}}),s.each(["radio","checkbox"],function(){s.valHooks[this]={set:function(e,t){if(s.isArray(t))return e.checked=0<=s.inArray(s(e).val(),t)}},u.checkOn||(s.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})});