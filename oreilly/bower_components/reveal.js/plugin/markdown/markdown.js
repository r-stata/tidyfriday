!function(t,e){"object"==typeof exports?module.exports=e(require("./marked")):(t.RevealMarkdown=e(t.marked),t.RevealMarkdown.initialize())}(this,function(s){if(void 0===s)throw"The reveal.js Markdown plugin requires marked to be loaded";"undefined"!=typeof hljs&&s.setOptions({highlight:function(t,e){return hljs.highlightAuto(t,e).value}});var e="^\r?\n---\r?\n$",a="note:",r="__SCRIPT_END__";function i(t){var t=(t.querySelector("script")||t).textContent,e=(t=t.replace(new RegExp(r,"g"),"<\/script>")).match(/^\n?(\s*)/)[1].length,a=t.match(/^\n?(\t*)/)[1].length;return 0<a?t=t.replace(new RegExp("\\n?\\t{"+a+"}","g"),"\n"):1<e&&(t=t.replace(new RegExp("\\n? {"+e+"}","g"),"\n")),t}function l(t){for(var e=t.attributes,a=[],r=0,n=e.length;r<n;r++){var o=e[r].name,s=e[r].value;/data\-(markdown|separator|vertical|notes)/gi.test(o)||a.push(s?o+'="'+s+'"':o)}return a.join(" ")}function p(t){return(t=t||{}).separator=t.separator||e,t.notesSeparator=t.notesSeparator||a,t.attributes=t.attributes||"",t}function h(t,e){e=p(e);e=t.split(new RegExp(e.notesSeparator,"mgi"));return'<script type="text/template">'+(t=(t=2===e.length?e[0]+'<aside class="notes" data-markdown>'+e[1].trim()+"</aside>":t).replace(/<\/script>/g,r))+"<\/script>"}function d(t,e){e=p(e);for(var a,r,n=new RegExp(e.separator+(e.verticalSeparator?"|"+e.verticalSeparator:""),"mg"),o=new RegExp(e.separator),s=0,i=!0,l=[];r=n.exec(t);)notes=null,!(a=o.test(r[0]))&&i&&l.push([]),r=t.substring(s,r.index),(a&&i?l:l[l.length-1]).push(r),s=n.lastIndex,i=a;(i?l:l[l.length-1]).push(t.substring(s));for(var d="",u=0,c=l.length;u<c;u++)l[u]instanceof Array?(d+="<section "+e.attributes+">",l[u].forEach(function(t){d+="<section data-markdown>"+h(t,e)+"</section>"}),d+="</section>"):d+="<section "+e.attributes+" data-markdown>"+h(l[u],e)+"</section>";return d}function t(){for(var t,e=document.querySelectorAll("[data-markdown]"),a=0,r=e.length;a<r;a++)if((t=e[a]).getAttribute("data-markdown").length){var n=new XMLHttpRequest,o=t.getAttribute("data-markdown");null!=(datacharset=t.getAttribute("data-charset"))&&""!=datacharset&&n.overrideMimeType("text/html; charset="+datacharset),n.onreadystatechange=function(){4===n.readyState&&(200<=n.status&&n.status<300||0===n.status?t.outerHTML=d(n.responseText,{separator:t.getAttribute("data-separator"),verticalSeparator:t.getAttribute("data-separator-vertical"),notesSeparator:t.getAttribute("data-separator-notes"),attributes:l(t)}):t.outerHTML='<section data-state="alert">ERROR: The attempt to fetch '+o+" failed with HTTP status "+n.status+".Check your browser's JavaScript console for more details.<p>Remember that you need to serve the presentation HTML from a HTTP server.</p></section>")},n.open("GET",o,!1);try{n.send()}catch(t){alert("Failed to get the Markdown file "+o+". Make sure that the presentation and the file are served by a HTTP server and the file can be found there. "+t)}}else t.getAttribute("data-separator")||t.getAttribute("data-separator-vertical")||t.getAttribute("data-separator-notes")?t.outerHTML=d(i(t),{separator:t.getAttribute("data-separator"),verticalSeparator:t.getAttribute("data-separator-vertical"),notesSeparator:t.getAttribute("data-separator-notes"),attributes:l(t)}):t.innerHTML=h(i(t))}function u(t,e,a){var a=new RegExp(a,"mg"),r=new RegExp('([^"= ]+?)="([^"=]+?)"',"mg"),n=t.nodeValue;if(matches=a.exec(n)){var o=matches[1],n=n.substring(0,matches.index)+n.substring(a.lastIndex);for(t.nodeValue=n;matchesClass=r.exec(o);)e.setAttribute(matchesClass[1],matchesClass[2]);return!0}return!1}function n(){for(var t=document.querySelectorAll("[data-markdown]"),e=0,a=t.length;e<a;e++){var r,n,o=t[e];o.getAttribute("data-markdown-parsed")||(o.setAttribute("data-markdown-parsed",!0),r=o.querySelector("aside.notes"),n=i(o),o.innerHTML=s(n),function t(e,a,r,n,o){if(null!=a&&null!=a.childNodes&&0<a.childNodes.length){previousParentElement=a;for(var s=0;s<a.childNodes.length;s++){if(childElement=a.childNodes[s],0<s)for(j=s-1;0<=j;){if("function"==typeof(aPreviousChildElement=a.childNodes[j]).setAttribute&&"BR"!=aPreviousChildElement.tagName){previousParentElement=aPreviousChildElement;break}--j}parentSection=e,"section"==childElement.nodeName&&(parentSection=childElement,previousParentElement=childElement),"function"!=typeof childElement.setAttribute&&childElement.nodeType!=Node.COMMENT_NODE||t(parentSection,childElement,previousParentElement,n,o)}}a.nodeType==Node.COMMENT_NODE&&0==u(a,r,n)&&u(a,e,o)}(o,o,null,o.getAttribute("data-element-attributes")||o.parentNode.getAttribute("data-element-attributes")||"\\.element\\s*?(.+?)$",o.getAttribute("data-attributes")||o.parentNode.getAttribute("data-attributes")||"\\.slide:\\s*?(\\S.+?)$"),r&&o.appendChild(r))}}return{initialize:function(){t(),n()},processSlides:t,convertSlides:n,slidify:d}});