define(["./core","./traversing/var/rneedsContext","./core/init","./traversing/findFilter","./selector"],function(s,c){var o=/^(?:parents|prev(?:Until|All))/,u={children:!0,contents:!0,next:!0,prev:!0};function t(n,t){for(;(n=n[t])&&1!==n.nodeType;);return n}return s.extend({dir:function(n,t,e){for(var r=[],i=n[t];i&&9!==i.nodeType&&(void 0===e||1!==i.nodeType||!s(i).is(e));)1===i.nodeType&&r.push(i),i=i[t];return r},sibling:function(n,t){for(var e=[];n;n=n.nextSibling)1===n.nodeType&&n!==t&&e.push(n);return e}}),s.fn.extend({has:function(n){var t,e=s(n,this),r=e.length;return this.filter(function(){for(t=0;t<r;t++)if(s.contains(this,e[t]))return!0})},closest:function(n,t){for(var e,r=0,i=this.length,o=[],u=c.test(n)||"string"!=typeof n?s(n,t||this.context):0;r<i;r++)for(e=this[r];e&&e!==t;e=e.parentNode)if(e.nodeType<11&&(u?-1<u.index(e):1===e.nodeType&&s.find.matchesSelector(e,n))){o.push(e);break}return this.pushStack(1<o.length?s.unique(o):o)},index:function(n){return n?"string"==typeof n?s.inArray(this[0],s(n)):s.inArray(n.jquery?n[0]:n,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(n,t){return this.pushStack(s.unique(s.merge(this.get(),s(n,t))))},addBack:function(n){return this.add(null==n?this.prevObject:this.prevObject.filter(n))}}),s.each({parent:function(n){n=n.parentNode;return n&&11!==n.nodeType?n:null},parents:function(n){return s.dir(n,"parentNode")},parentsUntil:function(n,t,e){return s.dir(n,"parentNode",e)},next:function(n){return t(n,"nextSibling")},prev:function(n){return t(n,"previousSibling")},nextAll:function(n){return s.dir(n,"nextSibling")},prevAll:function(n){return s.dir(n,"previousSibling")},nextUntil:function(n,t,e){return s.dir(n,"nextSibling",e)},prevUntil:function(n,t,e){return s.dir(n,"previousSibling",e)},siblings:function(n){return s.sibling((n.parentNode||{}).firstChild,n)},children:function(n){return s.sibling(n.firstChild)},contents:function(n){return s.nodeName(n,"iframe")?n.contentDocument||n.contentWindow.document:s.merge([],n.childNodes)}},function(r,i){s.fn[r]=function(n,t){var e=s.map(this,i,n);return(t="Until"!==r.slice(-5)?n:t)&&"string"==typeof t&&(e=s.filter(t,e)),1<this.length&&(u[r]||(e=s.unique(e)),o.test(r)&&(e=e.reverse())),this.pushStack(e)}}),s});