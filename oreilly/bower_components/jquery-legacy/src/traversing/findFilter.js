define(["../core","../var/indexOf","./var/rneedsContext","../selector"],function(f,t,n){var i=/^.[^:#\[\.,]*$/;function e(t,e,r){if(f.isFunction(e))return f.grep(t,function(t,n){return!!e.call(t,n,t)!==r});if(e.nodeType)return f.grep(t,function(t){return t===e!==r});if("string"==typeof e){if(i.test(e))return f.filter(e,t,r);e=f.filter(e,t)}return f.grep(t,function(t){return 0<=f.inArray(t,e)!==r})}f.filter=function(t,n,e){var r=n[0];return e&&(t=":not("+t+")"),1===n.length&&1===r.nodeType?f.find.matchesSelector(r,t)?[r]:[]:f.find.matches(t,f.grep(n,function(t){return 1===t.nodeType}))},f.fn.extend({find:function(t){var n,e=[],r=this,i=r.length;if("string"!=typeof t)return this.pushStack(f(t).filter(function(){for(n=0;n<i;n++)if(f.contains(r[n],this))return!0}));for(n=0;n<i;n++)f.find(t,r[n],e);return(e=this.pushStack(1<i?f.unique(e):e)).selector=this.selector?this.selector+" "+t:t,e},filter:function(t){return this.pushStack(e(this,t||[],!1))},not:function(t){return this.pushStack(e(this,t||[],!0))},is:function(t){return!!e(this,"string"==typeof t&&n.test(t)?f(t):t||[],!1).length}})});