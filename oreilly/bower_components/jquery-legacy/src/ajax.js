define(["./core","./var/rnotwhite","./ajax/var/nonce","./ajax/var/rquery","./core/init","./ajax/parseJSON","./ajax/parseXML","./deferred"],function(T,S,C,w){var b,H,L=/#.*$/,M=/([?&])_=[^&]*/,R=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,q=/^(?:GET|HEAD)$/,F=/^\/\//,D=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,N={},E={},O="*/".concat("*");try{H=location.href}catch(e){(H=document.createElement("a")).href="",H=H.href}function e(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var a,r=0,n=e.toLowerCase().match(S)||[];if(T.isFunction(t))for(;a=n[r++];)"+"===a.charAt(0)?(a=a.slice(1)||"*",(o[a]=o[a]||[]).unshift(t)):(o[a]=o[a]||[]).push(t)}}function A(t,r,n,o){var s={},i=t===E;function c(e){var a;return s[e]=!0,T.each(t[e]||[],function(e,t){t=t(r,n,o);return"string"!=typeof t||i||s[t]?i?!(a=t):void 0:(r.dataTypes.unshift(t),c(t),!1)}),a}return c(r.dataTypes[0])||!s["*"]&&c("*")}function a(e,t){var a,r,n=T.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((n[r]?e:a=a||{})[r]=t[r]);return a&&T.extend(!0,e,a),e}return b=D.exec(H.toLowerCase())||[],T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:H,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(b[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":O,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":T.parseJSON,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?a(a(e,T.ajaxSettings),t):a(T.ajaxSettings,e)},ajaxPrefilter:e(N),ajaxTransport:e(E),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var a,c,d,f,p,u,r,l=T.ajaxSetup({},t=t||{}),x=l.context||l,h=l.context&&(x.nodeType||x.jquery)?T(x):T.event,y=T.Deferred(),m=T.Callbacks("once memory"),g=l.statusCode||{},n={},o={},v=0,s="canceled",j={readyState:0,getResponseHeader:function(e){var t;if(2===v){if(!r)for(r={};t=R.exec(d);)r[t[1].toLowerCase()]=t[2];t=r[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===v?d:null},setRequestHeader:function(e,t){var a=e.toLowerCase();return v||(e=o[a]=o[a]||e,n[e]=t),this},overrideMimeType:function(e){return v||(l.mimeType=e),this},statusCode:function(e){if(e)if(v<2)for(var t in e)g[t]=[g[t],e[t]];else j.always(e[j.status]);return this},abort:function(e){e=e||s;return u&&u.abort(e),i(0,e),this}};if(y.promise(j).complete=m.add,j.success=j.done,j.error=j.fail,l.url=((e||l.url||H)+"").replace(L,"").replace(F,b[1]+"//"),l.type=t.method||t.type||l.method||l.type,l.dataTypes=T.trim(l.dataType||"*").toLowerCase().match(S)||[""],null==l.crossDomain&&(e=D.exec(l.url.toLowerCase()),l.crossDomain=!(!e||e[1]===b[1]&&e[2]===b[2]&&(e[3]||("http:"===e[1]?"80":"443"))===(b[3]||("http:"===b[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=T.param(l.data,l.traditional)),A(N,l,t,j),2!==v){for(a in(p=T.event&&l.global)&&0==T.active++&&T.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!q.test(l.type),c=l.url,l.hasContent||(l.data&&(c=l.url+=(w.test(c)?"&":"?")+l.data,delete l.data),!1===l.cache&&(l.url=M.test(c)?c.replace(M,"$1_="+C++):c+(w.test(c)?"&":"?")+"_="+C++)),l.ifModified&&(T.lastModified[c]&&j.setRequestHeader("If-Modified-Since",T.lastModified[c]),T.etag[c]&&j.setRequestHeader("If-None-Match",T.etag[c])),(l.data&&l.hasContent&&!1!==l.contentType||t.contentType)&&j.setRequestHeader("Content-Type",l.contentType),j.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+O+"; q=0.01":""):l.accepts["*"]),l.headers)j.setRequestHeader(a,l.headers[a]);if(l.beforeSend&&(!1===l.beforeSend.call(x,j,l)||2===v))return j.abort();for(a in s="abort",{success:1,error:1,complete:1})j[a](l[a]);if(u=A(E,l,t,j)){j.readyState=1,p&&h.trigger("ajaxSend",[j,l]),l.async&&0<l.timeout&&(f=setTimeout(function(){j.abort("timeout")},l.timeout));try{v=1,u.send(n,i)}catch(e){if(!(v<2))throw e;i(-1,e)}}else i(-1,"No Transport")}return j;function i(e,t,a,r){var n,o,s,i=t;2!==v&&(v=2,f&&clearTimeout(f),u=void 0,d=r||"",j.readyState=0<e?4:0,r=200<=e&&e<300||304===e,a&&(s=function(e,t,a){for(var r,n,o,s,i=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(s in i)if(i[s]&&i[s].test(n)){c.unshift(s);break}if(c[0]in a)o=c[0];else{for(s in a){if(!c[0]||e.converters[s+" "+c[0]]){o=s;break}r=r||s}o=o||r}if(o)return o!==c[0]&&c.unshift(o),a[o]}(l,j,a)),s=function(e,t,a,r){var n,o,s,i,c,d={},f=e.dataTypes.slice();if(f[1])for(s in e.converters)d[s.toLowerCase()]=e.converters[s];for(o=f.shift();o;)if(e.responseFields[o]&&(a[e.responseFields[o]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=f.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(s=d[c+" "+o]||d["* "+o]))for(n in d)if((i=n.split(" "))[1]===o&&(s=d[c+" "+i[0]]||d["* "+i[0]])){!0===s?s=d[n]:!0!==d[n]&&(o=i[0],f.unshift(i[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}(l,s,j,r),r?(l.ifModified&&((a=j.getResponseHeader("Last-Modified"))&&(T.lastModified[c]=a),(a=j.getResponseHeader("etag"))&&(T.etag[c]=a)),204===e||"HEAD"===l.type?i="nocontent":304===e?i="notmodified":(i=s.state,n=s.data,r=!(o=s.error))):(o=i,!e&&i||(i="error",e<0&&(e=0))),j.status=e,j.statusText=(t||i)+"",r?y.resolveWith(x,[n,i,j]):y.rejectWith(x,[j,i,o]),j.statusCode(g),g=void 0,p&&h.trigger(r?"ajaxSuccess":"ajaxError",[j,l,r?n:o]),m.fireWith(x,[j,i]),p&&(h.trigger("ajaxComplete",[j,l]),--T.active||T.event.trigger("ajaxStop")))}},getJSON:function(e,t,a){return T.get(e,t,a,"json")},getScript:function(e,t){return T.get(e,void 0,t,"script")}}),T.each(["get","post"],function(e,n){T[n]=function(e,t,a,r){return T.isFunction(t)&&(r=r||a,a=t,t=void 0),T.ajax({url:e,type:n,dataType:r,data:t,success:a})}}),T});