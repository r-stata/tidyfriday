_html2canvas.Renderer.Canvas=function(r){r=r||{};var i=document,c=[],s=document.createElement("canvas"),l=s.getContext("2d"),o=_html2canvas.Util,g=r.canvas||i.createElement("canvas");function h(t,e){switch(e.type){case"variable":t[e.name]=e.arguments;break;case"function":switch(e.name){case"createPattern":if(0<e.arguments[0].width&&0<e.arguments[0].height)try{t.fillStyle=t.createPattern(e.arguments[0],"repeat")}catch(t){o.log("html2canvas: Renderer: Error creating pattern",t.message)}break;case"drawShape":a=t,n=e.arguments,a.beginPath(),n.forEach(function(t){a[t.name].apply(a,t.arguments)}),a.closePath();break;case"drawImage":0<e.arguments[8]&&0<e.arguments[7]&&(!r.taintTest||r.taintTest&&function(t){if(-1===c.indexOf(t.arguments[0].src)){l.drawImage(t.arguments[0],0,0);try{l.getImageData(0,0,1,1)}catch(t){return s=i.createElement("canvas"),l=s.getContext("2d"),0}c.push(t.arguments[0].src)}return 1}(e))&&t.drawImage.apply(t,e.arguments);break;default:t[e.name].apply(t,e.arguments)}}var a,n}return function(t,e,a,n,r){var i,c=g.getContext("2d"),s=t.stack;return g.width=g.style.width=e.width||s.ctx.width,g.height=g.style.height=e.height||s.ctx.height,i=c.fillStyle,c.fillStyle=o.isTransparent(s.backgroundColor)&&void 0!==e.background?e.background:t.backgroundColor,c.fillRect(0,0,g.width,g.height),c.fillStyle=i,n.forEach(function(t){c.textBaseline="bottom",c.save(),t.transform.matrix&&(c.translate(t.transform.origin[0],t.transform.origin[1]),c.transform.apply(c,t.transform.matrix),c.translate(-t.transform.origin[0],-t.transform.origin[1])),t.clip&&(c.beginPath(),c.rect(t.clip.left,t.clip.top,t.clip.width,t.clip.height),c.clip()),t.ctx.storage&&t.ctx.storage.forEach(function(t){h(c,t)}),c.restore()}),o.log("html2canvas: Renderer: Canvas renderer done - returning canvas obj"),1===e.elements.length&&"object"==typeof e.elements[0]&&"BODY"!==e.elements[0].nodeName?(s=r.Util.Bounds(e.elements[0]),(t=a.createElement("canvas")).width=Math.ceil(s.width),t.height=Math.ceil(s.height),(c=t.getContext("2d")).drawImage(g,s.left,s.top,s.width,s.height,0,0,s.width,s.height),g=null,t):g}};