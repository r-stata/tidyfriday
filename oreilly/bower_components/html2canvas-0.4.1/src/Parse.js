function h2czContext(t){return{zindex:t,children:[]}}_html2canvas.Parse=function(e,p){window.scroll(0,0);var t=void 0===p.elements?document.body:p.elements[0],c=t.ownerDocument,x=_html2canvas.Util,h=x.Support(p,c),v=new RegExp("("+p.ignoreElements+")"),r=c.body,B=x.getCSS,T="___html2canvas___pseudoelement",o=c.createElement("style");function u(t,e){t=parseInt(B(t,e),10);return isNaN(t)?0:t}function L(t,e,o,n,r,i){"transparent"!==i&&(t.setVariable("fillStyle",i),t.fillRect(e,o,n,r),0)}function S(t,e,o){if(0<t.length)return e+o.toUpperCase()}function f(t,e,o,n){null!==t&&0<x.trimText(t).length&&(n.fillText(t,e,o),0)}function m(t,e,o,n){var r=B(e,"fontWeight"),i=B(e,"fontFamily"),a=B(e,"fontSize"),l=x.parseTextShadows(B(e,"textShadow"));switch(parseInt(r,10)){case 401:r="bold";break;case 400:r="normal"}if(t.setVariable("fillStyle",n),t.setVariable("font",[B(e,"fontStyle"),B(e,"fontVariant"),r,a,i].join(" ")),t.setVariable("textAlign","left"),l.length&&(t.setVariable("shadowColor",l[0].color),t.setVariable("shadowOffsetX",l[0].offsetX),t.setVariable("shadowOffsetY",l[0].offsetY),t.setVariable("shadowBlur",l[0].blur)),"none"!==o)return x.Font(i,a,c)}function V(t,e,o,n,r){var i,a,l;return h.rangeBounds&&!r?("none"===o&&0===x.trimText(e).length||(o=e,i=t.node,a=t.textOffset,(l=c.createRange()).setStart(i,a),l.setEnd(i,a+o.length),i=l.getBoundingClientRect()),t.textOffset+=e.length):t.node&&"string"==typeof t.node.nodeValue&&(a=n?t.node.splitText(e.length):null,o=t.node,l=r,n=o.parentNode,e=c.createElement("wrapper"),r=o.cloneNode(!0),e.appendChild(o.cloneNode(!0)),n.replaceChild(e,o),o=l?x.OffsetBounds(e):x.Bounds(e),n.replaceChild(r,e),i=o,t.node=a),i}function i(t,e,a){var l,h,d=a.ctx,s=B(t,"color"),c=B(t,"textDecoration"),o=B(t,"textAlign"),u={node:e,textOffset:0};0<x.trimText(e.nodeValue).length&&(e.nodeValue=function(t,e){switch(e){case"lowercase":return t.toLowerCase();case"capitalize":return t.replace(/(^|\s|:|-|\(|\))([a-z])/g,S);case"uppercase":return t.toUpperCase();default:return t}}(e.nodeValue,B(t,"textTransform")),o=o.replace(["-webkit-auto"],["auto"]),h=!p.letterRendering&&/^(left|right|justify|auto)$/.test(o)&&/^(normal|none|0px)$/.test(B(t,"letterSpacing"))?e.nodeValue.split(/(\b| )/):e.nodeValue.split(""),l=m(d,t,c,s),p.chinese&&h.forEach(function(t,e){/.*[\u4E00-\u9FA5].*$/.test(t)&&((t=t.split("")).unshift(e,1),h.splice.apply(h,t))}),h.forEach(function(t,e){e=V(u,t,c,e<h.length-1,a.transform.matrix);if(e){f(t,e.left,e.bottom,d);var o=d,n=e,r=l,i=s;switch(c){case"underline":L(o,n.left,Math.round(n.top+r.baseline+r.lineWidth),n.width,1,i);break;case"overline":L(o,n.left,Math.round(n.top),n.width,1,i);break;case"line-through":L(o,n.left,Math.ceil(n.top+r.middle+r.lineWidth),n.width,1,i)}}}))}function W(t,e){var o,n=function(t){var e=-1,o=1,n=t.parentNode.childNodes;if(t.parentNode){for(;n[++e]!==t;)1===n[e].nodeType&&o++;return o}return-1}(t);switch(e){case"decimal":o=n;break;case"decimal-leading-zero":o=1===n.toString().length?n="0"+n.toString():n.toString();break;case"upper-roman":o=_html2canvas.Generate.ListRoman(n);break;case"lower-roman":o=_html2canvas.Generate.ListRoman(n).toLowerCase();break;case"lower-alpha":o=_html2canvas.Generate.ListAlpha(n).toLowerCase();break;case"upper-alpha":o=_html2canvas.Generate.ListAlpha(n)}return o+". "}function H(t,e,o){var n,r,i,a,e=e.ctx,l=B(t,"listStyleType");/^(decimal|decimal-leading-zero|upper-alpha|upper-latin|upper-roman|lower-alpha|lower-greek|lower-latin|lower-roman)$/i.test(l)&&(l=W(t,l),n=t,r=l,(a=c.createElement("boundelement")).style.display="inline",i=n.style.listStyleType,n.style.listStyleType="none",a.appendChild(c.createTextNode(r)),n.insertBefore(a,n.firstChild),r=x.Bounds(a),n.removeChild(a),n.style.listStyleType=i,a=r,m(e,t,"none",B(t,"color")),"inside"===B(t,"listStylePosition")&&(e.setVariable("textAlign","left"),f(l,o.left,a.bottom,e)))}function C(t){t=e[t];return!(!t||!0!==t.succeeded)&&t.img}function R(t,e){var o=Math.max(t.left,e.left),n=Math.max(t.top,e.top);return{left:o,top:n,width:Math.min(t.left+t.width,e.left+e.width)-o,height:Math.min(t.top+t.height,e.top+e.height)-n}}function E(t,e,o,n,r){var i=u(e,"paddingLeft"),a=u(e,"paddingTop"),l=u(e,"paddingRight"),e=u(e,"paddingBottom");d(t,o,0,0,o.width,o.height,n.left+i+r[3].width,n.top+a+r[0].width,n.width-(r[1].width+r[3].width+i+l),n.height-(r[0].width+r[2].width+a+e))}o.innerHTML="."+T+'-before:before { content: "" !important; display: none !important; }.'+T+'-after:after { content: "" !important; display: none !important; }',r.appendChild(o),e=e||{};a=(Math.sqrt(2)-1)/3*4;var a,z=function(t,e,o,n){var r=o*a,i=n*a,o=t+o,n=e+n;return{topLeft:s({x:t,y:n},{x:t,y:n-i},{x:o-r,y:e},{x:o,y:e}),topRight:s({x:t,y:e},{x:t+r,y:e},{x:o,y:n-i},{x:o,y:n}),bottomRight:s({x:o,y:e},{x:o,y:e+i},{x:t+r,y:n},{x:t,y:n}),bottomLeft:s({x:o,y:n},{x:o-r,y:n},{x:t,y:e+i},{x:t,y:e})}};function s(i,a,l,h){function d(t,e,o){return{x:t.x+(e.x-t.x)*o,y:t.y+(e.y-t.y)*o}}return{start:i,startControl:a,endControl:l,end:h,subdivide:function(t){var e=d(i,a,t),o=d(a,l,t),n=d(l,h,t),r=d(e,o,t),o=d(o,n,t),t=d(r,o,t);return[s(i,e,r,t),s(t,o,n,h)]},curveTo:function(t){t.push(["bezierCurve",a.x,a.y,l.x,l.y,h.x,h.y])},curveToReversed:function(t){t.push(["bezierCurve",l.x,l.y,a.x,a.y,i.x,i.y])}}}function A(t,e,o,n,r,i,a){0<e[0]||0<e[1]?(t.push(["line",n[0].start.x,n[0].start.y]),n[0].curveTo(t),n[1].curveTo(t)):t.push(["line",i,a]),(0<o[0]||0<o[1])&&t.push(["line",r[0].start.x,r[0].start.y])}function _(t,e,o,n,r,i,a){var l=[];return 0<e[0]||0<e[1]?(l.push(["line",n[1].start.x,n[1].start.y]),n[1].curveTo(l)):l.push(["line",t.c1[0],t.c1[1]]),0<o[0]||0<o[1]?(l.push(["line",i[0].start.x,i[0].start.y]),i[0].curveTo(l),l.push(["line",a[0].end.x,a[0].end.y]),a[0].curveToReversed(l)):(l.push(["line",t.c2[0],t.c2[1]]),l.push(["line",t.c3[0],t.c3[1]])),0<e[0]||0<e[1]?(l.push(["line",r[1].end.x,r[1].end.y]),r[1].curveToReversed(l)):l.push(["line",t.c4[0],t.c4[1]]),l}function F(t,e,o){for(var n,r,i,a,l,h,d,s,c,u,p,f,m,g,b,w,y,x,v,T,L,C,R,E=e.left,k=e.top,M=e.width,I=e.height,N=(R=t,["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(t){return B(R,"border"+t+"Radius")})),O=(d=N,s=o,c=(h=e).left,u=h.top,p=h.width,h=h.height,f=d[0][0],m=d[0][1],g=d[1][0],b=d[1][1],w=d[2][0],y=d[2][1],x=d[3][0],d=d[3][1],v=p-g,T=h-y,L=p-w,C=h-d,{topLeftOuter:z(c,u,f,m).topLeft.subdivide(.5),topLeftInner:z(c+s[3].width,u+s[0].width,Math.max(0,f-s[3].width),Math.max(0,m-s[0].width)).topLeft.subdivide(.5),topRightOuter:z(c+v,u,g,b).topRight.subdivide(.5),topRightInner:z(c+Math.min(v,p+s[3].width),u+s[0].width,v>p+s[3].width?0:g-s[3].width,b-s[0].width).topRight.subdivide(.5),bottomRightOuter:z(c+L,u+T,w,y).bottomRight.subdivide(.5),bottomRightInner:z(c+Math.min(L,p+s[3].width),u+Math.min(T,h+s[0].width),Math.max(0,w-s[1].width),Math.max(0,y-s[2].width)).bottomRight.subdivide(.5),bottomLeftOuter:z(c,u+C,x,d).bottomLeft.subdivide(.5),bottomLeftInner:z(c+s[3].width,u+C,Math.max(0,x-s[3].width),Math.max(0,d-s[2].width)).bottomLeft.subdivide(.5)}),S={clip:function(t,e,o,n,r){var i=[];switch(B(t,"backgroundClip")){case"content-box":case"padding-box":A(i,n[0],n[1],e.topLeftInner,e.topRightInner,r.left+o[3].width,r.top+o[0].width),A(i,n[1],n[2],e.topRightInner,e.bottomRightInner,r.left+r.width-o[1].width,r.top+o[0].width),A(i,n[2],n[3],e.bottomRightInner,e.bottomLeftInner,r.left+r.width-o[1].width,r.top+r.height-o[2].width),A(i,n[3],n[0],e.bottomLeftInner,e.topLeftInner,r.left+o[3].width,r.top+r.height-o[2].width);break;default:A(i,n[0],n[1],e.topLeftOuter,e.topRightOuter,r.left,r.top),A(i,n[1],n[2],e.topRightOuter,e.bottomRightOuter,r.left+r.width,r.top),A(i,n[2],n[3],e.bottomRightOuter,e.bottomLeftOuter,r.left+r.width,r.top+r.height),A(i,n[3],n[0],e.bottomLeftOuter,e.topLeftOuter,r.left,r.top+r.height)}return i}(t,O,o,N,e),borders:[]},V=0;V<4;V++)if(0<o[V].width){switch(n=E,r=k,i=M,a=I-o[2].width,V){case 0:a=o[0].width,l=_({c1:[n,r],c2:[n+i,r],c3:[n+i-o[1].width,r+a],c4:[n+o[3].width,r+a]},N[0],N[1],O.topLeftOuter,O.topLeftInner,O.topRightOuter,O.topRightInner);break;case 1:l=_({c1:[(n=E+M-o[1].width)+(i=o[1].width),r],c2:[n+i,r+a+o[2].width],c3:[n,r+a],c4:[n,r+o[0].width]},N[1],N[2],O.topRightOuter,O.topRightInner,O.bottomRightOuter,O.bottomRightInner);break;case 2:l=_({c1:[n+i,(r=r+I-o[2].width)+(a=o[2].width)],c2:[n,r+a],c3:[n+o[3].width,r],c4:[n+i-o[3].width,r]},N[2],N[3],O.bottomRightOuter,O.bottomRightInner,O.bottomLeftOuter,O.bottomLeftInner);break;case 3:i=o[3].width,l=_({c1:[n,r+a+o[2].width],c2:[n,r],c3:[n+i,r+o[0].width],c4:[n+i,r+a]},N[3],N[0],O.bottomLeftOuter,O.bottomLeftInner,O.topLeftOuter,O.topLeftInner)}S.borders.push({args:l,color:o[V].color})}return S}function k(t,e){var o=t.drawShape();e.forEach(function(t,e){o[0===e?"moveTo":t[0]+"To"].apply(null,t.slice(1))})}function M(e,t,o){var n=c.createElement("valuewrap");["lineHeight","textAlign","fontFamily","color","fontSize","paddingLeft","paddingTop","width","height","border","borderLeftWidth","borderTopWidth"].forEach(function(t){try{n.style[t]=B(e,t)}catch(t){x.log("html2canvas: Parse: Exception caught in renderFormValue: "+t.message)}}),n.style.borderColor="black",n.style.borderStyle="solid",n.style.display="block",n.style.position="absolute",!/^(submit|reset|button|text|password)$/.test(e.type)&&"SELECT"!==e.nodeName||(n.style.lineHeight=B(e,"height")),n.style.top=t.top+"px",n.style.left=t.left+"px",t=(t="SELECT"===e.nodeName?(e.options[e.selectedIndex]||0).text:e.value)||e.placeholder,t=c.createTextNode(t),n.appendChild(t),r.appendChild(n),i(e,t,o),r.removeChild(n)}function d(t){t.drawImage.apply(t,Array.prototype.slice.call(arguments,1)),0}function I(t,e){var o,n=window.getComputedStyle(t,e);if(n&&n.content&&"none"!==n.content&&"-moz-alt-content"!==n.content&&"none"!==n.display)return e="url"===(t=(e=(t=n.content+"").substr(0,1))===t.substr(t.length-1)&&e.match(/'|"/)?t.substr(1,t.length-2):t).substr(0,3),(o=document.createElement(e?"img":"span")).className=T+"-before "+T+"-after",Object.keys(n).filter(P).forEach(function(e){try{o.style[e]=n[e]}catch(t){x.log(["Tried to assign readonly property ",e,"Error:",t])}}),e?o.src=x.parseBackgroundImage(t)[0].args[0]:o.innerHTML=t,o}function P(t){return isNaN(window.parseInt(t,10))}function g(t,e,o,n){var r=Math.round(n.left+o.left),n=Math.round(n.top+o.top);t.createPattern(e),t.translate(r,n),t.fill(),t.translate(-r,-n)}function l(t,e,o,n,r,i,a,l){var h=[];h.push(["line",Math.round(r),Math.round(i)]),h.push(["line",Math.round(r+a),Math.round(i)]),h.push(["line",Math.round(r+a),Math.round(l+i)]),h.push(["line",Math.round(r),Math.round(l+i)]),k(t,h),t.save(),t.clip(),g(t,e,o,n),t.restore()}function $(t,e,o,n,r){var i=x.BackgroundSize(t,e,n,r),a=x.BackgroundPosition(t,e,n,r,i),t=B(t,"backgroundRepeat").split(",").map(x.trimText);switch(n=function(t,e){if(t.width===e.width&&t.height===e.height)return t;var o=c.createElement("canvas");return o.width=e.width,o.height=e.height,d(o.getContext("2d"),t,0,0,t.width,t.height,0,0,e.width,e.height),o}(n,i),t[r]||t[0]){case"repeat-x":l(o,n,a,e,e.left,e.top+a.top,99999,n.height);break;case"repeat-y":l(o,n,a,e,e.left+a.left,e.top,n.width,99999);break;case"no-repeat":l(o,n,a,e,e.left+a.left,e.top+a.top,n.width,n.height);break;default:g(o,n,a,{top:e.top,left:e.left,width:n.width,height:n.height})}}function D(t){return t.replace("px","")}var n,b,w,G=/(matrix)\((.+)\)/;function U(t,e,o,n){var r,i,a,l,h,d,s=h2cRenderContext(e?o.width:Math.max(Math.max(c.body.scrollWidth,c.documentElement.scrollWidth),Math.max(c.body.offsetWidth,c.documentElement.offsetWidth),Math.max(c.body.clientWidth,c.documentElement.clientWidth)),e?o.height:Math.max(Math.max(c.body.scrollHeight,c.documentElement.scrollHeight),Math.max(c.body.offsetHeight,c.documentElement.offsetHeight),Math.max(c.body.clientHeight,c.documentElement.clientHeight))),s={ctx:s,opacity:(i=e,s.setVariable("globalAlpha",B(t,"opacity")*(i?i.opacity:1))),cssPosition:B(t,"position"),borders:(r=t,["Top","Right","Bottom","Left"].map(function(t){return{width:u(r,"border"+t+"Width"),color:B(r,"border"+t+"Color")}})),transform:n,clip:e&&e.clip?x.Extend({},e.clip):null};return i=t,n=e,l="static"!==(e=s).cssPosition,h=l?B(i,"zIndex"):"auto",d=B(i,"opacity"),i="none"!==B(i,"cssFloat"),e.zIndex=a=h2czContext(h),a.isPositioned=l,a.isFloated=i,a.opacity=d,a.ownStacking="auto"!==h||d<1,n&&n.zIndex.children.push(e),!0===p.useOverflow&&!0===/(hidden|scroll|auto)/.test(B(t,"overflow"))&&!1===/(BODY)/i.test(t.nodeName)&&(s.clip=s.clip?R(s.clip,o):o),s}function y(t,e,o,n){l=B(a=t,"transform")||B(a,"-webkit-transform")||B(a,"-moz-transform")||B(a,"-ms-transform")||B(a,"-o-transform");var r,i,a,l={origin:(B(a,"transform-origin")||B(a,"-webkit-transform-origin")||B(a,"-moz-transform-origin")||B(a,"-ms-transform-origin")||B(a,"-o-transform-origin")||"0px 0px").split(" ").map(D).map(x.asFloat),matrix:i=l&&"none"!==l&&(a=l.match(G))&&"matrix"===a[1]?a[2].split(",").map(x.trimText).map(x.asFloat):i},h=(a=t,a=(i=l).matrix?x.OffsetBounds(a):x.Bounds(a),i.origin[0]+=a.left,i.origin[1]+=a.top,a),d=U(t,e,h,l),s=d.borders,c=d.ctx,u=(i=h,a=d.clip,i={left:i.left+s[3].width,top:i.top+s[0].width,width:i.width-(s[1].width+s[3].width),height:i.height-(s[0].width+s[2].width)},i=a?R(i,a):i),e=F(t,h,s),l=v.test(t.nodeName)?"#efefef":B(t,"backgroundColor");if(k(c,e.clip),c.save(),c.clip(),0<u.height&&0<u.width&&!n){L(c,h.left,h.top,h.width,h.height,l);for(var p,f=t,m=u,g=c,b=B(f,"backgroundImage"),w=x.parseBackgroundImage(b),y=w.length;y--;)(b=w[y]).args&&0!==b.args.length&&((p=C("url"===b.method?b.args[0]:b.value))?$(f,m,g,p,y):x.log("html2canvas: Error loading background:",b))}else n&&(d.backgroundColor=l);switch(c.restore(),e.borders.forEach(function(t){var e,o;e=c,o=t.args,"transparent"!==(t=t.color)&&(e.setVariable("fillStyle",t),k(e,o),e.fill(),0)}),o||(a=d,n=I(i=t,":before"),l=I(i,":after"),(n||l)&&(n&&(i.className+=" "+T+"-before",i.parentNode.insertBefore(n,i),N(n,a,!0),i.parentNode.removeChild(n),i.className=i.className.replace(T+"-before","").trim()),l&&(i.className+=" "+T+"-after",i.appendChild(l),N(l,a,!0),i.removeChild(l),i.className=i.className.replace(T+"-after","").trim()))),t.nodeName){case"IMG":(r=C(t.getAttribute("src")))?E(c,t,r,h,s):x.log("html2canvas: Error loading <img>:"+t.getAttribute("src"));break;case"INPUT":/^(text|url|email|submit|button|reset)$/.test(t.type)&&0<(t.value||t.placeholder||"").length&&M(t,h,d);break;case"TEXTAREA":0<(t.value||t.placeholder||"").length&&M(t,h,d);break;case"SELECT":0<(t.options||t.placeholder||"").length&&M(t,h,d);break;case"LI":H(t,d,u);break;case"CANVAS":E(c,t,t,h,s)}return d}function N(t,e,o){var n;"none"===B(n=t,"display")||"hidden"===B(n,"visibility")||n.hasAttribute("data-html2canvas-ignore")||(e=y(t,e,o,!1)||e,v.test(t.nodeName)||O(t,e,o))}function O(e,o,n){x.Children(e).forEach(function(t){t.nodeType===t.ELEMENT_NODE?N(t,o,n):t.nodeType===t.TEXT_NODE&&i(e,t,o)})}return n=B(document.documentElement,"backgroundColor"),b=x.isTransparent(n)&&t===document.body,w=y(t,null,!1,b),O(t,w),b&&(n=w.backgroundColor),r.removeChild(o),{backgroundColor:n,stack:w}};