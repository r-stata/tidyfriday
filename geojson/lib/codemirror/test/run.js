#!/usr/bin/env node
var lint=require("./lint/lint"),ok=(lint.checkDir("mode"),lint.checkDir("lib"),lint.checkDir("addon"),lint.checkDir("keymap"),lint.success()),files=new(require("node-static").Server)("."),server=require("http").createServer(function(e,r){e.addListener("end",function(){files.serve(e,r)})}).addListener("error",function(e){throw e}).listen(3e3,function(){var r=require("child_process");r.exec("which phantomjs",function(e){e&&(console.error("PhantomJS is not installed. Download from http://phantomjs.org"),process.exit(1));r.exec("phantomjs test/phantom_driver.js",function(e,r){server.close(),console.log(r),process.exit(e||!ok?1:0)})})});