!function(){function l(e,n){if(e){l.prototype=e;var o=new l;if(n)for(var a in n)n.hasOwnProperty(a)&&(o[a]=n[a]);return o}}function s(e){var n=arguments.length,o=null;if("string"==typeof arguments[n-1]&&(o=arguments[--n]),a==n)throw new Error("No editors provided to eqAll");for(var a=1;a<n;++a)eq(arguments[a].getValue(),e,o)}function e(e,r,s,t,n){t=t||{},test("doc_"+e,function(){var e=document.getElementById("testground"),n=function(e,n,o){for(var a={},r=(e.length,[]);e;){var s,t=e.match(/^(\w+)(\*?)(?:='([^\']*)'|<(~?)(\w+)(?:\/(\d+)-(\d+))?)\s*/),c=t[1],u=t[2];u=t[3]?u?CodeMirror.Doc(t[3]):CodeMirror(n,l(o,{value:t[3]})):(s=t[5],a.hasOwnProperty(s)||(a[s]=r.length,r.push(CodeMirror(n,o))),s=r[a[s]].linkedDoc({sharedHist:!t[4],from:t[6]?Number(t[6]):null,to:t[7]?Number(t[7]):null}),u?s:CodeMirror(n,l(o,{value:s}))),a[c]=r.length,r.push(u),e=e.slice(t[0].length)}return r}(r,e,t),o=!1;try{s.apply(null,n),o=!0}finally{if(debug&&!o||verbose)e.style.visibility="visible";else for(var a=0;a<n.length;++a)n[a]instanceof CodeMirror&&e.removeChild(n[a].getWrapperElement())}},n)}var n=/MSIE [1-7]\b/.test(navigator.userAgent);function o(e,n){s("x",e,n),e.setValue("hey"),s("hey",e,n),n.setValue("wow"),s("wow",e,n),e.replaceRange("u\nv\nw",Pos(0,3)),n.replaceRange("i",Pos(0,4)),n.replaceRange("j",Pos(2,1)),s("wowui\nv\nwj",e,n)}e("basic","A='x' B<A",o),e("basicSeparate","A='x' B<~A",o),e("sharedHist","A='ab\ncd\nef' B<A",function(e,n){e.replaceRange("x",Pos(0)),n.replaceRange("y",Pos(1)),e.replaceRange("z",Pos(2)),s("abx\ncdy\nefz",e,n),e.undo(),e.undo(),s("abx\ncd\nef",e,n),e.redo(),s("abx\ncdy\nef",e,n),n.redo(),s("abx\ncdy\nefz",e,n),e.undo(),n.undo(),e.undo(),e.undo(),s("ab\ncd\nef",e,n)},null,n),e("undoIntact","A='ab\ncd\nef' B<~A",function(e,n){e.replaceRange("x",Pos(0)),n.replaceRange("y",Pos(1)),e.replaceRange("z",Pos(2)),e.replaceRange("q",Pos(0)),s("abxq\ncdy\nefz",e,n),e.undo(),e.undo(),s("abx\ncdy\nef",e,n),n.undo(),s("abx\ncd\nef",e,n),e.redo(),s("abx\ncd\nefz",e,n),e.redo(),s("abxq\ncd\nefz",e,n),e.undo(),e.undo(),e.undo(),e.undo(),s("ab\ncd\nef",e,n),n.redo(),s("ab\ncdy\nef",e,n)}),e("undoConflict","A='ab\ncd\nef' B<~A",function(e,n){e.replaceRange("x",Pos(0)),e.replaceRange("z",Pos(2)),n.replaceRange("y",Pos(0)),e.undo(),e.undo(),s("abxy\ncd\nef",e,n),e.replaceRange("u",Pos(2)),e.replaceRange("v",Pos(0)),n.replaceRange("w",Pos(0)),e.undo(),e.undo(),s("abxyvw\ncd\nefu",e,n)}),e("doubleRebase","A='ab\ncd\nef\ng' B<~A C<B",function(e,n,o){o.replaceRange("u",Pos(3)),e.replaceRange("",Pos(0,0),Pos(1,0)),o.undo(),s("cd\nef\ng",e,n,o)}),e("undoUpdate","A='ab\ncd\nef' B<~A",function(e,n){e.replaceRange("x",Pos(2)),n.replaceRange("u\nv\nw\n",Pos(0,0)),e.undo(),s("u\nv\nw\nab\ncd\nef",e,n),e.redo(),s("u\nv\nw\nab\ncd\nefx",e,n),e.undo(),s("u\nv\nw\nab\ncd\nef",e,n),n.undo(),e.redo(),s("ab\ncd\nefx",e,n),e.undo(),s("ab\ncd\nef",e,n)}),e("undoKeepRanges","A='abcdefg' B<A",function(e,n){e=e.markText(Pos(0,1),Pos(0,3),{className:"foo"});n.replaceRange("x",Pos(0,0)),eqPos(e.find().from,Pos(0,2)),n.replaceRange("yzzy",Pos(0,1),Pos(0)),eq(e.find(),null),n.undo(),eqPos(e.find().from,Pos(0,2)),n.undo(),eqPos(e.find().from,Pos(0,1))}),e("longChain","A='uv' B<A C<B D<C",function(e,n,o,a){e.replaceSelection("X"),s("Xuv",e,n,o,a),a.replaceRange("Y",Pos(0)),s("XuvY",e,n,o,a)}),e("broadCast","B<A C<A D<A E<A",function(e,n,o,a,r){n.setValue("uu"),s("uu",e,n,o,a,r),e.replaceRange("v",Pos(0,1)),s("uvu",e,n,o,a,r)}),e("islands","A='x\ny\nz' B<A C<~A D<C",function(e,n,o,a){e.replaceRange("u",Pos(0)),a.replaceRange("v",Pos(2)),n.undo(),s("x\ny\nzv",e,n,o,a),o.undo(),s("x\ny\nz",e,n,o,a),e.redo(),s("xu\ny\nz",e,n,o,a),a.redo(),s("xu\ny\nzv",e,n,o,a)}),e("unlink","B<A C<A D<B",function(e,n,o,a){e.setValue("hi"),n.unlinkDoc(e),a.setValue("aye"),s("hi",e,o),s("aye",n,a),e.setValue("oo"),s("oo",e,o),s("aye",n,a)}),e("bareDoc","A*='foo' B*<A C<B",function(e,n,o){is(e instanceof CodeMirror.Doc),is(n instanceof CodeMirror.Doc),is(o instanceof CodeMirror),s("foo",e,n,o),e.replaceRange("hey",Pos(0,0),Pos(0)),o.replaceRange("!",Pos(0)),s("hey!",e,n,o),n.unlinkDoc(e),n.setValue("x"),s("x",n,o),s("hey!",e)}),e("swapDoc","A='a' B*='b' C<A",function(e,n,o){var a=e.swapDoc(n);a.setValue("x"),s("x",o,a),s("b",e,n)}),e("docKeepsScroll","A='x' B*='y'",function(e,n){addDoc(e,200,200),e.scrollIntoView(Pos(199,200));n=e.swapDoc(n),e.swapDoc(n),n=e.getScrollInfo();is(0<n.left,"not at left"),is(0<n.top,"not at top")}),e("copyDoc","A='u'",function(e){var n=e.getDoc().copy(!0),n=(e.setValue("foo"),n.setValue("bar"),e.swapDoc(n));eq(e.getValue(),"bar"),e.undo(),eq(e.getValue(),"u"),e.swapDoc(n),eq(e.getValue(),"foo"),eq(n.historySize().undo,1),eq(n.copy(!1).historySize().undo,0)}),e("docKeepsMode","A='1+1'",function(e){var n=CodeMirror.Doc("hi","text/x-markdown"),n=(e.setOption("mode","text/javascript"),e.swapDoc(n));eq(e.getOption("mode"),"text/x-markdown"),eq(e.getMode().name,"markdown"),e.swapDoc(n),eq(e.getOption("mode"),"text/javascript"),eq(e.getMode().name,"javascript")}),e("subview","A='1\n2\n3\n4\n5' B<~A/1-3",function(e,n){eq(n.getValue(),"2\n3"),eq(n.firstLine(),1),n.setCursor(Pos(4)),eqPos(n.getCursor(),Pos(2,1)),e.replaceRange("-1\n0\n",Pos(0,0)),eq(n.firstLine(),3),eqPos(n.getCursor(),Pos(4,1)),e.undo(),eqPos(n.getCursor(),Pos(2,1)),n.replaceRange("oyoy\n",Pos(2,0)),eq(e.getValue(),"1\n2\noyoy\n3\n4\n5"),n.undo(),eq(e.getValue(),"1\n2\n3\n4\n5")}),e("subviewEditOnBoundary","A='11\n22\n33\n44\n55' B<~A/1-4",function(e,n){e.replaceRange("x\nyy\nz",Pos(0,1),Pos(2,1)),eq(n.firstLine(),2),eq(n.lineCount(),2),eq(n.getValue(),"z3\n44"),e.replaceRange("q\nrr\ns",Pos(3,1),Pos(4,1)),eq(n.firstLine(),2),eq(n.getValue(),"z3\n4q"),eq(e.getValue(),"1x\nyy\nz3\n4q\nrr\ns5"),e.execCommand("selectAll"),e.replaceSelection("!"),s("!",e,n)}),e("sharedMarker","A='ab\ncd\nef\ngh' B<A C<~A/1-2",function(e,n,o){var a=n.markText(Pos(0,1),Pos(3,1),{className:"cm-searching",shared:!0}),r=e.findMarksAt(Pos(0,2)),s=(eq(r.length,1),eq(r[0],a),eq(o.findMarksAt(Pos(1,1)).length,1),eqPos(a.find().from,Pos(0,1)),eqPos(a.find().to,Pos(3,1)),n.replaceRange("x\ny\n",Pos(0,0)),eqPos(a.find().from,Pos(2,1)),eqPos(a.find().to,Pos(5,1)),0);CodeMirror.on(a,"clear",function(){++s}),n.operation(function(){a.clear()}),eq(e.findMarksAt(Pos(3,1)).length,0),eq(n.findMarksAt(Pos(3,1)).length,0),eq(o.findMarksAt(Pos(3,1)).length,0),eq(a.find(),null),eq(s,1)}),e("undoInSubview","A='line 0\nline 1\nline 2\nline 3\nline 4' B<A/1-4",function(e,n){n.replaceRange("x",Pos(2,0)),e.undo(),eq(e.getValue(),"line 0\nline 1\nline 2\nline 3\nline 4"),eq(n.getValue(),"line 1\nline 2\nline 3")})}();