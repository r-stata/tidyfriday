window.CodeMirror=function(){"use strict";var i,v=/gecko\/\d/i.test(navigator.userAgent),k=/MSIE \d/.test(navigator.userAgent),U=k&&(null==document.documentMode||document.documentMode<8),S=k&&(null==document.documentMode||document.documentMode<9),w=/WebKit\//.test(navigator.userAgent),r=w&&/Qt\/\d+\.\d+/.test(navigator.userAgent),o=/Chrome\//.test(navigator.userAgent),f=/Opera\//.test(navigator.userAgent),y=/Apple Computer/.test(navigator.vendor),b=/KHTML\//.test(navigator.userAgent),l=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),s=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Y=/PhantomJS/.test(navigator.userAgent),j=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),$=j||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Z=j||/Mac/.test(navigator.platform),a=/windows/i.test(navigator.platform),c=(c=f&&navigator.userAgent.match(/Version\/(\d*\.\d*)/))&&Number(c[1]),q=Z&&(r||f&&(null==c||c<12.11)),J=v||k&&!S,Q=!1,tt=!1;function d(t,r){if(!(this instanceof d))return new d(t,r);for(var e in this.options=r=r||{},_e)!r.hasOwnProperty(e)&&_e.hasOwnProperty(e)&&(r[e]=_e[e]);ut(r);var n,i,o="string"==typeof r.value?0:r.value.first,t=this.display=function(t,e){var r={},n=r.input=K("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");w?n.style.width="1000px":n.setAttribute("wrap","off");j&&(n.style.border="1px solid black");n.setAttribute("autocorrect","off"),n.setAttribute("autocapitalize","off"),n.setAttribute("spellcheck","false"),r.inputDiv=K("div",[n],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),r.scrollbarH=K("div",[K("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),r.scrollbarV=K("div",[K("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),r.scrollbarFiller=K("div",null,"CodeMirror-scrollbar-filler"),r.gutterFiller=K("div",null,"CodeMirror-gutter-filler"),r.lineDiv=K("div",null,"CodeMirror-code"),r.selectionDiv=K("div",null,null,"position: relative; z-index: 1"),r.cursor=K("div"," ","CodeMirror-cursor"),r.otherCursor=K("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"),r.measure=K("div",null,"CodeMirror-measure"),r.lineSpace=K("div",[r.measure,r.selectionDiv,r.lineDiv,r.cursor,r.otherCursor],null,"position: relative; outline: none"),r.mover=K("div",[K("div",[r.lineSpace],"CodeMirror-lines")],null,"position: relative"),r.sizer=K("div",[r.mover],"CodeMirror-sizer"),r.heightForcer=K("div",null,null,"position: absolute; height: "+m+"px; width: 1px;"),r.gutters=K("div",null,"CodeMirror-gutters"),r.lineGutter=null,r.scroller=K("div",[r.sizer,r.heightForcer,r.gutters],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=K("div",[r.inputDiv,r.scrollbarH,r.scrollbarV,r.scrollbarFiller,r.gutterFiller,r.scroller],"CodeMirror"),U&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0);t.appendChild?t.appendChild(r.wrapper):t(r.wrapper);j&&(n.style.width="0px");w||(r.scroller.draggable=!0);b?(r.inputDiv.style.height="1px",r.inputDiv.style.position="absolute"):U&&(r.scrollbarH.style.minWidth=r.scrollbarV.style.minWidth="18px");return r.viewOffset=r.lastSizeC=0,r.showingFrom=r.showingTo=e,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.prevInput="",r.alignWidgets=!1,r.pollingFast=!1,r.poll=new hn,r.cachedCharWidth=r.cachedTextHeight=null,r.measureLineCache=[],r.measureLineCachePos=0,r.inaccurateSelection=!1,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r}(t,o),o=(st(t.wrapper.CodeMirror=this),r.autofocus&&!$&&M(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new hn},ot(this),r.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),r.value),l=(C(this,Gr)(this,o="string"==typeof o?new p(r.value,r.mode):o),k&&setTimeout(V($t,this,!0),20),this),s=l.display;function a(){l.state.focused&&setTimeout(V(M,l),0)}function c(){null==i&&(i=setTimeout(function(){i=null,s.cachedCharWidth=s.cachedTextHeight=Sn=null,Nt(l),_t(l,V(x,l))},100))}function u(t){G(l,t)||l.options.onDragEvent&&l.options.onDragEvent(l,tn(t))||rn(t)}function h(){s.inaccurateSelection&&(s.prevInput="",s.inaccurateSelection=!1,s.input.value=l.getSelection(),gn(s.input))}F(s.scroller,"mousedown",C(l,Qt)),F(s.scroller,"dblclick",k?C(l,function(t){var e;G(l,t)||(!(e=Jt(l,t))||te(l,t)||qt(l.display,t)||(I(t),t=Ke(W(l.doc,e.line).text,e),D(l.doc,t.from,t.to)))}):function(t){G(l,t)||I(t)}),F(s.lineSpace,"selectstart",function(t){qt(s,t)||I(t)}),J||F(s.scroller,"contextmenu",function(t){ve(l,t)}),F(s.scroller,"scroll",function(){s.scroller.clientHeight&&(ne(l,s.scroller.scrollTop),ie(l,s.scroller.scrollLeft,!0),g(l,"scroll",l))}),F(s.scrollbarV,"scroll",function(){s.scroller.clientHeight&&ne(l,s.scrollbarV.scrollTop)}),F(s.scrollbarH,"scroll",function(){s.scroller.clientHeight&&ie(l,s.scrollbarH.scrollLeft)}),F(s.scroller,"mousewheel",function(t){se(l,t)}),F(s.scroller,"DOMMouseScroll",function(t){se(l,t)}),F(s.scrollbarH,"mousedown",a),F(s.scrollbarV,"mousedown",a),F(s.wrapper,"scroll",function(){s.wrapper.scrollTop=s.wrapper.scrollLeft=0}),F(window,"resize",c),setTimeout(function t(){for(var e=s.wrapper.parentNode;e&&e!=document.body;e=e.parentNode);e?setTimeout(t,5e3):P(window,"resize",c)},5e3),F(s.input,"keyup",C(l,function(t){G(l,t)||l.options.onKeyEvent&&l.options.onKeyEvent(l,tn(t))||16==t.keyCode&&(l.doc.sel.shift=!1)})),F(s.input,"input",V(Yt,l)),F(s.input,"keydown",C(l,de)),F(s.input,"keypress",C(l,pe)),F(s.input,"focus",V(ge,l)),F(s.input,"blur",V(me,l)),l.options.dragDrop&&(F(s.scroller,"dragstart",function(t){var e,r;e=l,t=t,k&&(!e.state.draggingText||+new Date-ee<100)?rn(t):G(e,t)||qt(e.display,t)||(r=e.getSelection(),t.dataTransfer.setData("Text",r),t.dataTransfer.setDragImage&&!y&&(r=K("img",null,null,"position: fixed; left: 0; top: 0;"),f&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),t.dataTransfer.setDragImage(r,0,0),f&&r.parentNode.removeChild(r)))}),F(s.scroller,"dragenter",u),F(s.scroller,"dragover",u),F(s.scroller,"drop",C(l,re))),F(s.scroller,"paste",function(t){qt(s,t)||(M(l),Yt(l))}),F(s.input,"paste",function(){l.state.pasteIncoming=!0,Yt(l)}),F(s.input,"cut",h),F(s.input,"copy",h),b&&F(s.sizer,"mouseup",function(){document.activeElement==s.input&&s.input.blur(),M(l)});try{n=document.activeElement==t.input}catch(t){}n||r.autofocus&&!$?setTimeout(V(ge,this),20):me(this),C(this,function(){for(var t in Xe)Xe.propertyIsEnumerable(t)&&Xe[t](this,r[t],Ue);for(var e=0;e<Ze.length;++e)Ze[e](this)})()}function et(t){t.doc.mode=d.getMode(t.options,t.doc.modeOption),t.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),t.doc.frontier=t.doc.first,Ct(t,100),t.state.modeGen++,t.curOp&&x(t)}function rt(e){var r=Ft(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/Pt(e.display)-3);return function(t){return gr(e.doc,t)?0:n?(Math.ceil(t.text.length/i)||1)*r:r}}function nt(t){var e=t.doc,r=rt(t);e.iter(function(t){var e=r(t);e!=t.height&&O(t,e)})}function it(t){var e=n[t.options.keyMap],r=e.style;t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(r?" cm-keymap-"+r:""),t.state.disableInput=e.disableInput}function ot(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Nt(t)}function lt(t){st(t),x(t),setTimeout(function(){dt(t)},20)}function st(t){var e=t.display.gutters,r=t.options.gutters;Ln(e);for(var n=0;n<r.length;++n){var i=r[n],o=e.appendChild(K("div",null,"CodeMirror-gutter "+i));"CodeMirror-linenumbers"==i&&((t.display.lineGutter=o).style.width=(t.display.lineNumWidth||1)+"px")}e.style.display=n?"":"none"}function at(t,e){if(0==e.height)return 0;for(var r,n=e.text.length,i=e;r=fr(i);){i=W(t,(o=r.find()).from.line);n+=o.from.ch-o.to.ch}for(i=e;r=dr(i);)var o=r.find(),n=(n-=i.text.length-o.from.ch)+((i=W(t,o.to.line)).text.length-o.to.ch);return n}function ct(t){var r=t.display,n=t.doc;r.maxLine=W(n,n.first),r.maxLineLength=at(n,r.maxLine),r.maxLineChanged=!0,n.iter(function(t){var e=at(n,t);e>r.maxLineLength&&(r.maxLineLength=e,r.maxLine=t)})}function ut(t){for(var e=!1,r=0;r<t.gutters.length;++r)"CodeMirror-linenumbers"==t.gutters[r]&&(t.lineNumbers?e=!0:t.gutters.splice(r--,1));!e&&t.lineNumbers&&t.gutters.push("CodeMirror-linenumbers")}function ht(t){var e=t.display,r=t.doc.height+St(e),r=(e.sizer.style.minHeight=e.heightForcer.style.top=r+"px",e.gutters.style.height=Math.max(r,e.scroller.clientHeight-m)+"px",Math.max(r,e.scroller.scrollHeight)),n=e.scroller.scrollWidth>e.scroller.clientWidth+1,i=r>e.scroller.clientHeight+1;i?(e.scrollbarV.style.display="block",e.scrollbarV.style.bottom=n?Nn(e.measure)+"px":"0",e.scrollbarV.firstChild.style.height=r-e.scroller.clientHeight+e.scrollbarV.clientHeight+"px"):e.scrollbarV.style.display="",n?(e.scrollbarH.style.display="block",e.scrollbarH.style.right=i?Nn(e.measure)+"px":"0",e.scrollbarH.firstChild.style.width=e.scroller.scrollWidth-e.scroller.clientWidth+e.scrollbarH.clientWidth+"px"):e.scrollbarH.style.display="",n&&i?(e.scrollbarFiller.style.display="block",e.scrollbarFiller.style.height=e.scrollbarFiller.style.width=Nn(e.measure)+"px"):e.scrollbarFiller.style.display="",n&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(e.gutterFiller.style.display="block",e.gutterFiller.style.height=Nn(e.measure)+"px",e.gutterFiller.style.width=e.gutters.offsetWidth+"px"):e.gutterFiller.style.display="",l&&0===Nn(e.measure)&&(e.scrollbarV.style.minWidth=e.scrollbarH.style.minHeight=s?"18px":"12px")}function ft(t,e,r){var n=t.scroller.scrollTop,i=t.wrapper.clientHeight,r=("number"==typeof r?n=r:r&&(n=r.top,i=r.bottom-r.top),n=Math.floor(n-kt(t)),Math.ceil(n+i));return{from:Kr(e,n),to:Kr(e,r)}}function dt(t){var e=t.display;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var r=gt(e)-e.scroller.scrollLeft+t.doc.scrollLeft,n=e.gutters.offsetWidth,i=r+"px",o=e.lineDiv.firstChild;o;o=o.nextSibling)if(o.alignable)for(var l=0,s=o.alignable;l<s.length;++l)s[l].style.left=i;t.options.fixedGutter&&(e.gutters.style.left=r+n+"px")}}function pt(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function gt(t){return _(t.scroller).left-_(t.sizer).left}function mt(t,e,r){for(var n,i=t.display.showingFrom,o=t.display.showingTo,l=ft(t.display,t.doc,r);function(t,e,r){var n=t.display,i=t.doc;if(n.wrapper.clientWidth){if(!(0==e.length&&r.from>n.showingFrom&&r.to<n.showingTo)){!function(t){var e,r,n;if(t.options.lineNumbers)return e=t.doc,e=pt(t.options,e.first+e.size-1),t=t.display,e.length!=t.lineNumChars?(r=(n=t.measure.appendChild(K("div",[K("div",e)],"CodeMirror-linenumber CodeMirror-gutter-elt"))).firstChild.offsetWidth,n=n.offsetWidth-r,t.lineGutter.style.width="",t.lineNumInnerWidth=Math.max(r,t.lineGutter.offsetWidth-n),t.lineNumWidth=t.lineNumInnerWidth+n,t.lineNumChars=t.lineNumInnerWidth?e.length:-1,t.lineGutter.style.width=t.lineNumWidth+"px",1):void 0}(t)||(e=[{from:i.first,to:i.first+i.size}]);var o=n.sizer.style.marginLeft=n.gutters.offsetWidth+"px",l=(n.scrollbarH.style.left=t.options.fixedGutter?o:"0",1/0);if(t.options.lineNumbers)for(var s=0;s<e.length;++s)if(e[s].diff){l=e[s].from;break}var a=i.first+i.size,c=Math.max(r.from-t.options.viewportMargin,i.first),u=Math.min(a,r.to+t.options.viewportMargin);if(n.showingFrom<c&&c-n.showingFrom<20&&(c=Math.max(i.first,n.showingFrom)),n.showingTo>u&&n.showingTo-u<20&&(u=Math.min(a,n.showingTo)),tt)for(c=E(pr(i,W(i,c)));u<a&&gr(i,W(i,u));)++u;var h=[{from:Math.max(n.showingFrom,i.first),to:Math.min(n.showingTo,a)}];if(h=h[0].from>=h[0].to?[]:function(t,e){for(var r=0,n=e.length||0;r<n;++r){for(var i=e[r],o=[],l=i.diff||0,s=0,a=t.length;s<a;++s){var c=t[s];i.to<=c.from&&i.diff?o.push({from:c.from+l,to:c.to+l}):i.to<=c.from||i.from>=c.to?o.push(c):(i.from>c.from&&o.push({from:c.from,to:i.from}),i.to<c.to&&o.push({from:i.to+l,to:c.to+l}))}t=o}return t}(h,e),tt)for(s=0;s<h.length;++s)for(var f=h[s];d=dr(W(i,f.to-1));){var d=d.find().from.line;if(!(d>f.from)){h.splice(s--,1);break}f.to=d}for(var p=0,s=0;s<h.length;++s)(f=h[s]).from<c&&(f.from=c),f.to>u&&(f.to=u),f.from>=f.to?h.splice(s--,1):p+=f.to-f.from;if(p!=u-c||c!=n.showingFrom||u!=n.showingTo){h.sort(function(t,e){return t.from-e.from});try{var g=document.activeElement}catch(t){}p<.7*(u-c)&&(n.lineDiv.style.display="none"),!function(c,t,e,u,h){var f=function(t){for(var e=t.display,r={},n={},i=e.gutters.firstChild,o=0;i;i=i.nextSibling,++o)r[t.options.gutters[o]]=i.offsetLeft,n[t.options.gutters[o]]=i.offsetWidth;return{fixedPos:gt(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:e.wrapper.clientWidth}}(c),r=c.display,d=c.options.lineNumbers;u.length||w&&c.display.currentWheelTarget||Ln(r.lineDiv);var p=r.lineDiv,g=p.firstChild;function m(t){var e=t.nextSibling;return w&&Z&&c.display.currentWheelTarget==t?(t.style.display="none",t.lineObj=null):t.parentNode.removeChild(t),e}var v=u.shift(),y=t;c.doc.iter(t,e,function(t){if(v&&v.to==y&&(v=u.shift()),gr(c.doc,t)){if(0!=t.height&&O(t,0),t.widgets&&g.previousSibling)for(var e=0;e<t.widgets.length;++e){var r,n,i=t.widgets[e];i.showIfHidden&&(r=g.previousSibling,/pre/i.test(r.nodeName)&&(n=K("div",null,null,"position: relative"),r.parentNode.replaceChild(n,r),n.appendChild(r),r=n),n=r.appendChild(K("div",[i.node],"CodeMirror-linewidget")),i.handleMouseEvents||(n.ignoreEvents=!0),yt(i,n,r,f))}}else if(v&&v.from<=y&&v.to>y){for(;g.lineObj!=t;)g=m(g);d&&h<=y&&g.lineNumber&&kn(g.lineNumber,pt(c.options,y)),g=g.nextSibling}else{if(t.widgets)for(var o,l=0,s=g;s&&l<20;++l,s=s.nextSibling)if(s.lineObj==t&&/div/i.test(s.nodeName)){o=s;break}var a=function(t,e,r,n,i){var o,l=Ar(t,e),s=e.gutterMarkers,a=t.display;if(!(t.options.lineNumbers||s||e.bgClass||e.wrapClass||e.widgets))return l;if(i){for(var c,u=!(i.alignable=null),h=0,f=null,d=i.firstChild;d;d=c)if(c=d.nextSibling,/\bCodeMirror-linewidget\b/.test(d.className)){for(var p=0;p<e.widgets.length;++p)if((x=e.widgets[p]).above||(f=d),x.node==d.firstChild){yt(x,d,i,n),++h;break}if(p==e.widgets.length){u=!1;break}}else i.removeChild(d);i.insertBefore(l,f),u&&h==e.widgets.length&&((o=i).className=e.wrapClass||"")}o||(o=K("div",null,e.wrapClass,"position: relative")).appendChild(l);e.bgClass&&o.insertBefore(K("div",null,e.bgClass+" CodeMirror-linebackground"),o.firstChild);if(t.options.lineNumbers||s){var g=o.insertBefore(K("div",null,null,"position: absolute; left: "+(t.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px"),o.firstChild);if(t.options.fixedGutter&&(o.alignable||(o.alignable=[])).push(g),!t.options.lineNumbers||s&&s["CodeMirror-linenumbers"]||(o.lineNumber=g.appendChild(K("div",pt(t.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.lineNumInnerWidth+"px"))),s)for(var m=0;m<t.options.gutters.length;++m){var v=t.options.gutters[m],y=s.hasOwnProperty(v)&&s[v];y&&g.appendChild(K("div",[y],"CodeMirror-gutter-elt","left: "+n.gutterLeft[v]+"px; width: "+n.gutterWidth[v]+"px"))}}U&&(o.style.zIndex=2);if(e.widgets&&o!=i)for(var p=0,b=e.widgets;p<b.length;++p){var x,C=K("div",[(x=b[p]).node],"CodeMirror-linewidget");x.handleMouseEvents||(C.ignoreEvents=!0),yt(x,C,o,n),x.above?o.insertBefore(C,t.options.lineNumbers&&0!=e.height?g:l):o.appendChild(C),R(x,"redraw")}return o}(c,t,y,f,o);if(a!=o)p.insertBefore(a,g);else{for(;g!=o;)g=m(g);g=g.nextSibling}a.lineObj=t}++y});for(;g;)g=m(g)}(t,c,u,h,l),n.lineDiv.style.display="",g&&document.activeElement!=g&&g.offsetHeight&&g.focus();(c!=n.showingFrom||u!=n.showingTo||n.lastSizeC!=n.wrapper.clientHeight)&&(n.lastSizeC=n.wrapper.clientHeight,Ct(t,400)),n.showingFrom=c,n.showingTo=u;for(var m,v=n.lineDiv.offsetTop,y=n.lineDiv.firstChild;y;y=y.nextSibling)if(y.lineObj){U?(b=y.offsetTop+y.offsetHeight,m=b-v,v=b):(b=_(y),m=b.bottom-b.top);var b,x=y.lineObj.height-m;if(m<2&&(m=Ft(n)),.001<x||x<-.001){O(y.lineObj,m);var C=y.lineObj.widgets;if(C)for(s=0;s<C.length;++s)C[s].height=C[s].node.offsetHeight}}return vt(t),1}vt(t)}}else n.showingFrom=n.showingTo=i.first,n.viewOffset=0}(t,e,l)&&(n=!0,bt(t),ht(t),r=r&&Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,"number"==typeof r?r:r.top),!((l=ft(t.display,t.doc,r)).from>=t.display.showingFrom&&l.to<=t.display.showingTo));)e=[];return n&&(R(t,"update",t),t.display.showingFrom==i&&t.display.showingTo==o||R(t,"viewportChange",t,t.display.showingFrom,t.display.showingTo)),n}function vt(t){var e=t.display.viewOffset=Xr(t,W(t.doc,t.display.showingFrom));t.display.mover.style.top=e+"px"}function yt(t,e,r,n){t.noHScroll&&((r.alignable||(r.alignable=[])).push(e),r=n.wrapperWidth,e.style.left=n.fixedPos+"px",t.coverGutter||(r-=n.gutterTotalWidth,e.style.paddingLeft=n.gutterTotalWidth+"px"),e.style.width=r+"px"),t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-n.gutterTotalWidth+"px"))}function bt(t){var e,r=t.display,n=A(t.doc.sel.from,t.doc.sel.to);if(n||t.options.showCursorWhenSelecting?(i=(l=t).display,s=L(l,l.doc.sel.head,"div"),i.cursor.style.left=s.left+"px",i.cursor.style.top=s.top+"px",i.cursor.style.height=Math.max(0,s.bottom-s.top)*l.options.cursorHeight+"px",i.cursor.style.display="",s.other?(i.otherCursor.style.display="",i.otherCursor.style.left=s.other.left+"px",i.otherCursor.style.top=s.other.top+"px",i.otherCursor.style.height=.85*(s.other.bottom-s.other.top)+"px"):i.otherCursor.style.display="none"):r.cursor.style.display=r.otherCursor.style.display="none",n)r.selectionDiv.style.display="none";else{var i,o=t,l=o.display,d=o.doc,s=o.doc.sel,a=document.createDocumentFragment(),p=l.lineSpace.offsetWidth,g=function(t){return X(t.measure,K("pre",null,null,"text-align: left")).appendChild(K("span","x")).offsetLeft}(o.display);function m(t,e,r,n){a.appendChild(K("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px; top: "+(e=e<0?0:e)+"px; width: "+(null==r?p-t:r)+"px; height: "+(n-e)+"px"))}function c(r,s,a){var c,u,n=W(d,r),h=n.text.length;function f(t,e){return Et(o,T(r,t),"div",n,e)}return function(t,e,r,n){if(!t)return n(e,r,"ltr");for(var i=0;i<t.length;++i){var o=t[i];(o.from<r&&o.to>e||e==r&&o.to==e)&&n(Math.max(o.from,e),Math.min(o.to,r),1==o.level?"rtl":"ltr")}}(z(n),s||0,null==a?h:a,function(t,e,r){var n,i,o,l=f(t,"left");t==e?n=i=(o=l).left:(o=f(e-1,"right"),"rtl"==r&&(r=l,l=o,o=r),n=l.left,i=o.right),null==s&&0==t&&(n=g),3<o.top-l.top&&(m(n,l.top,null,l.bottom),n=g,l.bottom<o.top&&m(n,l.bottom,null,o.top)),null==a&&e==h&&(i=p),(!c||l.top<c.top||l.top==c.top&&l.left<c.left)&&(c=l),(!u||o.bottom>u.bottom||o.bottom==u.bottom&&o.right>u.right)&&(u=o),m(n=n<g+1?g:n,o.top,i-n,o.bottom)}),{start:c,end:u}}s.from.line==s.to.line?c(s.from.line,s.from.ch,s.to.ch):(i=W(d,s.from.line),n=W(d,s.to.line),n=pr(d,i)==pr(d,n),i=c(s.from.line,s.from.ch,n?i.text.length:null).end,s=c(s.to.line,n?0:null,s.to.ch).start,n&&(i.top<s.top-2?(m(i.right,i.top,null,i.bottom),m(g,s.top,s.left,s.bottom)):m(i.right,i.top,s.left-i.right,i.bottom)),i.bottom<s.top&&m(g,i.bottom,null,s.top)),X(l.selectionDiv,a),l.selectionDiv.style.display=""}t.options.moveInputWithCursor&&(n=L(t,t.doc.sel.head,"div"),t=_(r.wrapper),e=_(r.lineDiv),r.inputDiv.style.top=Math.max(0,Math.min(r.wrapper.clientHeight-10,n.top+e.top-t.top))+"px",r.inputDiv.style.left=Math.max(0,Math.min(r.wrapper.clientWidth-10,n.left+e.left-t.left))+"px")}function xt(t){var e,r;t.state.focused&&(e=t.display,clearInterval(e.blinker),r=!0,e.cursor.style.visibility=e.otherCursor.style.visibility="",e.blinker=setInterval(function(){e.cursor.style.visibility=e.otherCursor.style.visibility=(r=!r)?"":"hidden"},t.options.cursorBlinkRate))}function Ct(t,e){t.doc.mode.startState&&t.doc.frontier<t.display.showingTo&&t.state.highlight.set(e,V(wt,t))}function wt(i){var o,l,s,a,c=i.doc;c.frontier<c.first&&(c.frontier=c.first),c.frontier>=i.display.showingTo||(o=+new Date+i.options.workTime,l=qe(c.mode,Lt(i,c.frontier)),s=[],c.iter(c.frontier,Math.min(c.first+c.size,i.display.showingTo+500),function(t){if(c.frontier>=i.display.showingFrom){for(var e=t.styles,r=(t.styles=Lr(i,t,l),!e||e.length!=t.styles.length),n=0;!r&&n<e.length;++n)r=e[n]!=t.styles[n];r&&(a&&a.end==c.frontier?a.end++:s.push(a={start:c.frontier,end:c.frontier+1})),t.stateAfter=qe(c.mode,l)}else Sr(i,t,l),t.stateAfter=c.frontier%5==0?qe(c.mode,l):null;if(++c.frontier,+new Date>o)return Ct(i,i.options.workDelay),!0}),s.length&&C(i,function(){for(var t=0;t<s.length;++t)x(this,s[t].start,s[t].end)})())}function Lt(r,n,t){var i,o,l=r.doc,s=r.display;return!l.mode.startState||(i=function(t,e,r){for(var n,i,o=t.doc,l=e,s=e-100;s<l;--l){if(l<=o.first)return o.first;var a=W(o,l-1);if(a.stateAfter&&(!r||l<=o.frontier))return l;a=fn(a.text,null,t.options.tabSize);(null==i||a<n)&&(i=l-1,n=a)}return i}(r,n,t),o=(o=i>l.first&&W(l,i-1).stateAfter)?qe(l.mode,o):Je(l.mode),l.iter(i,n,function(t){Sr(r,t,o);var e=i==n-1||i%5==0||i>=s.showingFrom&&i<s.showingTo;t.stateAfter=e?qe(l.mode,o):null,++i}),o)}function kt(t){return t.lineSpace.offsetTop}function St(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Mt(t,e,r,n,i){var o=-1;n=n||At(t,e);for(var l=r;;l+=o){var s=n[l];if(s)break;o<0&&0==l&&(o=1)}t=(l<r||"right"==i)&&null!=s.topRight;return{left:l<r?s.right:s.left,right:r<l?s.left:s.right,top:t?s.topRight:s.top,bottom:t?s.bottomRight:s.bottom}}function Tt(t,e){for(var r=t.display.measureLineCache,n=0;n<r.length;++n){var i=r[n];if(i.text==e.text&&i.markedSpans==e.markedSpans&&t.display.scroller.clientWidth==i.width&&i.classes==e.textClass+"|"+e.bgClass+"|"+e.wrapClass)return i}}function At(t,e){var r,n=Tt(t,e);return n?n.measure:(n=function(t,e){var r=t.display,n=yn(e.text.length),i=Ar(t,e,n);if(k&&!U&&!t.options.lineWrapping&&100<i.childNodes.length){for(var o=document.createDocumentFragment(),l=i.childNodes.length,s=0,a=Math.ceil(l/10);s<a;++s){for(var c=K("div",null,null,"display: inline-block"),u=0;u<10&&l;++u)c.appendChild(i.firstChild),--l;o.appendChild(c)}i.appendChild(o)}X(r.measure,i);var h=_(r.lineDiv),f=[],d=yn(e.text.length),p=i.offsetHeight;S&&r.measure.first!=i&&X(r.measure,i);function g(t,e){p<e&&(e=p),t<0&&(t=0);for(var r=0;r<f.length;r+=2){var n=f[r],i=f[r+1];if(!(e<n||i<t)&&(n<=t&&e<=i||t<=n&&i<=e||Math.min(e,i)-Math.max(t,n)>=e-t>>1))return f[r]=Math.min(t,n),f[r+1]=Math.max(e,i),r}return f.push(t,e),r}for(s=0;s<n.length;++s)if(C=n[s]){var m=C;if(/\bCodeMirror-widget\b/.test(C.className)&&C.getClientRects){var v=(m=1==C.firstChild.nodeType?C.firstChild:m).getClientRects(),y=v[0],b=v[v.length-1];if(1<v.length){var v=g(y.top-h.top,y.bottom-h.top),x=g(b.top-h.top,b.bottom-h.top);d[s]={left:y.left-h.left,right:b.right-h.left,top:v,topRight:x};continue}}b=g((y=_(m)).top-h.top,y.bottom-h.top),v=y.right;C.measureRight&&(v=_(C.measureRight).left),d[s]={left:y.left-h.left,right:v-h.left,top:b}}for(var C,s=0;s<d.length;++s){var w,L;(C=d[s])&&(w=C.top,L=C.topRight,C.top=f[w],C.bottom=f[w+1],null!=L&&(C.topRight=f[L],C.bottomRight=f[L+1]))}return d}(t,e),r=t.display.measureLineCache,e={text:e.text,width:t.display.scroller.clientWidth,markedSpans:e.markedSpans,measure:n,classes:e.textClass+"|"+e.bgClass+"|"+e.wrapClass},16==r.length?r[++t.display.measureLineCachePos%16]=e:r.push(e),n)}function Nt(t){t.display.measureLineCache.length=t.display.measureLineCachePos=0,t.display.cachedCharWidth=t.display.cachedTextHeight=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function Ht(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Dt(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function Wt(t,e,r,n){if(e.widgets)for(var i=0;i<e.widgets.length;++i){var o;e.widgets[i].above&&(o=xr(e.widgets[i]),r.top+=o,r.bottom+=o)}var l;return"line"!=n&&(n=n||"local",l=Xr(t,e),"local"==n?l+=kt(t.display):l-=t.display.viewOffset,"page"!=n&&"window"!=n||(l+=(t=_(t.display.lineSpace)).top+("window"==n?0:Dt()),t=t.left+("window"==n?0:Ht()),r.left+=t,r.right+=t),r.top+=l,r.bottom+=l),r}function Ot(t,e,r){var n;return"div"==r?e:(n=e.left,e=e.top,"page"==r?(n-=Ht(),e-=Dt()):"local"!=r&&r||(n+=(r=_(t.display.sizer)).left,e+=r.top),{left:n-(r=_(t.display.lineSpace)).left,top:e-r.top})}function Et(t,e,r,n,i){return Wt(t,n=n||W(t.doc,e.line),Mt(t,n,e.ch,null,i),r)}function L(r,t,n,i,o){function l(t,e){t=Mt(r,i,t,o,e?"right":"left");return e?t.left=t.right:t.right=t.left,Wt(r,i,t,n)}function e(t,e){var r=a[e],n=r.level%2;return t==In(r)&&e&&r.level<a[e-1].level?(t=Fn(r=a[--e])-(r.level%2?0:1),n=!0):t==Fn(r)&&e<a.length-1&&r.level<a[e+1].level&&(t=In(r=a[++e])-r.level%2,n=!1),n&&t==r.to&&t>r.from?l(t-1):l(t,n)}i=i||W(r.doc,t.line),o=o||At(r,i);var s,a=z(i),t=t.ch;return a?(s=e(t,Bn(a,t)),null!=Dn&&(s.other=e(t,Dn)),s):l(t)}function zt(t,e,r,n){t=new T(t,e);return t.xRel=n,r&&(t.outside=!0),t}function It(t,e,r){var n=t.doc;if((r+=t.display.viewOffset)<0)return zt(n.first,0,!0,-1);var i=Kr(n,r),o=n.first+n.size-1;if(o<i)return zt(n.first+n.size-1,W(n,o).text.length,!0,1);for(e<0&&(e=0);;){var l=W(n,i),s=function(e,r,n,t,i){var o=i-Xr(e,r),l=!1,s=2*e.display.wrapper.clientWidth,a=At(e,r);function c(t){t=L(e,T(n,t),"line",r,a);return l=!0,o>t.bottom?t.left-s:o<t.top?t.left+s:(l=!1,t.left)}var u=z(r),h=r.text.length,f=Pn(r),d=Rn(r),p=c(f),g=l,m=c(d),v=l;if(m<t)return zt(n,d,v,1);for(;;){if(u?d==f||d==Kn(r,f,1):d-f<=1){for(var y=t<p||t-p<=m-t?f:d,b=t-(y==f?p:m);wn.test(r.text.charAt(y));)++y;return zt(n,y,y==f?g:v,b<0?-1:b?1:0)}var x=Math.ceil(h/2),C=f+x;if(u){C=f;for(var w=0;w<x;++w)C=Kn(r,C,1)}b=c(C);t<b?(d=C,m=b,(v=l)&&(m+=1e3),h=x):(f=C,p=b,g=l,h-=x)}}(t,l,i,e,r),l=dr(l),a=l&&l.find();if(!l||!(s.ch>a.from.ch||s.ch==a.from.ch&&0<s.xRel))return s;i=a.to.line}}function Ft(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==i){i=K("pre");for(var e=0;e<49;++e)i.appendChild(document.createTextNode("x")),i.appendChild(K("br"));i.appendChild(document.createTextNode("x"))}X(t.measure,i);var r=i.offsetHeight/50;return 3<r&&(t.cachedTextHeight=r),Ln(t.measure),r||1}function Pt(t){var e,r;return null!=t.cachedCharWidth?t.cachedCharWidth:(e=K("span","x"),r=K("pre",[e]),X(t.measure,r),2<(r=e.offsetWidth)&&(t.cachedCharWidth=r),r||10)}var Rt,Gt,Bt=0;function Vt(t){t.curOp={changes:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++Bt},sn++||(ln=[])}function Kt(t){var e,r,n,i,o=t.curOp,l=t.doc,s=t.display,a=(t.curOp=null,o.updateMaxLine&&ct(t),s.maxLineChanged&&!t.options.lineWrapping&&s.maxLine&&(r=function(t,e){var r=!1;if(e.markedSpans)for(var n=0;n<e.markedSpans;++n){var i=e.markedSpans[n];!i.collapsed||null!=i.to&&i.to!=e.text.length||(r=!0)}var o,l=!r&&Tt(t,e);return l?Mt(t,e,e.text.length,l.measure,"right").right:(o=(l=Ar(t,e)).appendChild(Hn(t.display.measure)),X(t.display.measure,l),_(o).right-_(t.display.lineDiv).left)}(t,s.maxLine),s.sizer.style.minWidth=Math.max(0,r+3+m)+"px",s.maxLineChanged=!1,(r=Math.max(0,s.sizer.offsetLeft+s.sizer.offsetWidth-s.scroller.clientWidth))<l.scrollLeft&&!o.updateScrollPos&&ie(t,Math.min(s.scroller.scrollLeft,r),!0)),o.updateScrollPos?e=o.updateScrollPos:o.selectionChanged&&s.scroller.clientHeight&&(e=Ie(t,(r=L(t,l.sel.head)).left,r.top,r.left,r.bottom)),(o.changes.length||e&&null!=e.scrollTop)&&(n=mt(t,o.changes,e&&e.scrollTop),t.display.scroller.offsetHeight&&(t.doc.scrollTop=t.display.scroller.scrollTop)),!n&&o.selectionChanged&&bt(t),o.updateScrollPos?(s.scroller.scrollTop=s.scrollbarV.scrollTop=l.scrollTop=e.scrollTop,s.scroller.scrollLeft=s.scrollbarH.scrollLeft=l.scrollLeft=e.scrollLeft,dt(t),o.scrollToPos&&ze(t,H(t.doc,o.scrollToPos),o.scrollToPosMargin)):e&&(n=ze(r=t,r.doc.sel.head,r.options.cursorScrollMargin),r.state.focused&&(r=r.display,s=_(r.sizer),l=null,n.top+s.top<0?l=!0:n.bottom+s.top>(window.innerHeight||document.documentElement.clientHeight)&&(l=!1),null==l||Y||((s="none"==r.cursor.style.display)&&(r.cursor.style.display="",r.cursor.style.left=n.left+"px",r.cursor.style.top=n.top-r.viewOffset+"px"),r.cursor.scrollIntoView(l),s&&(r.cursor.style.display="none")))),o.selectionChanged&&xt(t),t.state.focused&&o.updateInput&&$t(t,o.userSelChange),o.maybeHiddenMarkers),c=o.maybeUnhiddenMarkers;if(a)for(var u=0;u<a.length;++u)a[u].lines.length||g(a[u],"hide");if(c)for(u=0;u<c.length;++u)c[u].lines.length&&g(c[u],"unhide");if(--sn||(i=ln,ln=null),o.textChanged&&g(t,"change",t,o.textChanged),o.cursorActivity&&g(t,"cursorActivity",t),i)for(u=0;u<i.length;++u)i[u]()}function C(n,i){return function(){var t=n||this,e=!t.curOp;e&&Vt(t);try{var r=i.apply(t,arguments)}finally{e&&Kt(t)}return r}}function Xt(r){return function(){var t,e=this.cm&&!this.cm.curOp;e&&Vt(this.cm);try{t=r.apply(this,arguments)}finally{e&&Kt(this.cm)}return t}}function _t(t,e){var r,n=!t.curOp;n&&Vt(t);try{r=e()}finally{n&&Kt(t)}return r}function x(t,e,r,n){null==e&&(e=t.doc.first),null==r&&(r=t.doc.first+t.doc.size),t.curOp.changes.push({from:e,to:r,diff:n})}function Ut(t){t.display.pollingFast||t.display.poll.set(t.options.pollInterval,function(){jt(t),t.state.focused&&Ut(t)})}function Yt(e){var r=!1;e.display.pollingFast=!0,e.display.poll.set(20,function t(){jt(e)||r?(e.display.pollingFast=!1,Ut(e)):(r=!0,e.display.poll.set(60,t))})}function jt(t){var e=t.display.input,r=t.display.prevInput,n=t.doc,i=n.sel;if(!t.state.focused||On(e)||Zt(t)||t.state.disableInput)return!1;var o=e.value;if(o==r&&A(i.from,i.to))return!1;if(k&&!S&&t.display.inputHasSelection===o)return $t(t,!0),!1;for(var l=!t.curOp,s=(l&&Vt(t),i.shift=!1,0),a=Math.min(r.length,o.length);s<a&&r.charCodeAt(s)==o.charCodeAt(s);)++s;var c=i.from,i=i.to,n=(s<r.length?c=T(c.line,c.ch-(r.length-s)):t.state.overwrite&&A(c,i)&&!t.state.pasteIncoming&&(i=T(i.line,Math.min(W(n,i.line).text.length,i.ch+(o.length-s)))),t.curOp.updateInput),c={from:c,to:i,text:Wn(o.slice(s)),origin:t.state.pasteIncoming?"paste":"+input"};return we(t.doc,c,"end"),t.curOp.updateInput=n,R(t,"inputRead",t,c),1e3<o.length||-1<o.indexOf("\n")?e.value=t.display.prevInput="":t.display.prevInput=o,l&&Kt(t),!(t.state.pasteIncoming=!1)}function $t(t,e){var r,n,i=t.doc;A(i.sel.from,i.sel.to)?e&&(t.display.prevInput=t.display.input.value="",k&&!S&&(t.display.inputHasSelection=null)):(t.display.prevInput="",e=(n=En&&(100<i.sel.to.line-i.sel.from.line||1e3<(r=t.getSelection()).length))?"-":r||t.getSelection(),t.display.input.value=e,t.state.focused&&gn(t.display.input),k&&!S&&(t.display.inputHasSelection=e)),t.display.inaccurateSelection=n}function M(t){"nocursor"==t.options.readOnly||$&&document.activeElement==t.display.input||t.display.input.focus()}function Zt(t){return t.options.readOnly||t.doc.cantEdit}function qt(t,e){for(var r=nn(e);r!=t.wrapper;r=r.parentNode)if(!r||r.ignoreEvents||r.parentNode==t.sizer&&r!=t.mover)return 1}function Jt(t,e,r){var n=t.display;if(!r){r=nn(e);if(r==n.scrollbarH||r==n.scrollbarH.firstChild||r==n.scrollbarV||r==n.scrollbarV.firstChild||r==n.scrollbarFiller||r==n.gutterFiller)return null}var i,o,r=_(n.lineSpace);try{i=e.clientX,o=e.clientY}catch(e){return null}return It(t,i-r.left,o-r.top)}function Qt(e){if(!G(this,e)){var l=this,s=l.display,a=l.doc,t=a.sel;if(t.shift=e.shiftKey,qt(s,e))w||(s.scroller.draggable=!1,setTimeout(function(){s.scroller.draggable=!0},100));else if(!te(l,e)){var r,c,n,i,u,o,h,f,d,p,g,m,v,y=Jt(l,e);switch(on(e)){case 3:return void(J&&ve.call(l,l,e));case 2:return y&&D(l.doc,y),setTimeout(V(M,l),20),void I(e)}y?(l.state.focused||ge(l),r=+new Date,c="single",Gt&&Gt.time>r-400&&A(Gt.pos,y)?(c="triple",I(e),setTimeout(V(M,l),20),n=l,i=y.line,D(n.doc,T(i,0),H(n.doc,T(i+1,0)))):Rt&&Rt.time>r-400&&A(Rt.pos,y)?(c="double",Gt={time:r,pos:y},I(e),n=Ke(W(a,y.line).text,y),D(l.doc,n.from,n.to)):Rt={time:r,pos:y},u=y,!l.options.dragDrop||!Tn||Zt(l)||A(t.from,t.to)||N(y,t.from)||N(t.to,y)||"single"!=c?(I(e),"single"==c&&D(l.doc,H(a,y)),h=t.from,f=t.to,d=y,p=_(s.wrapper),g=0,m=C(l,function(t){(k||on(t)?b:x)(t)}),v=C(l,x),F(document,"mousemove",m),F(document,"mouseup",v)):(o=C(l,function(t){w&&(s.scroller.draggable=!1),l.state.draggingText=!1,P(document,"mouseup",o),P(s.scroller,"drop",o),Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)<10&&(I(t),D(l.doc,y),M(l))}),w&&(s.scroller.draggable=!0),l.state.draggingText=o,s.scroller.dragDrop&&s.scroller.dragDrop(),F(document,"mouseup",o),F(s.scroller,"drop",o))):nn(e)==s.scroller&&I(e)}}function b(t){var e,r,n,i=++g,o=Jt(l,t,!0);o&&(A(o,u)?(e=t.clientY<p.top?-20:t.clientY>p.bottom?20:0)&&setTimeout(C(l,function(){g==i&&(s.scroller.scrollTop+=e,b(t))}),50):(l.state.focused||ge(l),A(d,r=u=o)||(d=r,"single"==c?D(l.doc,H(a,y),r):(h=H(a,h),f=H(a,f),"double"==c?(n=Ke(W(a,r.line).text,r),N(r,h)?D(l.doc,n.from,f):D(l.doc,h,n.to)):"triple"==c&&(N(r,h)?D(l.doc,f,H(a,T(r.line,0))):D(l.doc,h,H(a,T(r.line+1,0)))))),n=ft(s,a),(o.line>=n.to||o.line<n.from)&&setTimeout(C(l,function(){g==i&&b(t)}),150)))}function x(t){g=1/0,I(t),M(l),P(document,"mousemove",m),P(document,"mouseup",v)}}function te(t,e){var r=t.display;try{var n=e.clientX,i=e.clientY}catch(e){return}if(!(n>=Math.floor(_(r.gutters).right))){if(I(e),cn(t,"gutterClick")){var o=_(r.lineDiv);if(!(i>o.bottom)){i-=o.top-r.viewOffset;for(var l=0;l<t.options.gutters.length;++l){var s=r.gutters.childNodes[l];if(s&&_(s).right>=n){R(t,"gutterClick",t,Kr(t.doc,i),t.options.gutters[l],e);break}}}}return 1}}var ee=0;function re(t){var n=this;if(!(G(n,t)||qt(n.display,t)||n.options.onDragEvent&&n.options.onDragEvent(n,tn(t)))){I(t),k&&(ee=+new Date);var e,r,i=Jt(n,t,!0),o=t.dataTransfer.files;if(i&&!Zt(n))if(o&&o.length&&window.FileReader&&window.File)for(var l=o.length,s=Array(l),a=0,c=0;c<l;++c)!function(t,e){var r=new FileReader;r.onload=function(){s[e]=r.result,++a==l&&(i=H(n.doc,i),we(n.doc,{from:i,to:i,text:Wn(s.join("\n")),origin:"paste"},"around"))},r.readAsText(t)}(o[c],c);else if(!n.state.draggingText||N(i,n.doc.sel.from)||N(n.doc.sel.to,i))try{(s=t.dataTransfer.getData("Text"))&&(e=n.doc.sel.from,r=n.doc.sel.to,We(n.doc,i,i),n.state.draggingText&&Te(n.doc,"",e,r,"paste"),n.replaceSelection(s,null,"paste"),M(n),ge(n))}catch(t){}else n.state.draggingText(t),setTimeout(V(M,n),20)}}function ne(t,e){Math.abs(t.doc.scrollTop-e)<2||(t.doc.scrollTop=e,v||mt(t,[],e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e),t.display.scrollbarV.scrollTop!=e&&(t.display.scrollbarV.scrollTop=e),v&&mt(t,[]),Ct(t,100))}function ie(t,e,r){(r?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)||(e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),t.doc.scrollLeft=e,dt(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbarH.scrollLeft!=e&&(t.display.scrollbarH.scrollLeft=e))}var oe,le=0,u=null;function se(t,e){var r,n,i,o=e.wheelDeltaX,l=e.wheelDeltaY,s=(null==o&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(o=e.detail),null==l&&e.detail&&e.axis==e.VERTICAL_AXIS?l=e.detail:null==l&&(l=e.wheelDelta),t.display),a=s.scroller;if(o&&a.scrollWidth>a.clientWidth||l&&a.scrollHeight>a.clientHeight){if(l&&Z&&w)for(var c=e.target;c!=a;c=c.parentNode)if(c.lineObj){t.display.currentWheelTarget=c;break}!o||v||f||null==u?(l&&null!=u&&(r=l*u,i=(n=t.doc.scrollTop)+s.wrapper.clientHeight,r<0?n=Math.max(0,n+r-50):i=Math.min(t.doc.height,i+r+50),mt(t,[],{top:n,bottom:i})),le<20&&(null==s.wheelStartX?(s.wheelStartX=a.scrollLeft,s.wheelStartY=a.scrollTop,s.wheelDX=o,s.wheelDY=l,setTimeout(function(){var t,e;null!=s.wheelStartX&&(t=a.scrollLeft-s.wheelStartX,e=(e=a.scrollTop-s.wheelStartY)&&s.wheelDY&&e/s.wheelDY||t&&s.wheelDX&&t/s.wheelDX,s.wheelStartX=s.wheelStartY=null,e&&(u=(u*le+e)/(le+1),++le))},200)):(s.wheelDX+=o,s.wheelDY+=l))):(l&&ne(t,Math.max(0,Math.min(a.scrollTop+l*u,a.scrollHeight-a.clientHeight))),ie(t,Math.max(0,Math.min(a.scrollLeft+o*u,a.scrollWidth-a.clientWidth))),I(e),s.wheelStartX=null)}}function ae(t,e,r){if("string"==typeof e&&!(e=Qe[e]))return!1;t.display.pollingFast&&jt(t)&&(t.display.pollingFast=!1);var n=t.doc,i=n.sel.shift,o=!1;try{Zt(t)&&(t.state.suppressEdits=!0),r&&(n.sel.shift=!1),o=e(t)!=un}finally{n.sel.shift=i,t.state.suppressEdits=!1}return o}function ce(t){var e=t.state.keyMaps.slice(0);return t.options.extraKeys&&e.push(t.options.extraKeys),e.push(t.options.keyMap),e}function ue(e,t){var r,n=tr(e.options.keyMap),i=n.auto,o=(clearTimeout(oe),i&&!rr(t)&&(oe=setTimeout(function(){tr(e.options.keyMap)==n&&(e.options.keyMap=i.call?i.call(null,e):i,it(e))},50)),nr(t,!0)),l=!1;return!!o&&(r=ce(e),(l=t.shiftKey?er("Shift-"+o,r,function(t){return ae(e,t,!0)})||er(o,r,function(t){return!("string"==typeof t?!/^go[A-Z]/.test(t):!t.motion)&&ae(e,t)}):er(o,r,function(t){return ae(e,t)}))&&(I(t),xt(e),S&&(t.oldKeyCode=t.keyCode,t.keyCode=0),R(e,"keyHandled",e,o,t)),l)}k?u=-.53:v?u=15:o?u=-.7:y&&(u=-1/3);var he,fe=null;function de(t){var e,r,n=this;n.state.focused||ge(n),k&&27==t.keyCode&&(t.returnValue=!1),G(n,t)||n.options.onKeyEvent&&n.options.onKeyEvent(n,tn(t))||(e=t.keyCode,n.doc.sel.shift=16==e||t.shiftKey,r=ue(n,t),f&&(fe=r?e:null,!r&&88==e&&!En&&(Z?t.metaKey:t.ctrlKey)&&n.replaceSelection("")))}function pe(t){var e,r,n,i=this;G(i,t)||i.options.onKeyEvent&&i.options.onKeyEvent(i,tn(t))||(n=t.keyCode,r=t.charCode,f&&n==fe?(fe=null,I(t)):(f&&(!t.which||t.which<10)||b)&&ue(i,t)||(n=String.fromCharCode(null==r?n:r),this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!Zt(this)&&-1<this.doc.mode.electricChars.indexOf(n)&&setTimeout(C(i,function(){Re(i,i.doc.sel.to.line,"smart")}),75),r=t,(n=er("'"+(t=n)+"'",ce(e=i),function(t){return ae(e,t,!0)}))&&(I(r),xt(e),R(e,"keyHandled",e,"'"+t+"'",r)),n||(k&&!S&&(i.display.inputHasSelection=null),Yt(i))))}function ge(t){"nocursor"!=t.options.readOnly&&(t.state.focused||(g(t,"focus",t),t.state.focused=!0,-1==t.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(t.display.wrapper.className+=" CodeMirror-focused"),$t(t,!0)),Ut(t),xt(t))}function me(t){t.state.focused&&(g(t,"blur",t),t.state.focused=!1,t.display.wrapper.className=t.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.doc.sel.shift=!1)},150)}function ve(r,t){var e,n,i,o,l=r.display,s=r.doc.sel;function a(){var t;null!=l.input.selectionStart&&(t=l.input.value=" "+(A(s.from,s.to)?"":l.input.value),l.prevInput=" ",l.input.selectionStart=1,l.input.selectionEnd=t.length)}function c(){var t,e;l.inputDiv.style.position="relative",l.input.style.cssText=i,S&&(l.scrollbarV.scrollTop=l.scroller.scrollTop=n),Ut(r),null!=l.input.selectionStart&&(k&&!S||a(),clearTimeout(he),t=0,e=function(){" "==l.prevInput&&0==l.input.selectionStart?C(r,Qe.selectAll)(r):t++<10?he=setTimeout(e,500):$t(r)},he=setTimeout(e,200))}qt(l,t)||(e=Jt(r,t),n=l.scroller.scrollTop,e&&!f&&(!A(s.from,s.to)&&!N(e,s.from)&&N(e,s.to)||C(r,We)(r.doc,e,e),i=l.input.style.cssText,l.inputDiv.style.position="absolute",l.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(t.clientY-5)+"px; left: "+(t.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",M(r),$t(r,!0),A(s.from,s.to)&&(l.input.value=l.prevInput=" "),k&&!S&&a(),J?(rn(t),o=function(){P(window,"mouseup",o),setTimeout(c,20)},F(window,"mouseup",o)):setTimeout(c,50)))}var ye=d.changeEnd=function(t){return t.text?T(t.from.line+t.text.length-1,B(t.text).length+(1==t.text.length?t.from.ch:0)):t.to};function be(t,e,r){var n,i,o;return N(e.from,r)?(n=e.text.length-1-(e.to.line-e.from.line),r.line>e.to.line+n?(i=r.line-n,(o=t.first+t.size-1)<i?T(o,W(t,o).text.length):He(r,W(t,i).text.length)):r.line==e.to.line+n?He(r,B(e.text).length+(1==e.text.length?e.from.ch:0)+W(t,e.to.line).text.length-e.to.ch):(o=r.line-e.from.line,He(r,e.text[o].length+(o?0:e.from.ch)))):H(t,r)}function xe(t,n,e){var i;return e&&"object"==typeof e?{anchor:be(t,n,e.anchor),head:be(t,n,e.head)}:"start"==e?{anchor:n.from,head:n.from}:(i=ye(n),"around"==e?{anchor:n.from,head:i}:"end"==e?{anchor:i,head:i}:{anchor:(e=function(t){var e,r;return N(t,n.from)?t:N(n.to,t)?(e=t.line+n.text.length-(n.to.line-n.from.line)-1,r=t.ch,t.line==n.to.line&&(r+=i.ch-n.to.ch),T(e,r)):i})(t.sel.anchor),head:e(t.sel.head)})}function Ce(i,t,e){t={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return e&&(t.update=function(t,e,r,n){t&&(this.from=H(i,t)),e&&(this.to=H(i,e)),r&&(this.text=r),void 0!==n&&(this.origin=n)}),g(i,"beforeChange",i,t),i.cm&&g(i.cm,"beforeChange",i.cm,t),t.canceled?null:{from:t.from,to:t.to,text:t.text,origin:t.origin}}function we(t,e,r,n){if(t.cm){if(!t.cm.curOp)return C(t.cm,we)(t,e,r,n);if(t.cm.state.suppressEdits)return}if(!(cn(t,"beforeChange")||t.cm&&cn(t.cm,"beforeChange"))||(e=Ce(t,e,!0))){var i=Q&&!n&&function(t,e,r){var n=null;if(t.iter(e.line,r.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var r=t.markedSpans[e].marker;!r.readOnly||n&&-1!=h(n,r)||(n=n||[]).push(r)}}),!n)return null;for(var i=[{from:e,to:r}],o=0;o<n.length;++o)for(var l=n[o],s=l.find(),a=0;a<i.length;++a){var c,u=i[a];N(u.to,s.from)||N(s.to,u.from)||(c=[a,1],(N(u.from,s.from)||!l.inclusiveLeft&&A(u.from,s.from))&&c.push({from:u.from,to:s.from}),(N(s.to,u.to)||!l.inclusiveRight&&A(u.to,s.to))&&c.push({from:s.to,to:u.to}),i.splice.apply(i,c),a+=c.length-1)}return i}(t,e.from,e.to);if(i){for(var o=i.length-1;1<=o;--o)Le(t,{from:i[o].from,to:i[o].to,text:[""]});i.length&&Le(t,{from:i[0].from,to:i[0].to,text:e.text},r)}else Le(t,e,r)}}function Le(t,r,e){var e=xe(t,r,e),n=(jr(t,r,e,t.cm?t.cm.curOp.id:NaN),Me(t,r,e,cr(t,r)),[]);Rr(t,function(t,e){e||-1!=h(n,t.history)||(Jr(t.history,r),n.push(t.history)),Me(t,r,null,cr(t,r))})}function ke(t,e){if(!t.cm||!t.cm.state.suppressEdits){var r=t.history,n=("undo"==e?r.done:r.undone).pop();if(n)for(var i={changes:[],anchorBefore:n.anchorAfter,headBefore:n.headAfter,anchorAfter:n.anchorBefore,headAfter:n.headBefore,generation:r.generation},o=(("undo"==e?r.undone:r.done).push(i),r.generation=n.generation||++r.maxGeneration,cn(t,"beforeChange")||t.cm&&cn(t.cm,"beforeChange")),l=n.changes.length-1;0<=l;--l){var s=n.changes[l];if(s.origin=e,o&&!Ce(t,s,!1))return void(("undo"==e?r.done:r.undone).length=0);i.changes.push(Yr(t,s));var a=l?xe(t,s,null):{anchor:n.anchorBefore,head:n.headBefore},c=(Me(t,s,a,ur(t,s)),[]);Rr(t,function(t,e){e||-1!=h(c,t.history)||(Jr(t.history,s),c.push(t.history)),Me(t,s,null,ur(t,s))})}}}function Se(t,e){function r(t){return T(t.line+e,t.ch)}t.first+=e,t.cm&&x(t.cm,t.first,t.first,e),t.sel.head=r(t.sel.head),t.sel.anchor=r(t.sel.anchor),t.sel.from=r(t.sel.from),t.sel.to=r(t.sel.to)}function Me(t,e,r,n){if(t.cm&&!t.cm.curOp)return C(t.cm,Me)(t,e,r,n);if(e.to.line<t.first)Se(t,e.text.length-1-(e.to.line-e.from.line));else if(!(e.from.line>t.lastLine())){e.from.line<t.first&&(Se(t,i=e.text.length-1-(t.first-e.from.line)),e={from:T(t.first,0),to:T(e.to.line+i,e.to.ch),text:[B(e.text)],origin:e.origin});var i=t.lastLine();if((e=e.to.line>i?{from:e.from,to:T(i,W(t,i).text.length),text:[e.text[0]],origin:e.origin}:e).removed=Br(t,e.from,e.to),r=r||xe(t,e,null),t.cm){var i=t.cm,o=e,l=n,s=r,a=i.doc,c=i.display,u=o.from,h=o.to,f=!1,d=u.line;if(i.options.lineWrapping||(d=E(pr(a,W(a,u.line))),a.iter(d,h.line+1,function(t){if(t==c.maxLine)return f=!0})),N(a.sel.head,o.from)||N(o.to,a.sel.head)||(i.curOp.cursorActivity=!0),Or(a,o,l,s,rt(i)),i.options.lineWrapping||(a.iter(d,u.line+o.text.length,function(t){var e=at(a,t);e>c.maxLineLength&&(c.maxLine=t,c.maxLineLength=e,c.maxLineChanged=!0,f=!1)}),f&&(i.curOp.updateMaxLine=!0)),a.frontier=Math.min(a.frontier,u.line),Ct(i,400),l=o.text.length-(h.line-u.line)-1,x(i,u.line,h.line+1,l),cn(i,"change")){s={from:u,to:h,text:o.text,removed:o.removed,origin:o.origin};if(i.curOp.textChanged){for(var p=i.curOp.textChanged;p.next;p=p.next);p.next=s}else i.curOp.textChanged=s}}else Or(t,e,n,r)}}function Te(t,e,r,n,i){var o;N(n=n||r,r)&&(o=n,n=r,r=o),we(t,{from:r,to:n,text:e="string"==typeof e?Wn(e):e,origin:i},null)}function T(t,e){if(!(this instanceof T))return new T(t,e);this.line=t,this.ch=e}function A(t,e){return t.line==e.line&&t.ch==e.ch}function N(t,e){return t.line<e.line||t.line==e.line&&t.ch<e.ch}function Ae(t){return T(t.line,t.ch)}function Ne(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function H(t,e){var r;return e.line<t.first?T(t.first,0):(r=t.first+t.size-1,e.line>r?T(r,W(t,r).text.length):He(e,W(t,e.line).text.length))}function He(t,e){var r=t.ch;return null==r||e<r?T(t.line,e):r<0?T(t.line,0):t}function De(t,e){return e>=t.first&&e<t.first+t.size}function D(t,e,r,n){var i,o;t.sel.shift||t.sel.extend?(i=t.sel.anchor,r&&((o=N(e,i))!=N(r,i)?(i=e,e=r):o!=N(e,r)&&(e=r)),We(t,i,e,n)):We(t,e,r||e,n),t.cm&&(t.cm.curOp.userSelChange=!0)}function We(t,e,r,n,i){(!i&&cn(t,"beforeSelectionChange")||t.cm&&cn(t.cm,"beforeSelectionChange"))&&(g(o=t,"beforeSelectionChange",o,l={anchor:l=e,head:r}),o.cm&&g(o.cm,"beforeSelectionChange",o.cm,l),l.anchor=H(o,l.anchor),l.head=H(o,l.head),r=(o=l).head,e=o.anchor);var o,l=t.sel;l.goalColumn=null,!i&&A(e,l.anchor)||(e=Ee(t,e,n,"push"!=i)),!i&&A(r,l.head)||(r=Ee(t,r,n,"push"!=i)),A(l.anchor,e)&&A(l.head,r)||(l.anchor=e,o=N(l.head=r,e),l.from=o?r:e,l.to=o?e:r,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=t.cm.curOp.cursorActivity=!0),R(t,"cursorActivity",t))}function Oe(t){We(t.doc,t.doc.sel.from,t.doc.sel.to,null,"push")}function Ee(t,e,r,n){var i=!1,o=e,l=r||1;t.cantEdit=!1;t:for(;;){var s=W(t,o.line);if(s.markedSpans)for(var a=0;a<s.markedSpans.length;++a){var c=s.markedSpans[a],u=c.marker;if((null==c.from||(u.inclusiveLeft?c.from<=o.ch:c.from<o.ch))&&(null==c.to||(u.inclusiveRight?c.to>=o.ch:c.to>o.ch))){if(n&&(g(u,"beforeCursorEnter"),u.explicitlyCleared)){if(s.markedSpans){--a;continue}break}if(u.atomic){c=u.find()[l<0?"from":"to"];if(A(c,o)&&(c.ch+=l,c.ch<0?c=c.line>t.first?H(t,T(c.line-1)):null:c.ch>s.text.length&&(c=c.line<t.first+t.size-1?T(c.line+1,0):null),!c)){if(i)return n?(t.cantEdit=!0,T(t.first,0)):Ee(t,e,r,!0);i=!0,c=e,l=-l}o=c;continue t}}}return o}}function ze(t,e,r){for(null==r&&(r=0);;){var n=!1,i=L(t,e),o=Ie(t,i.left,i.top-r,i.left,i.bottom+r),l=t.doc.scrollTop,s=t.doc.scrollLeft;if(null!=o.scrollTop&&(ne(t,o.scrollTop),1<Math.abs(t.doc.scrollTop-l)&&(n=!0)),null!=o.scrollLeft&&(ie(t,o.scrollLeft),1<Math.abs(t.doc.scrollLeft-s)&&(n=!0)),!n)return i}}function Ie(t,e,r,n,i){var o=t.display,l=Ft(t.display),s=o.scroller.clientHeight-m,a=o.scroller.scrollTop,c={},t=t.doc.height+St(o),u=t-l<i,r=((r=r<0?0:r)<a?c.scrollTop=r<l?0:r:a+s<i&&((l=Math.min(r,(u?t:i)-s))!=a&&(c.scrollTop=l)),o.scroller.clientWidth-m),u=o.scroller.scrollLeft,t=(e+=o.gutters.offsetWidth,n+=o.gutters.offsetWidth,o.gutters.offsetWidth),i=e<t+10;return e<u+t||i?(i&&(e=0),c.scrollLeft=Math.max(0,e-10-t)):r+u-3<n&&(c.scrollLeft=n+10-r),c}function Fe(t,e,r){t.curOp.updateScrollPos={scrollLeft:null==e?t.doc.scrollLeft:e,scrollTop:null==r?t.doc.scrollTop:r}}function Pe(t,e,r){var n=t.curOp.updateScrollPos||(t.curOp.updateScrollPos={scrollLeft:t.doc.scrollLeft,scrollTop:t.doc.scrollTop}),t=t.display.scroller;n.scrollTop=Math.max(0,Math.min(t.scrollHeight-t.clientHeight,n.scrollTop+r)),n.scrollLeft=Math.max(0,Math.min(t.scrollWidth-t.clientWidth,n.scrollLeft+e))}function Re(t,e,r,n){var i,o=t.doc,l=("smart"==(r=null==r?"add":r)&&(t.doc.mode.indent?i=Lt(t,e):r="prev"),t.options.tabSize),s=W(o,e),a=fn(s.text,null,l),c=s.text.match(/^\s*/)[0];if("smart"==r&&(u=t.doc.mode.indent(i,s.text.slice(c.length),s.text))==un){if(!n)return;r="prev"}"prev"==r?u=e>o.first?fn(W(o,e-1).text,null,l):0:"add"==r?u=a+t.options.indentUnit:"subtract"==r?u=a-t.options.indentUnit:"number"==typeof r&&(u=a+r);var u=Math.max(0,u),h="",f=0;if(t.options.indentWithTabs)for(var d=Math.floor(u/l);d;--d)f+=l,h+="\t";f<u&&(h+=pn(u-f)),h!=c&&Te(t.doc,h,T(e,0),T(e,c.length),"+input"),s.stateAfter=null}function Ge(t,e,r){var n=e,i=e,o=t.doc;return"number"==typeof e?i=W(o,Ne(o,e)):n=E(e),null!=n&&r(i,n)?(x(t,n,n+1),i):null}function Be(r,t,n,e,i){var o=t.line,l=t.ch,t=n,s=W(r,o),a=!0;function c(t){var e=(i?Kn:Xn)(s,l,n,!0);if(null==e){if(t||!((t=o+n)<r.first||t>=r.first+r.size?a=!1:s=W(r,o=t)))return a=!1;l=i?(n<0?Rn:Pn)(s):n<0?s.text.length:0}else l=e;return 1}if("char"==e)c();else if("column"==e)c(!0);else if("word"==e||"group"==e)for(var u=null,h="group"==e,f=!0;!(n<0)||c(!f);f=!1){var d=s.text.charAt(l)||"\n",d=xn(d)?"w":!h||/\s/.test(d)?null:"p";if(u&&u!=d){n<0&&(n=1,c());break}if(d&&(u=d),0<n&&!c(!f))break}e=Ee(r,T(o,l),t,!0);return a||(e.hitSide=!0),e}function Ve(t,e,r,n){var i,o,l=t.doc,s=e.left;for("page"==n?(i=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),o=e.top+r*(i-(r<0?1.5:.5)*Ft(t.display))):"line"==n&&(o=0<r?e.bottom+3:e.top-3);;){var a=It(t,s,o);if(!a.outside)break;if(r<0?o<=0:o>=l.height){a.hitSide=!0;break}o+=5*r}return a}function Ke(t,e){var r=e.ch,n=e.ch;if(t){e.xRel<0||n==t.length?--r:++n;for(var i=t.charAt(r),o=xn(i)?xn:/\s/.test(i)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!xn(t)};0<r&&o(t.charAt(r-1));)--r;for(;n<t.length&&o(t.charAt(n));)++n}return{from:T(e.line,r),to:T(e.line,n)}}d.Pos=T,d.prototype={constructor:d,focus:function(){window.focus(),M(this),ge(this),Yt(this)},setOption:function(t,e){var r=this.options,n=r[t];r[t]==e&&"mode"!=t||(r[t]=e,Xe.hasOwnProperty(t)&&C(this,Xe[t])(this,e,n))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](t)},removeKeyMap:function(t){for(var e=this.state.keyMaps,r=0;r<e.length;++r)if(("string"==typeof t?e[r].name:e[r])==t)return e.splice(r,1),!0},addOverlay:C(null,function(t,e){var r=t.token?t:d.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:r,modeSpec:t,opaque:e&&e.opaque}),this.state.modeGen++,x(this)}),removeOverlay:C(null,function(t){for(var e=this.state.overlays,r=0;r<e.length;++r){var n=e[r].modeSpec;if(n==t||"string"==typeof t&&n.name==t)return e.splice(r,1),this.state.modeGen++,void x(this)}}),indentLine:C(null,function(t,e,r){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),De(this.doc,t)&&Re(this,t,e,r)}),indentSelection:C(null,function(t){var e=this.doc.sel;if(A(e.from,e.to))return Re(this,e.from.line,t);for(var r=e.to.line-(e.to.ch?0:1),n=e.from.line;n<=r;++n)Re(this,n,t)}),getTokenAt:function(t,e){for(var r=this.doc,n=Lt(this,(t=H(r,t)).line,e),i=this.doc.mode,o=new ir(W(r,t.line).text,this.options.tabSize);o.pos<t.ch&&!o.eol();){o.start=o.pos;var l=i.token(o,n)}return{start:o.start,end:o.pos,string:o.current(),className:l||null,type:l||null,state:n}},getTokenTypeAt:function(t){t=H(this.doc,t);for(var e=kr(this,W(this.doc,t.line)),r=0,n=(e.length-1)/2,i=t.ch;;){var o=r+n>>1;if((o?e[2*o-1]:0)>=i)n=o;else{if(!(e[2*o+1]<i))return e[2*o+2];r=1+o}}},getStateAfter:function(t,e){var r=this.doc;return Lt(this,(t=Ne(r,null==t?r.first+r.size-1:t))+1,e)},cursorCoords:function(t,e){var r=this.doc.sel,t=null==t?r.head:"object"==typeof t?H(this.doc,t):t?r.from:r.to;return L(this,t,e||"page")},charCoords:function(t,e){return Et(this,H(this.doc,t),e||"page")},coordsChar:function(t,e){return It(this,(t=Ot(this,t,e||"page")).left,t.top)},lineAtHeight:function(t,e){return t=Ot(this,{top:t,left:0},e||"page").top,Kr(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e){var r=!1,n=this.doc.first+this.doc.size-1,n=(t<this.doc.first?t=this.doc.first:n<t&&(t=n,r=!0),W(this.doc,t));return Wt(this,W(this.doc,t),{top:0,left:0},e||"page").top+(r?n.height:0)},defaultTextHeight:function(){return Ft(this.display)},defaultCharWidth:function(){return Pt(this.display)},setGutterMarker:C(null,function(t,r,n){return Ge(this,t,function(t){var e=t.gutterMarkers||(t.gutterMarkers={});return!(e[r]=n)&&Cn(e)&&(t.gutterMarkers=null),1})}),clearGutter:C(null,function(e){var r=this,t=r.doc,n=t.first;t.iter(function(t){t.gutterMarkers&&t.gutterMarkers[e]&&(t.gutterMarkers[e]=null,x(r,n,n+1),Cn(t.gutterMarkers)&&(t.gutterMarkers=null)),++n})}),addLineClass:C(null,function(t,r,n){return Ge(this,t,function(t){var e="text"==r?"textClass":"background"==r?"bgClass":"wrapClass";if(t[e]){if(new RegExp("(?:^|\\s)"+n+"(?:$|\\s)").test(t[e]))return;t[e]+=" "+n}else t[e]=n;return 1})}),removeLineClass:C(null,function(t,o,l){return Ge(this,t,function(t){var e="text"==o?"textClass":"background"==o?"bgClass":"wrapClass",r=t[e];if(r){if(null==l)t[e]=null;else{var n=r.match(new RegExp("(?:^|\\s+)"+l+"(?:$|\\s+)"));if(!n)return;var i=n.index+n[0].length;t[e]=r.slice(0,n.index)+(n.index&&i!=r.length?" ":"")+r.slice(i)||null}return 1}})}),addLineWidget:C(null,function(t,e,r){var n=this,i=new yr(n,e,r);return i.noHScroll&&(n.display.alignWidgets=!0),Ge(n,t,function(t){var e;return(t.widgets||(t.widgets=[])).push(i),i.line=t,gr(n.doc,t)&&!i.showIfHidden||(e=Xr(n,t)<n.display.scroller.scrollTop,O(t,t.height+xr(i)),e&&Pe(n,0,i.height)),1}),i}),removeLineWidget:function(t){t.clear()},lineInfo:function(t){if("number"==typeof t){if(!De(this.doc,t))return null;var e=t;if(!(t=W(this.doc,t)))return null}else if(null==(e=E(t)))return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(t,e,r,n,i){var o,l,s=this.display,a=(t=L(this,H(this.doc,t))).bottom,c=t.left;e.style.position="absolute",s.sizer.appendChild(e),"over"==n?a=t.top:"above"!=n&&"near"!=n||(o=Math.max(s.wrapper.clientHeight,this.doc.height),l=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth),("above"==n||t.bottom+e.offsetHeight>o)&&t.top>e.offsetHeight?a=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=o&&(a=t.bottom),c+e.offsetWidth>l&&(c=l-e.offsetWidth)),e.style.top=a+"px",e.style.left=e.style.right="","right"==i?(c=s.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==i?c=0:"middle"==i&&(c=(s.sizer.clientWidth-e.offsetWidth)/2),e.style.left=c+"px"),r&&(n=this,o=a,l=(t=c)+e.offsetWidth,i=a+e.offsetHeight,null!=(t=Ie(n,t,o,l,i)).scrollTop&&ne(n,t.scrollTop),null!=t.scrollLeft&&ie(n,t.scrollLeft))},triggerOnKeyDown:C(null,de),execCommand:function(t){return Qe[t](this)},findPosH:function(t,e,r,n){var i=1;e<0&&(i=-1,e=-e);for(var o=0,l=H(this.doc,t);o<e&&!(l=Be(this.doc,l,i,r,n)).hitSide;++o);return l},moveH:C(null,function(t,e){var r=this.doc.sel,e=r.shift||r.extend||A(r.from,r.to)?Be(this.doc,r.head,t,e,this.options.rtlMoveVisually):t<0?r.from:r.to;D(this.doc,e,e,t)}),deleteH:C(null,function(t,e){var r=this.doc.sel;A(r.from,r.to)?Te(this.doc,"",r.from,Be(this.doc,r.head,t,e,!1),"+delete"):Te(this.doc,"",r.from,r.to,"+delete"),this.curOp.userSelChange=!0}),findPosV:function(t,e,r,n){var i=1,o=n;e<0&&(i=-1,e=-e);for(var l=0,s=H(this.doc,t);l<e;++l){var a=L(this,s,"div");if(null==o?o=a.left:a.left=o,(s=Ve(this,a,i,r)).hitSide)break}return s},moveV:C(null,function(t,e){var r=this.doc.sel,n=L(this,r.head,"div"),i=(null!=r.goalColumn&&(n.left=r.goalColumn),Ve(this,n,t,e));"page"==e&&Pe(this,0,Et(this,i,"div").top-n.top),D(this.doc,i,i,t),r.goalColumn=n.left}),toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite",""))},hasFocus:function(){return this.state.focused},scrollTo:C(null,function(t,e){Fe(this,t,e)}),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-m,width:t.scrollWidth-m,clientHeight:t.clientHeight-m,clientWidth:t.clientWidth-m}},scrollIntoView:C(null,function(t,e){e=e||0;var r=t="number"==typeof t?T(t,0):t,t=(t&&null==t.line||(this.curOp.scrollToPos=t?H(this.doc,t):this.doc.sel.head,this.curOp.scrollToPosMargin=e,r=L(this,this.curOp.scrollToPos)),Ie(this,r.left,r.top-e,r.right,r.bottom+e));Fe(this,t.scrollLeft,t.scrollTop)}),setSize:function(t,e){function r(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t}null!=t&&(this.display.wrapper.style.width=r(t)),null!=e&&(this.display.wrapper.style.height=r(e)),this.refresh()},on:function(t,e){F(this,t,e)},off:function(t,e){P(this,t,e)},operation:function(t){return _t(this,t)},refresh:C(null,function(){Nt(this),Fe(this,this.doc.scrollLeft,this.doc.scrollTop),x(this)}),swapDoc:C(null,function(t){var e=this.doc;return e.cm=null,Gr(this,t),Nt(this),$t(this,!0),Fe(this,t.scrollLeft,t.scrollTop),e}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};var Xe=d.optionHandlers={},_e=d.defaults={};function t(t,e,n,r){d.defaults[t]=e,n&&(Xe[t]=r?function(t,e,r){r!=Ue&&n(t,e,r)}:n)}var Ue=d.Init={toString:function(){return"CodeMirror.Init"}},Ye=(t("value","",function(t,e){t.setValue(e)},!0),t("mode",null,function(t,e){t.doc.modeOption=e,et(t)},!0),t("indentUnit",2,et,!0),t("indentWithTabs",!1),t("smartIndent",!0),t("tabSize",4,function(t){et(t),Nt(t),x(t)},!0),t("electricChars",!0),t("rtlMoveVisually",!a),t("theme","default",function(t){ot(t),lt(t)},!0),t("keyMap","default",it),t("extraKeys",null),t("onKeyEvent",null),t("onDragEvent",null),t("lineWrapping",!1,function(t){t.options.lineWrapping?(t.display.wrapper.className+=" CodeMirror-wrap",t.display.sizer.style.minWidth=""):(t.display.wrapper.className=t.display.wrapper.className.replace(" CodeMirror-wrap",""),ct(t)),nt(t),x(t),Nt(t),setTimeout(function(){ht(t)},100)},!0),t("gutters",[],function(t){ut(t.options),lt(t)},!0),t("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?gt(t.display)+"px":"0",t.refresh()},!0),t("coverGutterNextToScrollbar",!1,ht,!0),t("lineNumbers",!1,function(t){ut(t.options),lt(t)},!0),t("firstLineNumber",1,lt,!0),t("lineNumberFormatter",function(t){return t},lt,!0),t("showCursorWhenSelecting",!1,bt,!0),t("readOnly",!1,function(t,e){"nocursor"==e?(me(t),t.display.input.blur()):e||$t(t,!0)}),t("dragDrop",!0),t("cursorBlinkRate",530),t("cursorScrollMargin",0),t("cursorHeight",1),t("workTime",100),t("workDelay",100),t("flattenSpans",!0),t("pollInterval",100),t("undoDepth",40,function(t,e){t.doc.history.undoDepth=e}),t("historyEventDelay",500),t("viewportMargin",10,function(t){t.refresh()},!0),t("maxHighlightLength",1e4,function(t){et(t),t.refresh()},!0),t("moveInputWithCursor",!0,function(t,e){e||(t.display.inputDiv.style.top=t.display.inputDiv.style.left=0)}),t("tabindex",null,function(t,e){t.display.input.tabIndex=e||""}),t("autofocus",null),d.modes={}),je=d.mimeModes={},$e=(d.defineMode=function(t,e){if(d.defaults.mode||"null"==t||(d.defaults.mode=t),2<arguments.length){e.dependencies=[];for(var r=2;r<arguments.length;++r)e.dependencies.push(arguments[r])}Ye[t]=e},d.defineMIME=function(t,e){je[t]=e},d.resolveMode=function(t){if("string"==typeof t&&je.hasOwnProperty(t))t=je[t];else if(t&&"string"==typeof t.name&&je.hasOwnProperty(t.name)){var e=je[t.name];(t=mn(e,t)).name=e.name}else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return d.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},d.getMode=function(t,e){e=d.resolveMode(e);var r=Ye[e.name];if(!r)return d.getMode(t,"text/plain");var n=r(t,e);if($e.hasOwnProperty(e.name)){var i,o=$e[e.name];for(i in o)o.hasOwnProperty(i)&&(n.hasOwnProperty(i)&&(n["_"+i]=n[i]),n[i]=o[i])}return n.name=e.name,n},d.defineMode("null",function(){return{token:function(t){t.skipToEnd()}}}),d.defineMIME("text/plain","null"),d.modeExtensions={}),Ze=(d.extendMode=function(t,e){vn(e,$e.hasOwnProperty(t)?$e[t]:$e[t]={})},d.defineExtension=function(t,e){d.prototype[t]=e},d.defineDocExtension=function(t,e){p.prototype[t]=e},d.defineOption=t,[]);function qe(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var r,n={};for(r in e){var i=e[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function Je(t,e,r){return!t.startState||t.startState(e,r)}d.defineInitHook=function(t){Ze.push(t)},d.copyState=qe,d.startState=Je,d.innerMode=function(t,e){for(;t.innerMode;){var r=t.innerMode(e);e=r.state,t=r.mode}return r||{mode:t,state:e}};var Qe=d.commands={selectAll:function(t){t.setSelection(T(t.firstLine(),0),T(t.lastLine()))},killLine:function(t){var e=t.getCursor(!0),r=t.getCursor(!1),n=!A(e,r);n||t.getLine(e.line).length!=e.ch?t.replaceRange("",e,n?r:T(e.line),"+delete"):t.replaceRange("",e,T(e.line+1,0),"+delete")},deleteLine:function(t){var e=t.getCursor().line;t.replaceRange("",T(e,0),T(e),"+delete")},delLineLeft:function(t){var e=t.getCursor();t.replaceRange("",T(e.line,0),e,"+delete")},undo:function(t){t.undo()},redo:function(t){t.redo()},goDocStart:function(t){t.extendSelection(T(t.firstLine(),0))},goDocEnd:function(t){t.extendSelection(T(t.lastLine()))},goLineStart:function(t){t.extendSelection(Gn(t,t.getCursor().line))},goLineStartSmart:function(t){var e=t.getCursor(),r=Gn(t,e.line),n=t.getLineHandle(r.line),i=z(n);i&&0!=i[0].level?t.extendSelection(r):(i=Math.max(0,n.text.search(/\S/)),n=e.line==r.line&&e.ch<=i&&e.ch,t.extendSelection(T(r.line,n?0:i)))},goLineEnd:function(t){t.extendSelection(function(t,e){var r,n;for(;r=dr(n=W(t.doc,e));)e=r.find().to.line;var i=z(n),i=i?(i[0].level%2?Pn:Rn)(n):n.text.length;return T(e,i)}(t,t.getCursor().line))},goLineRight:function(t){var e=t.charCoords(t.getCursor(),"div").top+5;t.extendSelection(t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:e},"div"))},goLineLeft:function(t){var e=t.charCoords(t.getCursor(),"div").top+5;t.extendSelection(t.coordsChar({left:0,top:e},"div"))},goLineUp:function(t){t.moveV(-1,"line")},goLineDown:function(t){t.moveV(1,"line")},goPageUp:function(t){t.moveV(-1,"page")},goPageDown:function(t){t.moveV(1,"page")},goCharLeft:function(t){t.moveH(-1,"char")},goCharRight:function(t){t.moveH(1,"char")},goColumnLeft:function(t){t.moveH(-1,"column")},goColumnRight:function(t){t.moveH(1,"column")},goWordLeft:function(t){t.moveH(-1,"word")},goGroupRight:function(t){t.moveH(1,"group")},goGroupLeft:function(t){t.moveH(-1,"group")},goWordRight:function(t){t.moveH(1,"word")},delCharBefore:function(t){t.deleteH(-1,"char")},delCharAfter:function(t){t.deleteH(1,"char")},delWordBefore:function(t){t.deleteH(-1,"word")},delWordAfter:function(t){t.deleteH(1,"word")},delGroupBefore:function(t){t.deleteH(-1,"group")},delGroupAfter:function(t){t.deleteH(1,"group")},indentAuto:function(t){t.indentSelection("smart")},indentMore:function(t){t.indentSelection("add")},indentLess:function(t){t.indentSelection("subtract")},insertTab:function(t){t.replaceSelection("\t","end","+input")},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.replaceSelection("\t","end","+input")},transposeChars:function(t){var e=t.getCursor(),r=t.getLine(e.line);0<e.ch&&e.ch<r.length-1&&t.replaceRange(r.charAt(e.ch)+r.charAt(e.ch-1),T(e.line,e.ch-1),T(e.line,e.ch+1))},newlineAndIndent:function(t){C(t,function(){t.replaceSelection("\n","end","+input"),t.indentLine(t.getCursor().line,null,!0)})()},toggleOverwrite:function(t){t.toggleOverwrite()}},n=d.keyMap={};function tr(t){return"string"==typeof t?n[t]:t}function er(s,t,a){for(var e=0;e<t.length;++e){var r=function t(e){var r=(e=tr(e))[s];if(!1===r)return"stop";if(null!=r&&a(r))return!0;if(e.nofallthrough)return"stop";var n=e.fallthrough;if(null!=n){if("[object Array]"!=Object.prototype.toString.call(n))return t(n);for(var i=0,o=n.length;i<o;++i){var l=t(n[i]);if(l)return l}}return!1}(t[e]);if(r)return"stop"!=r}}function rr(t){t=zn[t.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function nr(t,e){var r;return(!f||34!=t.keyCode||!t.char)&&(null!=(r=zn[t.keyCode])&&!t.altGraphKey&&(t.altKey&&(r="Alt-"+r),(q?t.metaKey:t.ctrlKey)&&(r="Ctrl-"+r),(q?t.ctrlKey:t.metaKey)&&(r="Cmd-"+r),!e&&t.shiftKey?"Shift-"+r:r))}function ir(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0}function or(t,e){this.lines=[],this.type=e,this.doc=t}function lr(r,n,i,t,e){if(t&&t.shared)return o=r,l=n,s=i,c=e,(a=vn(a=t)).shared=!1,u=[lr(o,l,s,a,c)],h=u[0],f=a.replacedWith,Rr(o,function(t){f&&(a.replacedWith=f.cloneNode(!0)),u.push(lr(t,H(t,l),H(t,s),a,c));for(var e=0;e<t.linked.length;++e)if(t.linked[e].isParent)return;h=B(u)}),new sr(u,h);var o,l,s,a,c,u,h,f;if(r.cm&&!r.cm.curOp)return C(r.cm,lr)(r,n,i,t,e);var d=new or(r,e);if("range"!=e||N(n,i)){t&&vn(t,d),d.replacedWith&&(d.collapsed=!0,d.replacedWith=K("span",[d.replacedWith],"CodeMirror-widget"),t.handleMouseEvents||(d.replacedWith.ignoreEvents=!0)),d.collapsed&&(tt=!0),d.addToHistory&&jr(r,{from:n,to:i,origin:"markText"},{head:r.sel.head,anchor:r.sel.anchor},NaN);var p,g,m,v=n.line,y=0,b=r.cm;if(r.iter(v,i.line+1,function(t){b&&d.collapsed&&!b.options.lineWrapping&&pr(r,t)==b.display.maxLine&&(m=!0);var e={from:null,to:null,marker:d};y+=t.text.length,v==n.line&&(e.from=n.ch,y-=n.ch),v==i.line&&(e.to=i.ch,y-=t.text.length-i.ch),d.collapsed&&(v==i.line&&(g=hr(t,i.ch)),v==n.line?p=hr(t,n.ch):O(t,0)),e=e,(t=t).markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t),++v}),d.collapsed&&r.iter(n.line,i.line+1,function(t){gr(r,t)&&O(t,0)}),d.clearOnEnter&&F(d,"beforeCursorEnter",function(){d.clear()}),d.readOnly&&(Q=!0,(r.history.done.length||r.history.undone.length)&&r.clearHistory()),d.collapsed){if(p!=g)throw new Error("Inserting collapsed marker overlapping an existing one");d.size=y,d.atomic=!0}b&&(m&&(b.curOp.updateMaxLine=!0),(d.className||d.startStyle||d.endStyle||d.collapsed)&&x(b,n.line,i.line+1),d.atomic&&Oe(b))}return d}function sr(t,e){this.markers=t,this.primary=e;for(var r=0,n=this;r<t.length;++r)t[r].parent=this,F(t[r],"clear",function(){n.clear()})}function ar(t,e){if(t)for(var r=0;r<t.length;++r){var n=t[r];if(n.marker==e)return n}}function cr(t,e){var r=De(t,e.from.line)&&W(t,e.from.line).markedSpans,t=De(t,e.to.line)&&W(t,e.to.line).markedSpans;if(!r&&!t)return null;var n=e.from.ch,i=e.to.ch,o=A(e.from,e.to),l=function(t,e,r){if(t)for(var n,i=0;i<t.length;++i){var o,l=t[i],s=l.marker;!(null==l.from||(s.inclusiveLeft?l.from<=e:l.from<e))&&("bookmark"!=s.type||l.from!=e||r&&l.marker.insertLeft)||(o=null==l.to||(s.inclusiveRight?l.to>=e:l.to>e),(n=n||[]).push({from:l.from,to:o?null:l.to,marker:s}))}return n}(r,n,o),s=function(t,e,r){if(t)for(var n,i=0;i<t.length;++i){var o,l=t[i],s=l.marker;!(null==l.to||(s.inclusiveRight?l.to>=e:l.to>e))&&("bookmark"!=s.type||l.from!=e||r&&!l.marker.insertLeft)||(o=null==l.from||(s.inclusiveLeft?l.from<=e:l.from<e),(n=n||[]).push({from:o?null:l.from-e,to:null==l.to?null:l.to-e,marker:s}))}return n}(t,i,o),a=1==e.text.length,c=B(e.text).length+(a?n:0);if(l)for(var u=0;u<l.length;++u)null==(h=l[u]).to&&((f=ar(s,h.marker))?a&&(h.to=null==f.to?null:f.to+c):h.to=n);if(s)for(var h,f,u=0;u<s.length;++u)null!=(h=s[u]).to&&(h.to+=c),null==h.from?(f=ar(l,h.marker))||(h.from=c,a&&(l=l||[]).push(h)):(h.from+=c,a&&(l=l||[]).push(h));if(a&&l){for(u=0;u<l.length;++u)null!=l[u].from&&l[u].from==l[u].to&&"bookmark"!=l[u].marker.type&&l.splice(u--,1);l.length||(l=null)}var d=[l];if(!a){var p,g=e.text.length-2;if(0<g&&l)for(u=0;u<l.length;++u)null==l[u].to&&(p=p||[]).push({from:null,to:null,marker:l[u].marker});for(u=0;u<g;++u)d.push(p);d.push(s)}return d}function ur(t,e){var r=function(t,e){var r=e["spans_"+t.id];if(!r)return null;for(var n=0,i=[];n<e.text.length;++n)i.push(function(t){if(!t)return null;for(var e,r=0;r<t.length;++r)t[r].marker.explicitlyCleared?e=e||t.slice(0,r):e&&e.push(t[r]);return e?e.length?e:null:t}(r[n]));return i}(t,e),n=cr(t,e);if(!r)return n;if(n)for(var i=0;i<r.length;++i){var o=r[i],l=n[i];if(o&&l)t:for(var s=0;s<l.length;++s){for(var a=l[s],c=0;c<o.length;++c)if(o[c].marker==a.marker)continue t;o.push(a)}else l&&(r[i]=l)}return r}function hr(t,e){var r,n=tt&&t.markedSpans;if(n)for(var i,o=0;o<n.length;++o)(i=n[o]).marker.collapsed&&(null==i.from||i.from<e)&&(null==i.to||i.to>e)&&(!r||r.width<i.marker.width)&&(r=i.marker);return r}function fr(t){return hr(t,-1)}function dr(t){return hr(t,t.text.length+1)}function pr(t,e){for(var r;r=fr(e);)e=W(t,r.find().from.line);return e}function gr(t,e){var r=tt&&e.markedSpans;if(r)for(var n,i=0;i<r.length;++i)if((n=r[i]).marker.collapsed){if(null==n.from)return 1;if(!n.marker.replacedWith&&0==n.from&&n.marker.inclusiveLeft&&function t(e,r,n){{var i;if(null==n.to)return i=n.marker.find().to,i=W(e,i.line),t(e,i,ar(i.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==r.text.length)return!0;for(var o,l=0;l<r.markedSpans.length;++l)if((o=r.markedSpans[l]).marker.collapsed&&!o.marker.replacedWith&&o.from==n.to&&(o.marker.inclusiveLeft||n.marker.inclusiveRight)&&t(e,r,o))return!0}(t,e,n))return 1}}function mr(t){var e=t.markedSpans;if(e){for(var r=0;r<e.length;++r)e[r].marker.detachLine(t);t.markedSpans=null}}function vr(t,e){if(e){for(var r=0;r<e.length;++r)e[r].marker.attachLine(t);t.markedSpans=e}}n.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},n.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},n.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]},n.default=Z?n.macDefault:n.pcDefault,n.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},d.lookupKey=er,d.isModifierKey=rr,d.keyName=nr,d.fromTextArea=function(e,t){if((t=t||{}).value=e.value,!t.tabindex&&e.tabindex&&(t.tabindex=e.tabindex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var r=document.body;try{r=document.activeElement}catch(t){}t.autofocus=r==e||null!=e.getAttribute("autofocus")&&r==document.body}function n(){e.value=s.getValue()}if(e.form&&(F(e.form,"submit",n),!t.leaveSubmitMethodAlone)){var i=e.form,o=i.submit;try{var l=i.submit=function(){n(),i.submit=o,i.submit(),i.submit=l}}catch(t){}}e.style.display="none";var s=d(function(t){e.parentNode.insertBefore(t,e.nextSibling)},t);return s.save=n,s.getTextArea=function(){return e},s.toTextArea=function(){n(),e.parentNode.removeChild(s.getWrapperElement()),e.style.display="",e.form&&(P(e.form,"submit",n),"function"==typeof e.form.submit&&(e.form.submit=o))},s},ir.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(t){var e=this.string.charAt(this.pos);if("string"==typeof t?e==t:e&&(t.test?t.test(e):t(e)))return++this.pos,e},eatWhile:function(t){for(var e=this.pos;this.eat(t););return this.pos>e},eatSpace:function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(t){t=this.string.indexOf(t,this.pos);if(-1<t)return this.pos=t,!0},backUp:function(t){this.pos-=t},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=fn(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return fn(this.string,null,this.tabSize)},match:function(t,e,r){var n;return"string"!=typeof t?(n=this.string.slice(this.pos).match(t))&&0<n.index?null:(n&&!1!==e&&(this.pos+=n[0].length),n):(n=function(t){return r?t.toLowerCase():t})(this.string.substr(this.pos,t.length))==n(t)?(!1!==e&&(this.pos+=t.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},d.StringStream=ir,(d.TextMarker=or).prototype.clear=function(){if(!this.explicitlyCleared){for(var t=this.doc.cm,e=t&&!t.curOp,r=(e&&Vt(t),null),n=null,i=0;i<this.lines.length;++i){var o=this.lines[i],l=ar(o.markedSpans,this);null!=l.to&&(n=E(o)),o.markedSpans=function(t,e){for(var r,n=0;n<t.length;++n)t[n]!=e&&(r=r||[]).push(t[n]);return r}(o.markedSpans,l),null!=l.from?r=E(o):this.collapsed&&!gr(this.doc,o)&&t&&O(o,Ft(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(i=0;i<this.lines.length;++i){var s=pr(t.doc,this.lines[i]),a=at(t.doc,s);a>t.display.maxLineLength&&(t.display.maxLine=s,t.display.maxLineLength=a,t.display.maxLineChanged=!0)}null!=r&&t&&x(t,r,n+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Oe(t)),e&&Kt(t),R(this,"clear")}},or.prototype.find=function(){for(var t,e,r=0;r<this.lines.length;++r){var n=this.lines[r],i=ar(n.markedSpans,this);null==i.from&&null==i.to||(n=E(n),null!=i.from&&(t=T(n,i.from)),null!=i.to&&(e=T(n,i.to)))}return"bookmark"==this.type?t:t&&{from:t,to:e}},or.prototype.changed=function(){var t=this.find(),e=this.doc.cm;if(t&&e){var r,n=W(this.doc,t.from.line);if((r=Tt(r=e,n))&&(r.text=r.measure=r.markedSpans=null),t.from.line>=e.display.showingFrom&&t.from.line<e.display.showingTo){for(var i=e.display.lineDiv.firstChild;i;i=i.nextSibling)if(i.lineObj==n){i.offsetHeight!=n.height&&O(n,i.offsetHeight);break}_t(e,function(){e.curOp.selectionChanged=!0})}}},or.prototype.attachLine=function(t){var e;this.lines.length||!this.doc.cm||(e=this.doc.cm.curOp).maybeHiddenMarkers&&-1!=h(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this),this.lines.push(t)},or.prototype.detachLine=function(t){this.lines.splice(h(this.lines,t),1),!this.lines.length&&this.doc.cm&&((t=this.doc.cm.curOp).maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)},(d.SharedTextMarker=sr).prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();R(this,"clear")}},sr.prototype.find=function(){return this.primary.find()};var yr=d.LineWidget=function(t,e,r){for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);this.cm=t,this.node=e};function br(r){return function(){var t=!this.cm.curOp;t&&Vt(this.cm);try{var e=r.apply(this,arguments)}finally{t&&Kt(this.cm)}return e}}function xr(t){return null!=t.height?t.height:(t.node.parentNode&&1==t.node.parentNode.nodeType||X(t.cm.display.measure,K("div",[t.node],null,"position: relative")),t.height=t.node.offsetHeight)}function Cr(t,e,r){t={text:t};return vr(t,e),t.height=r?r(t):1,t}function wr(t,e,r,n,i){var o,l=r.flattenSpans,s=(null==l&&(l=t.options.flattenSpans),0),a=null,c=new ir(e,t.options.tabSize);for(""==e&&r.blankLine&&r.blankLine(n);!c.eol();)o=c.pos>t.options.maxHighlightLength?(l=!1,c.pos=Math.min(e.length,c.start+5e4),null):r.token(c,n),l&&a==o||(s<c.start&&i(c.start,a),s=c.start,a=o),c.start=c.pos;s<c.pos&&i(c.pos,a)}function Lr(t,e,r){var o=[t.state.modeGen];wr(t,e.text,t.doc.mode,r,function(t,e){o.push(t,e)});for(var n=0;n<t.state.overlays.length;++n){var l=t.state.overlays[n],s=1,a=0;wr(t,e.text,l.mode,!0,function(t,e){for(var r=s;a<t;){var n=o[s];t<n&&o.splice(s,1,t,o[s+1],n),s+=2,a=Math.min(t,n)}if(e)if(l.opaque)o.splice(r,s-r,t,e),s=r+2;else for(;r<s;r+=2){var i=o[r+1];o[r+1]=i?i+" "+e:e}})}return o}function kr(t,e){return e.styles&&e.styles[0]==t.state.modeGen||(e.styles=Lr(t,e,e.stateAfter=Lt(t,E(e)))),e.styles}function Sr(t,e,r){var n=t.doc.mode,i=new ir(e.text,t.options.tabSize);for(""==e.text&&n.blankLine&&n.blankLine(r);!i.eol()&&i.pos<=t.options.maxHighlightLength;)n.token(i,r),i.start=i.pos}yr.prototype.clear=br(function(){var t=this.line.widgets,e=E(this.line);if(null!=e&&t){for(var r=0;r<t.length;++r)t[r]==this&&t.splice(r--,1);t.length||(this.line.widgets=null),O(this.line,Math.max(0,this.line.height-xr(this))),x(this.cm,e,e+1)}}),yr.prototype.changed=br(function(){var t=this.height,t=(this.height=null,xr(this)-t);t&&(O(this.line,this.line.height+t),t=E(this.line),x(this.cm,t,t+1))});var Mr={};function Tr(t){return t?Mr[t]||(Mr[t]="cm-"+t.replace(/ +/g," cm-")):null}function Ar(t,e,r){for(var n,i=e,o=!0;n=fr(i);)i=W(t.doc,n.find().from.line);var l,s,a,c={pre:K("pre"),col:0,pos:0,display:!r,measure:null,measuredSomething:!1,cm:t};i.textClass&&(c.pre.className=i.textClass);do{i.text&&(o=!1),c.measure=i==e&&r,c.pos=0,c.addToken=c.measure?Dr:Hr,(k||w)&&t.getOption("lineWrapping")&&(c.addToken=function(o){function l(t){for(var e=" ",r=0;r<t.length-2;++r)e+=r%2?" ":" ";return e+=" "}return function(t,e,r,n,i){return o(t,e.replace(/ {3,}/,l),r,n,i)}}(c.addToken));var u=function(t,e,r){var n=t.markedSpans,i=t.text,o=0;if(n)for(var l,s,a,c,u,h=i.length,f=0,d=1,p="",g=0;;){if(g==f){s=a=c="",g=1/0;for(var m=u=null,v=0;v<n.length;++v){var y=n[v],b=y.marker;y.from<=f&&(null==y.to||y.to>f)?(null!=y.to&&g>y.to&&(g=y.to,a=""),b.className&&(s+=" "+b.className),b.startStyle&&y.from==f&&(c+=" "+b.startStyle),b.endStyle&&y.to==g&&(a+=" "+b.endStyle),b.collapsed&&(!u||u.marker.size<b.size)&&(u=y)):y.from>f&&g>y.from&&(g=y.from),"bookmark"==b.type&&y.from==f&&b.replacedWith&&(m=b.replacedWith)}if(u&&(u.from||0)==f&&(Wr(e,(null==u.to?h:u.to)-f,null!=u.from&&u.marker.replacedWith),null==u.to))return u.marker.find();m&&!u&&Wr(e,0,m)}if(h<=f)break;for(var x=Math.min(h,g);;){if(p){var C,w=f+p.length;if(u||(C=x<w?p.slice(0,x-f):p,e.addToken(e,C,l?l+s:s,c,f+C.length==g?a:"")),x<=w){p=p.slice(x-f),f=x;break}f=w,c=""}p=i.slice(o,o=r[d++]),l=Tr(r[d++])}}else for(var d=1;d<r.length;d+=2)e.addToken(e,i.slice(o,o=r[d]),Tr(r[d+1]))}(i,c,kr(t,i))}while(r&&i==e&&!c.measuredSomething&&(r[0]=c.pre.appendChild(Hn(t.display.measure)),c.measuredSomething=!0),u&&(i=W(t.doc,u.to.line)),u);return!r||c.measuredSomething||r[0]||(r[0]=c.pre.appendChild(o?K("span"," "):Hn(t.display.measure))),c.pre.firstChild||gr(t.doc,e)||c.pre.appendChild(document.createTextNode(" ")),r&&k&&(s=z(i))&&(s[a=s.length-1].from==s[a].to&&--a,l=s[a],s=s[a-1],l.from+1==l.to&&s&&l.level<s.level&&((a=r[c.pos-1])&&a.parentNode.insertBefore(a.measureRight=Hn(t.display.measure),a.nextSibling))),g(t,"renderLine",t,e,c.pre),c.pre}var Nr=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;function Hr(t,e,r,n,i){if(e){if(Nr.test(e))for(var o=document.createDocumentFragment(),l=0;;){Nr.lastIndex=l;var s=Nr.exec(e),a=s?s.index-l:e.length-l;if(a&&(o.appendChild(document.createTextNode(e.slice(l,l+a))),t.col+=a),!s)break;l+=1+a,"\t"==s[0]?(a=(a=t.cm.options.tabSize)-t.col%a,o.appendChild(K("span",pn(a),"cm-tab")),t.col+=a):((a=K("span","•","cm-invalidchar")).title="\\u"+s[0].charCodeAt(0).toString(16),o.appendChild(a),t.col+=1)}else{t.col+=e.length;var o=document.createTextNode(e)}if(r||n||i||t.measure)return r=r||"",n&&(r+=n),i&&(r+=i),t.pre.appendChild(K("span",[o],r));t.pre.appendChild(o)}}function Dr(t,e,r,n,i){for(var o=t.cm.options.lineWrapping,l=0;l<e.length;++l){var s=e.charAt(l),a=0==l,a=("\ud800"<=s&&s<"\udbff"&&l<e.length-1?(s=e.slice(l,l+2),++l):l&&o&&An(e,l)&&t.pre.appendChild(K("wbr")),t.measure[t.pos]=Hr(t,s,r,a&&n,l==e.length-1&&i));k&&o&&" "==s&&l&&!/\s/.test(e.charAt(l-1))&&l<e.length-1&&!/\s/.test(e.charAt(l+1))&&(a.style.whiteSpace="normal"),t.pos+=s.length}e.length&&(t.measuredSomething=!0)}function Wr(t,e,r){r&&(t.display||(r=r.cloneNode(!0)),t.measure&&(t.measure[t.pos]=e?r:t.pre.appendChild(Hn(t.cm.display.measure)),t.measuredSomething=!0),t.pre.appendChild(r)),t.pos+=e}function Or(t,o,e,r,l){function n(t){return e?e[t]:null}function i(t,e,r){var n,i;e=e,r=r,i=l,(n=t).text=e,n.stateAfter&&(n.stateAfter=null),n.styles&&(n.styles=null),null!=n.order&&(n.order=null),mr(n),vr(n,r),(e=i?i(n):1)!=n.height&&O(n,e),R(t,"change",t,o)}var s=o.from,a=o.to,c=o.text,u=W(t,s.line),h=W(t,a.line),f=B(c),d=n(c.length-1),p=a.line-s.line;if(0==s.ch&&0==a.ch&&""==f){for(var g=0,m=c.length-1,v=[];g<m;++g)v.push(Cr(c[g],n(g),l));i(h,h.text,d),p&&t.remove(s.line,p),v.length&&t.insert(s.line,v)}else if(u==h)if(1==c.length)i(u,u.text.slice(0,s.ch)+f+u.text.slice(a.ch),d);else{for(v=[],g=1,m=c.length-1;g<m;++g)v.push(Cr(c[g],n(g),l));v.push(Cr(f+u.text.slice(a.ch),d,l)),i(u,u.text.slice(0,s.ch)+c[0],n(0)),t.insert(s.line+1,v)}else if(1==c.length)i(u,u.text.slice(0,s.ch)+c[0]+h.text.slice(a.ch),n(0)),t.remove(s.line+1,p);else{i(u,u.text.slice(0,s.ch)+c[0],n(0)),i(h,f+h.text.slice(a.ch),d);for(g=1,m=c.length-1,v=[];g<m;++g)v.push(Cr(c[g],n(g),l));1<p&&t.remove(s.line+1,p-1),t.insert(s.line+1,v)}R(t,"change",t,o),We(t,r.anchor,r.head,null,!0)}function Er(t){this.lines=t,this.parent=null;for(var e=0,r=t.length,n=0;e<r;++e)t[e].parent=this,n+=t[e].height;this.height=n}function zr(t){for(var e=0,r=0,n=0,i=(this.children=t).length;n<i;++n){var o=t[n];e+=o.chunkSize(),r+=o.height,o.parent=this}this.size=e,this.height=r,this.parent=null}Er.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var r,n=t,i=t+e;n<i;++n){var o=this.lines[n];this.height-=o.height,(r=o).parent=null,mr(r),R(o,"delete")}this.lines.splice(t,e)},collapse:function(t){t.splice.apply(t,[t.length,0].concat(this.lines))},insertInner:function(t,e,r){this.height+=r,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var n=0,i=e.length;n<i;++n)e[n].parent=this},iterN:function(t,e,r){for(var n=t+e;t<n;++t)if(r(this.lines[t]))return!0}},zr.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var r,n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(t<o){var l=Math.min(e,o-t),s=i.height;if(i.removeInner(t,l),this.height-=s-i.height,o==l&&(this.children.splice(n--,1),i.parent=null),0==(e-=l))break;t=0}else t-=o}this.size-e<25&&(this.collapse(r=[]),this.children=[new Er(r)],this.children[0].parent=this)},collapse:function(t){for(var e=0,r=this.children.length;e<r;++e)this.children[e].collapse(t)},insertInner:function(t,e,r){this.size+=e.length,this.height+=r;for(var n=0,i=this.children.length;n<i;++n){var o=this.children[n],l=o.chunkSize();if(t<=l){if(o.insertInner(t,e,r),o.lines&&50<o.lines.length){for(;50<o.lines.length;){var s=new Er(o.lines.splice(o.lines.length-25,25));o.height-=s.height,this.children.splice(n+1,0,s),s.parent=this}this.maybeSpill()}break}t-=l}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e,r=new zr(t.children.splice(t.children.length-5,5))}while(t.parent?(t.size-=r.size,t.height-=r.height,e=h(t.parent.children,t),t.parent.children.splice(e+1,0,r)):(((e=new zr(t.children)).parent=t).children=[e,r],t=e),r.parent=t.parent,10<t.children.length);t.parent.maybeSpill()}},iterN:function(t,e,r){for(var n=0,i=this.children.length;n<i;++n){var o=this.children[n],l=o.chunkSize();if(t<l){var s=Math.min(e,l-t);if(o.iterN(t,s,r))return!0;if(0==(e-=s))break;t=0}else t-=l}}};var Ir,Fr=0,p=d.Doc=function(t,e,r){if(!(this instanceof p))return new p(t,e,r);null==r&&(r=0),zr.call(this,[new Er([Cr("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=_r(),this.cleanGeneration=1,this.frontier=r;r=T(r,0);this.sel={from:r,to:r,head:r,anchor:r,shift:!1,extend:!1,goalColumn:null},this.id=++Fr,this.modeOption=e,Or(this,{from:r,to:r,text:t="string"==typeof t?Wn(t):t},null,{head:r,anchor:r})},Pr=(p.prototype=mn(zr.prototype,{constructor:p,iter:function(t,e,r){r?this.iterN(t-this.first,e-t,r):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var r=0,n=0,i=e.length;n<i;++n)r+=e[n].height;this.insertInner(t-this.first,e,r)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=Vr(this,this.first,this.first+this.size);return!1===t?e:e.join(t||"\n")},setValue:function(t){var e=T(this.first,0),r=this.first+this.size-1;we(this,{from:e,to:T(r,W(this,r).text.length),text:Wn(t),origin:"setValue"},{head:e,anchor:e},!0)},replaceRange:function(t,e,r,n){Te(this,t,e=H(this,e),r=r?H(this,r):e,n)},getRange:function(t,e,r){t=Br(this,H(this,t),H(this,e));return!1===r?t:t.join(r||"\n")},getLine:function(t){t=this.getLineHandle(t);return t&&t.text},setLine:function(t,e){De(this,t)&&Te(this,e,T(t,0),H(this,T(t)))},removeLine:function(t){t?Te(this,"",H(this,T(t-1)),H(this,T(t))):Te(this,"",T(0,0),H(this,T(1,0)))},getLineHandle:function(t){if(De(this,t))return W(this,t)},getLineNumber:E,lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return H(this,t)},getCursor:function(t){var e=this.sel,t=null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||!1===t?e.to:e.from;return Ae(t)},somethingSelected:function(){return!A(this.sel.head,this.sel.anchor)},setCursor:Xt(function(t,e,r){e=H(this,"number"==typeof t?T(t,e||0):t);r?D(this,e):We(this,e,e)}),setSelection:Xt(function(t,e){We(this,H(this,t),H(this,e||t))}),extendSelection:Xt(function(t,e){D(this,H(this,t),e&&H(this,e))}),getSelection:function(t){return this.getRange(this.sel.from,this.sel.to,t)},replaceSelection:function(t,e,r){we(this,{from:this.sel.from,to:this.sel.to,text:Wn(t),origin:r},e||"around")},undo:Xt(function(){ke(this,"undo")}),redo:Xt(function(){ke(this,"redo")}),setExtending:function(t){this.sel.extend=t},historySize:function(){var t=this.history;return{undo:t.done.length,redo:t.undone.length}},clearHistory:function(){this.history=_r(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration()},changeGeneration:function(){return this.history.lastOp=this.history.lastOrigin=null,this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:$r(this.history.done),undone:$r(this.history.undone)}},setHistory:function(t){var e=this.history=_r(this.history.maxGeneration);e.done=t.done.slice(0),e.undone=t.undone.slice(0)},markText:function(t,e,r){return lr(this,H(this,t),H(this,e),r,"range")},setBookmark:function(t,e){e={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft};return lr(this,t=H(this,t),t,e,"bookmark")},findMarksAt:function(t){var e=[],r=W(this,(t=H(this,t)).line).markedSpans;if(r)for(var n=0;n<r.length;++n){var i=r[n];(null==i.from||i.from<=t.ch)&&(null==i.to||i.to>=t.ch)&&e.push(i.marker.parent||i.marker)}return e},getAllMarks:function(){var n=[];return this.iter(function(t){var e=t.markedSpans;if(e)for(var r=0;r<e.length;++r)null!=e[r].from&&n.push(e[r].marker)}),n},posFromIndex:function(e){var r,n=this.first;return this.iter(function(t){t=t.text.length+1;if(e<t)return r=e,!0;e-=t,++n}),H(this,T(n,r))},indexFromPos:function(t){var e=(t=H(this,t)).ch;return t.line<this.first||t.ch<0?0:(this.iter(this.first,t.line,function(t){e+=t.text.length+1}),e)},copy:function(t){var e=new p(Vr(this,this.first,this.first+this.size),this.modeOption,this.first);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){var e=this.first,r=this.first+this.size,r=(null!=(t=t||{}).from&&t.from>e&&(e=t.from),null!=t.to&&t.to<r&&(r=t.to),new p(Vr(this,e,r),t.mode||this.modeOption,e));return t.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:t.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],r},unlinkDoc:function(t){if(t instanceof d&&(t=t.doc),this.linked)for(var e=0;e<this.linked.length;++e){var r=this.linked[e];if(r.doc==t){this.linked.splice(e,1),t.unlinkDoc(this);break}}var n;t.history==this.history&&(n=[t.id],Rr(t,function(t){n.push(t.id)},!0),t.history=_r(),t.history.done=$r(this.history.done,n),t.history.undone=$r(this.history.undone,n))},iterLinkedDocs:function(t){Rr(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),p.prototype.eachLine=p.prototype.iter,"iter insert remove copy getEditor".split(" "));for(Ir in p.prototype)p.prototype.hasOwnProperty(Ir)&&h(Pr,Ir)<0&&(d.prototype[Ir]=function(t){return function(){return t.apply(this.doc,arguments)}}(p.prototype[Ir]));function Rr(t,s,a){!function t(e,r,n){if(e.linked)for(var i=0;i<e.linked.length;++i){var o,l=e.linked[i];l.doc!=r&&(o=n&&l.sharedHist,a&&!o||(s(l.doc,o),t(l.doc,e,o)))}}(t,null,!0)}function Gr(t,e){if(e.cm)throw new Error("This document is already in use.");nt((t.doc=e).cm=t),et(t),t.options.lineWrapping||ct(t),t.options.mode=e.modeOption,x(t)}function W(t,e){for(e-=t.first;!t.lines;)for(var r=0;;++r){var n=t.children[r],i=n.chunkSize();if(e<i){t=n;break}e-=i}return t.lines[e]}function Br(t,e,r){var n=[],i=e.line;return t.iter(e.line,r.line+1,function(t){t=t.text;i==r.line&&(t=t.slice(0,r.ch)),i==e.line&&(t=t.slice(e.ch)),n.push(t),++i}),n}function Vr(t,e,r){var n=[];return t.iter(e,r,function(t){n.push(t.text)}),n}function O(t,e){for(var r=e-t.height,n=t;n;n=n.parent)n.height+=r}function E(t){if(null==t.parent)return null;for(var e=t.parent,r=h(e.lines,t),n=e.parent;n;n=(e=n).parent)for(var i=0;n.children[i]!=e;++i)r+=n.children[i].chunkSize();return r+e.first}function Kr(t,e){var r=t.first;t:do{for(var n=0,i=t.children.length;n<i;++n){var o=t.children[n],l=o.height;if(e<l){t=o;continue t}e-=l,r+=o.chunkSize()}return r}while(!t.lines);for(n=0,i=t.lines.length;n<i;++n){var s=t.lines[n].height;if(e<s)break;e-=s}return r+n}function Xr(t,e){for(var r=0,n=(e=pr(t.doc,e)).parent,i=0;i<n.lines.length;++i){var o=n.lines[i];if(o==e)break;r+=o.height}for(var l=n.parent;l;l=(n=l).parent)for(i=0;i<l.children.length;++i){var s=l.children[i];if(s==n)break;r+=s.height}return r}function z(t){var e=t.order;return e=null==e?t.order=Zn(t.text):e}function _r(t){return{done:[],undone:[],undoDepth:1/0,lastTime:0,lastOp:null,lastOrigin:null,generation:t||1,maxGeneration:t||1}}function Ur(e,r,t,n){var i=r["spans_"+e.id],o=0;e.iter(Math.max(e.first,t),Math.min(e.first+e.size,n),function(t){t.markedSpans&&((i=i||(r["spans_"+e.id]={}))[o]=t.markedSpans),++o})}function Yr(t,e){var r={from:e.from,to:ye(e),text:Br(t,e.from,e.to)};return Ur(t,r,e.from.line,e.to.line+1),Rr(t,function(t){Ur(t,r,e.from.line,e.to.line+1)},!0),r}function jr(t,e,r,n){var i=t.history,o=(i.undone.length=0,+new Date),l=B(i.done);if(l&&(i.lastOp==n||i.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&t.cm&&i.lastTime>o-t.cm.options.historyEventDelay||"*"==e.origin.charAt(0)))){var s=B(l.changes);A(e.from,e.to)&&A(e.from,s.to)?s.to=ye(e):l.changes.push(Yr(t,e)),l.anchorAfter=r.anchor,l.headAfter=r.head}else for(l={changes:[Yr(t,e)],generation:i.generation,anchorBefore:t.sel.anchor,headBefore:t.sel.head,anchorAfter:r.anchor,headAfter:r.head},i.done.push(l),i.generation=++i.maxGeneration;i.done.length>i.undoDepth;)i.done.shift();i.lastTime=o,i.lastOp=n,i.lastOrigin=e.origin}function $r(t,e){for(var r=0,n=[];r<t.length;++r){var i=t[r],o=i.changes,l=[];n.push({changes:l,anchorBefore:i.anchorBefore,headBefore:i.headBefore,anchorAfter:i.anchorAfter,headAfter:i.headAfter});for(var s=0;s<o.length;++s){var a,c=o[s];if(l.push({from:c.from,to:c.to,text:c.text}),e)for(var u in c)(a=u.match(/^spans_(\d+)$/))&&-1<h(e,Number(a[1]))&&(B(l)[u]=c[u],delete c[u])}}return n}function Zr(t,e,r,n){r<t.line?t.line+=n:e<t.line&&(t.line=e,t.ch=0)}function qr(t,e,r,n){for(var i=0;i<t.length;++i){for(var o=t[i],l=!0,s=0;s<o.changes.length;++s){var a=o.changes[s];if(o.copied||(a.from=Ae(a.from),a.to=Ae(a.to)),r<a.from.line)a.from.line+=n,a.to.line+=n;else if(e<=a.to.line){l=!1;break}}o.copied||(o.anchorBefore=Ae(o.anchorBefore),o.headBefore=Ae(o.headBefore),o.anchorAfter=Ae(o.anchorAfter),o.readAfter=Ae(o.headAfter),o.copied=!0),l?(Zr(o.anchorBefore),Zr(o.headBefore),Zr(o.anchorAfter),Zr(o.headAfter)):(t.splice(0,i+1),i=0)}}function Jr(t,e){var r=e.from.line,n=e.to.line,e=e.text.length-(n-r)-1;qr(t.done,r,n,e),qr(t.undone,r,n,e)}function Qr(){rn(this)}function tn(t){return t.stop||(t.stop=Qr),t}function I(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function en(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function rn(t){I(t),en(t)}function nn(t){return t.target||t.srcElement}function on(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),e=Z&&t.ctrlKey&&1==e?3:e}function F(t,e,r){t.addEventListener?t.addEventListener(e,r,!1):t.attachEvent?t.attachEvent("on"+e,r):((t=t._handlers||(t._handlers={}))[e]||(t[e]=[])).push(r)}function P(t,e,r){if(t.removeEventListener)t.removeEventListener(e,r,!1);else if(t.detachEvent)t.detachEvent("on"+e,r);else{var n=t._handlers&&t._handlers[e];if(n)for(var i=0;i<n.length;++i)if(n[i]==r){n.splice(i,1);break}}}function g(t,e){var r=t._handlers&&t._handlers[e];if(r)for(var n=Array.prototype.slice.call(arguments,2),i=0;i<r.length;++i)r[i].apply(null,n)}d.e_stop=rn,d.e_preventDefault=I,d.e_stopPropagation=en;var ln,sn=0;function R(t,e){var r=t._handlers&&t._handlers[e];if(r){var n=Array.prototype.slice.call(arguments,2);ln||(++sn,ln=[],setTimeout(an,0));for(var i=0;i<r.length;++i)ln.push(function(t){return function(){t.apply(null,n)}}(r[i]))}}function G(t,e){return g(t,e.type,t,e),null!=(t=e).defaultPrevented?t.defaultPrevented:0==t.returnValue}function an(){--sn;var t=ln;ln=null;for(var e=0;e<t.length;++e)t[e]()}function cn(t,e){t=t._handlers&&t._handlers[e];return t&&0<t.length}d.on=F,d.off=P,d.signal=g;var m=30,un=d.Pass={toString:function(){return"CodeMirror.Pass"}};function hn(){this.id=null}function fn(t,e,r,n,i){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var o=n||0,l=i||0;o<e;++o)"\t"==t.charAt(o)?l+=r-l%r:++l;return l}hn.prototype={set:function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)}},d.countColumn=fn;var dn=[""];function pn(t){for(;dn.length<=t;)dn.push(B(dn)+" ");return dn[t]}function B(t){return t[t.length-1]}function gn(t){if(j)t.selectionStart=0,t.selectionEnd=t.value.length;else try{t.select()}catch(t){}}function h(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;++r)if(t[r]==e)return r;return-1}function mn(t,e){function r(){}r.prototype=t;t=new r;return e&&vn(e,t),t}function vn(t,e){for(var r in e=e||{},t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function yn(t){for(var e=[],r=0;r<t;++r)e.push(void 0);return e}function V(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}var bn=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function xn(t){return/\w/.test(t)||""<t&&(t.toUpperCase()!=t.toLowerCase()||bn.test(t))}function Cn(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return;return 1}var wn=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;function K(t,e,r,n){var i=document.createElement(t);if(r&&(i.className=r),n&&(i.style.cssText=n),"string"==typeof e)kn(i,e);else if(e)for(var o=0;o<e.length;++o)i.appendChild(e[o]);return i}function Ln(t){for(var e=t.childNodes.length;0<e;--e)t.removeChild(t.firstChild);return t}function X(t,e){return Ln(t).appendChild(e)}function kn(t,e){S?(t.innerHTML="",t.appendChild(document.createTextNode(e))):t.textContent=e}function _(t){return t.getBoundingClientRect()}d.replaceGetRect=function(t){_=t};var Sn,Mn,Tn=!S&&("draggable"in(r=K("div"))||"dragDrop"in r);function An(){return!1}function Nn(t){return null!=Sn?Sn:(X(t,t=K("div",null,null,"width: 50px; height: 50px; overflow-x: scroll")),(Sn=t.offsetWidth?t.offsetHeight-t.clientHeight:Sn)||0)}function Hn(t){var e;return null==Mn&&(e=K("span","​"),X(t,K("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(Mn=e.offsetWidth<=1&&2<e.offsetHeight&&!U)),Mn?K("span","​"):K("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}v?An=function(t,e){return 36==t.charCodeAt(e-1)&&39==t.charCodeAt(e)}:y&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?An=function(t,e){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(t.slice(e-1,e+1))}:w&&(An=function(t,e){return!!(1<e&&45==t.charCodeAt(e-1)&&/\w/.test(t.charAt(e-2))&&/[^\-?\.]/.test(t.charAt(e)))||/[~!#%&*)=+}\]|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|…[\w~`@#$%\^&*(_=+{[><]/.test(t.slice(e-1,e+1))});var Dn,Wn=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,r=[],n=t.length;e<=n;){var i=t.indexOf("\n",e),o=(-1==i&&(i=t.length),t.slice(e,"\r"==t.charAt(i-1)?i-1:i)),l=o.indexOf("\r");-1!=l?(r.push(o.slice(0,l)),e+=l+1):(r.push(o),e=i+1)}return r}:function(t){return t.split(/\r\n?|\n/)},On=(d.splitLines=Wn,window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){try{var e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)}),En="oncopy"in(c=K("div"))||(c.setAttribute("oncopy","return;"),"function"==typeof c.oncopy),zn={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};d.keyNames=zn;for(var e=0;e<10;e++)zn[e+48]=String(e);for(e=65;e<=90;e++)zn[e]=String.fromCharCode(e);for(e=1;e<=12;e++)zn[e+111]=zn[e+63235]="F"+e;function In(t){return t.level%2?t.to:t.from}function Fn(t){return t.level%2?t.from:t.to}function Pn(t){t=z(t);return t?In(t[0]):0}function Rn(t){var e=z(t);return e?Fn(B(e)):t.text.length}function Gn(t,e){var r=W(t.doc,e),t=pr(t.doc,r),r=(t!=r&&(e=E(t)),z(t));return T(e,r?(r[0].level%2?Rn:Pn)(t):0)}function Bn(t,e){for(var r,n,i,o=0;o<t.length;++o){var l=t[o];if(l.from<e&&l.to>e)return Dn=null,o;if(l.from==e||l.to==e){if(null!=r)return n=t,l=l.level,i=t[r].level,n=n[0].level,l==n||i!=n&&l<i?(Dn=r,o):(Dn=o,r);r=o}}return Dn=null,r}function Vn(t,e,r,n){if(!n)return e+r;for(;0<(e+=r)&&wn.test(t.text.charAt(e)););return e}function Kn(t,e,r,n){var i=z(t);if(!i)return Xn(t,e,r,n);for(var o=Bn(i,e),l=i[o],s=Vn(t,e,l.level%2?-r:r,n);;){if(s>l.from&&s<l.to)return s;if(s==l.from||s==l.to)return Bn(i,s)==o?s:0<r==(l=i[o+=r]).level%2?l.to:l.from;if(!(l=i[o+=r]))return null;s=0<r==l.level%2?Vn(t,l.to,-1,n):Vn(t,l.from,1,n)}}function Xn(t,e,r,n){var i=e+r;if(n)for(;0<i&&wn.test(t.text.charAt(i));)i+=r;return i<0||i>t.text.length?null:i}_n=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,Un=/[stwN]/,Yn=/[LRr]/,jn=/[Lb1n]/,$n=/[1n]/;var _n,Un,Yn,jn,$n,Zn=function(t){if(!_n.test(t))return!1;for(var e,r=t.length,n=[],i=0;i<r;++i)n.push(u=(e=t.charCodeAt(i))<=255?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL".charAt(e):1424<=e&&e<=1524?"R":1536<=e&&e<=1791?"rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr".charAt(e-1536):1792<=e&&e<=2220?"r":"L");for(var i=0,o="L";i<r;++i)"m"==(u=n[i])?n[i]=o:o=u;for(var i=0,l="L";i<r;++i)"1"==(u=n[i])&&"r"==l?n[i]="n":Yn.test(u)&&"r"==(l=u)&&(n[i]="R");for(i=1,o=n[0];i<r-1;++i)"+"==(u=n[i])&&"1"==o&&"1"==n[i+1]?n[i]="1":","!=u||o!=n[i+1]||"1"!=o&&"n"!=o||(n[i]=o),o=u;for(i=0;i<r;++i)if(","==(u=n[i]))n[i]="N";else if("%"==u){for(var s=i+1;s<r&&"%"==n[s];++s);for(var a=i&&"!"==n[i-1]||s<r-1&&"1"==n[s]?"1":"N",c=i;c<s;++c)n[c]=a;i=s-1}for(i=0,l="L";i<r;++i){var u=n[i];"L"==l&&"1"==u?n[i]="L":Yn.test(u)&&(l=u)}for(i=0;i<r;++i)if(Un.test(n[i])){for(s=i+1;s<r&&Un.test(n[s]);++s);for(a="L"==(i?n[i-1]:"L")||"L"==(s<r-1?n[s]:"L")?"L":"R",c=i;c<s;++c)n[c]=a;i=s-1}for(var h,f=[],i=0;i<r;)if(jn.test(n[i])){var d=i;for(++i;i<r&&jn.test(n[i]);++i);f.push({from:d,to:i,level:0})}else{var p=i,g=f.length;for(++i;i<r&&"L"!=n[i];++i);for(c=p;c<i;)if($n.test(n[c])){p<c&&f.splice(g,0,{from:p,to:c,level:1});var m=c;for(++c;c<i&&$n.test(n[c]);++c);f.splice(g,0,{from:m,to:c,level:2}),p=c}else++c;p<i&&f.splice(g,0,{from:p,to:i,level:1})}return 1==f[0].level&&(h=t.match(/^\s+/))&&(f[0].from=h[0].length,f.unshift({from:0,to:h[0].length,level:0})),1==B(f).level&&(h=t.match(/\s+$/))&&(B(f).to-=h[0].length,f.push({from:r-h[0].length,to:r,level:0})),f[0].level!=B(f).level&&f.push({from:r,to:r,level:f[0].level}),f};return d.version="3.14.0",d}();