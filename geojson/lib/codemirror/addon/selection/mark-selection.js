!function(){"use strict";function n(l){l.operation(function(){var e=l,t=e.getCursor("start"),r=e.getCursor("end");if(0==m(t,r))c(e);else{var n=e.state.markedSelection;if(n.length){var o=n[0].find(),i=n[n.length-1].find();if(!o||!i||r.line-t.line<d||0<=m(t,i.to)||m(r,o.from)<=0)f(e);else{for(;0<m(t,o.from);)n.shift().clear(),o=n[0].find();for(m(t,o.from)<0&&(o.to.line-t.line<d?(n.shift().clear(),a(e,t,o.to,0)):a(e,t,o.from,0));m(r,i.to)<0;)n.pop().clear(),i=n[n.length-1].find();0<m(r,i.to)&&(r.line-i.from.line<d?(n.pop().clear(),a(e,i.from,r)):a(e,i.to,r))}}else a(e,t,r)}})}function o(e){e.state.markedSelection.length&&e.operation(function(){c(e)})}CodeMirror.defineOption("styleSelectedText",!1,function(e,t,r){r=r&&r!=CodeMirror.Init;t&&!r?(e.state.markedSelection=[],e.state.markedSelectionStyle="string"==typeof t?t:"CodeMirror-selectedtext",f(e),e.on("cursorActivity",n),e.on("change",o)):!t&&r&&(e.off("cursorActivity",n),e.off("change",o),c(e),e.state.markedSelection=e.state.markedSelectionStyle=null)});var d=8,u=CodeMirror.Pos;function m(e,t){return e.line-t.line||e.ch-t.ch}function a(e,t,r,n){if(0!=m(t,r))for(var o=e.state.markedSelection,i=e.state.markedSelectionStyle,l=t.line;;){var a=l==t.line?t:u(l,0),c=l+d,f=c>=r.line,s=f?r:u(c,0),a=e.markText(a,s,{className:i});if(null==n?o.push(a):o.splice(n++,0,a),f)break;l=c}}function c(e){for(var t=e.state.markedSelection,r=0;r<t.length;++r)t[r].clear();t.length=0}function f(e){c(e);var t=e.getCursor("start"),r=e.getCursor("end");a(e,t,r)}}();