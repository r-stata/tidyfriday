CodeMirror.validate=function(){var p="CodeMirror-lint-markers",v=/^(?:error|warning)$/;function s(t){t.parentNode&&t.parentNode.removeChild(t)}function h(t,e,o){t=t,e=e,(r=document.createElement("div")).className="CodeMirror-lint-tooltip",r.appendChild(e.cloneNode(!0)),document.body.appendChild(r),CodeMirror.on(document,"mousemove",i),i(t),null!=r.style.opacity&&(r.style.opacity=1);var r,n=r;function i(t){if(!r.parentNode)return CodeMirror.off(document,"mousemove",i);r.style.top=Math.max(0,t.clientY-r.offsetHeight-5)+"px",r.style.left=t.clientX+5+"px"}function a(){var t;CodeMirror.off(o,"mouseout",a),n&&((t=n).parentNode&&(null==t.style.opacity&&s(t),t.style.opacity=0,setTimeout(function(){s(t)},600)),n=null)}var l=setInterval(function(){if(n)for(var t=o;;t=t.parentNode){if(t==document.body)return;if(!t){a();break}}if(!n)return clearInterval(l)},400);CodeMirror.on(o,"mouseout",a)}function a(l,t,e){this.marked=[],this.options=t,this.timeout=null,this.hasGutter=e,this.onMouseOver=function(t){var e=l,o=t;if(/\bCodeMirror-lint-mark-/.test((o.target||o.srcElement).className))for(var r=0;r<d.length;r+=2)for(var n=e.findMarksAt(e.coordsChar({left:o.clientX+d[r],top:o.clientY+d[r+1]})),i=0;i<n.length;++i){var a=n[i].__annotation;if(a)return void function(t,e){var o=e.target||e.srcElement;h(e,C(t),o)}(a,o)}}}function g(t){var e=t.state.lint;e.hasGutter&&t.clearGutter(p);for(var o=0;o<e.marked.length;++o)e.marked[o].clear();e.marked.length=0}function C(t){var e=t.severity,o=(v.test(e)||(e="error"),document.createElement("div"));return o.className="CodeMirror-lint-message-"+e,o.appendChild(document.createTextNode(t.message)),o}function l(t){var e=t.state.lint.options;e.async?e.getAnnotations(t,o,e):o(t,e.getAnnotations(t.getValue()))}function o(t,e){g(t);for(var o,r,n=t.state.lint,i=n.options,a=function(t){for(var e=[],o=0;o<t.length;++o){var r=t[o],n=r.from.line;(e[n]||(e[n]=[])).push(r)}return e}(e),l=0;l<a.length;++l){var s=a[l];if(s){for(var u=null,d=n.hasGutter&&document.createDocumentFragment(),c=0;c<s.length;++c){var m=s[c],f=m.severity;v.test(f)||(f="error"),r=f,u="error"==(o=u)?o:r,i.formatAnnotation&&(m=i.formatAnnotation(m)),n.hasGutter&&d.appendChild(C(m)),m.to&&n.marked.push(t.markText(m.from,m.to,{className:"CodeMirror-lint-mark-"+f,__annotation:m}))}n.hasGutter&&t.setGutterMarker(l,p,function(e,t,o,r){var n=document.createElement("div"),i=n;return n.className="CodeMirror-lint-marker-"+t,o&&((i=n.appendChild(document.createElement("div"))).className="CodeMirror-lint-marker-multiple"),0!=r&&CodeMirror.on(i,"mouseover",function(t){h(t,e,i)}),n}(d,u,1<s.length,n.options.tooltips))}}i.onUpdateLinting&&i.onUpdateLinting(e,a,t)}function u(t){var e=t.state.lint;clearTimeout(e.timeout),e.timeout=setTimeout(function(){l(t)},e.options.delay||500)}var d=[0,0,0,5,0,-5,5,0,-5,0];CodeMirror.defineOption("lintWith",!1,function(t,e,o){if(o&&o!=CodeMirror.Init&&(g(t),t.off("change",u),CodeMirror.off(t.getWrapperElement(),"mouseover",t.state.lint.onMouseOver),delete t.state.lint),e){for(var r=t.getOption("gutters"),n=!1,i=0;i<r.length;++i)r[i]==p&&(n=!0);o=t.state.lint=new a(t,function(t){if(t instanceof Function)return{getAnnotations:t};if(t&&t.getAnnotations)return t;throw new Error("Required option 'getAnnotations' missing (lint addon)")}(e),n);t.on("change",u),0!=o.options.tooltips&&CodeMirror.on(t.getWrapperElement(),"mouseover",o.onMouseOver),l(t)}})}();