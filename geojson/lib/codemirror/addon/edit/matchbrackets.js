!function(){var c=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),p=CodeMirror.Pos,v={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function h(c,t,e){var n=c.state.matchBrackets,h=n&&n.maxScanLineLength||1e4,r=t||c.getCursor(),o=c.getLineHandle(r.line),i=r.ch-1,n=0<=i&&v[o.text.charAt(i)]||v[o.text.charAt(++i)];if(!n)return null;var l=">"==n.charAt(1),u=l?1:-1;if(e&&l!=(i==r.ch))return null;var f=c.getTokenTypeAt(p(r.line,i+1)),s=[o.text.charAt(i)],m=/[(){}[\]]/;function a(t,e,n){if(t.text){var r=l?0:t.text.length-1,o=l?t.text.length:-1;if(t.text.length>h)return null;for(null!=n&&(r=n+u);r!=o;r+=u){var i=t.text.charAt(r);if(m.test(i)&&c.getTokenTypeAt(p(e,r+1))==f){var a=v[i];if(">"==a.charAt(1)==l)s.push(i);else{if(s.pop()!=a.charAt(0))return{pos:r,match:!1};if(!s.length)return{pos:r,match:!0}}}}}}for(var d,g=r.line,x=l?Math.min(g+100,c.lineCount()):Math.max(-1,g-100);g!=x&&!(d=g==r.line?a(o,g,i):a(c.getLineHandle(g),g));g+=u);return{from:p(r.line,i),to:d&&p(g,d.pos),match:d&&d.match,forward:l}}function e(t,e){var n=t.state.matchBrackets.maxHighlightLineLength||1e3,r=h(t);if(!(!r||t.getLine(r.from.line).length>n||r.to&&t.getLine(r.to.line).length>n)){function o(){t.operation(function(){i.clear(),a&&a.clear()})}var n=r.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",i=t.markText(r.from,p(r.from.line,r.from.ch+1),{className:n}),a=r.to&&t.markText(r.to,p(r.to.line,r.to.ch+1),{className:n});c&&t.state.focused&&t.display.input.focus();if(!e)return o;setTimeout(o,800)}}var n=null;function r(t){t.operation(function(){n&&(n(),n=null),t.somethingSelected()||(n=e(t,!1))})}CodeMirror.defineOption("matchBrackets",!1,function(t,e,n){n&&n!=CodeMirror.Init&&t.off("cursorActivity",r),e&&(t.state.matchBrackets="object"==typeof e?e:{},t.on("cursorActivity",r))}),CodeMirror.defineExtension("matchBrackets",function(){e(this,!0)}),CodeMirror.defineExtension("findMatchingBracket",function(t,e){return h(this,t,e)})}();