!function(){var s=/\s/;function t(e,r){e=e.getRange(CodeMirror.Pos(r.line,r.ch-1),CodeMirror.Pos(r.line,r.ch+1));return 2==e.length?e:null}CodeMirror.defineOption("autoCloseBrackets",!1,function(e,r,o){var n,i;o!=CodeMirror.Init&&o&&e.removeKeyMap("autoCloseBrackets"),r&&(o="()[]{}''\"\"",n="[]{}","string"==typeof r?o=r:"object"==typeof r&&(null!=r.pairs&&(o=r.pairs),null!=r.explode&&(n=r.explode)),r=function(n){for(var e={name:"autoCloseBrackets",Backspace:function(e){var r,o;return!e.somethingSelected()&&(r=e.getCursor(),(o=t(e,r))&&n.indexOf(o)%2==0)?void e.replaceRange("",CodeMirror.Pos(r.line,r.ch-1),CodeMirror.Pos(r.line,r.ch+1)):CodeMirror.Pass}},l="",r=0;r<n.length;r+=2)!function(t,a){function c(e){var r=e.getCursor();if(e.getRange(r,CodeMirror.Pos(r.line,r.ch+1))!=a||e.somethingSelected())return CodeMirror.Pass;e.execCommand("goCharRight")}t!=a&&(l+=a),e["'"+t+"'"]=function(e){if("'"==t&&"comment"==e.getTokenAt(e.getCursor()).type)return CodeMirror.Pass;var r,o,n,i;if(e.somethingSelected())o=(r=e).getSelection(),r.replaceSelection(t+o+a);else if(t!=a||c(e)==CodeMirror.Pass)return r=e.getCursor(),o=CodeMirror.Pos(r.line,r.ch+1),i=(n=e.getLine(r.line)).charAt(r.ch),n.length==r.ch||0<=l.indexOf(i)||s.test(i)?void e.replaceSelection(t+a,{head:o,anchor:o}):CodeMirror.Pass},t!=a&&(e["'"+a+"'"]=c)}(n.charAt(r),n.charAt(r+1));return e}(o),n&&(r.Enter=(i=n,function(r){var o=r.getCursor(),e=t(r,o);if(!e||i.indexOf(e)%2!=0)return CodeMirror.Pass;r.operation(function(){var e=CodeMirror.Pos(o.line+1,0);r.replaceSelection("\n\n",{anchor:e,head:e},"+input"),r.indentLine(o.line+1,null,!0),r.indentLine(o.line+2,null,!0)})})),e.addKeyMap(r))})}();