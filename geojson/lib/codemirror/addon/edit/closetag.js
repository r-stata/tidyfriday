!function(){CodeMirror.defineOption("autoCloseTags",!1,function(e,o,t){!o||t!=CodeMirror.Init&&t?!o&&t!=CodeMirror.Init&&t&&e.removeKeyMap("autoCloseTags"):(t={name:"autoCloseTags"},"object"==typeof o&&!o.whenClosing||(t["'/'"]=function(e){return n(e,"/")}),"object"==typeof o&&!o.whenOpening||(t["'>'"]=function(e){return n(e,">")}),e.addKeyMap(t))});var s=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],c=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];function n(e,o){var t,n,r,i=e.getCursor(),a=e.getTokenAt(i),d=CodeMirror.innerMode(e.getMode(),a.state),l=d.state;return"xml"!=d.mode.name?CodeMirror.Pass:(n=e.getOption("autoCloseTags"),d="html"==d.mode.configuration,t="object"==typeof n&&n.dontCloseTags||d&&s,n="object"==typeof n&&n.indentTags||d&&c,">"==o&&l.tagName?(r=l.tagName,d=(r=a.end>i.ch?r.slice(0,r.length-a.end+i.ch):r).toLowerCase(),"tag"==a.type&&"closeTag"==l.type||a.string.indexOf("/")==a.string.length-1||t&&-1<g(t,d)?CodeMirror.Pass:(n=(t=n&&-1<g(n,d))?CodeMirror.Pos(i.line+1,0):CodeMirror.Pos(i.line,i.ch+1),e.replaceSelection(">"+(t?"\n\n":"")+"</"+r+">",{head:n,anchor:n}),void(t&&(e.indentLine(i.line+1),e.indentLine(i.line+2))))):"/"!=o||"<"!=a.string?CodeMirror.Pass:void((r=l.context&&l.context.tagName)&&e.replaceSelection("/"+r+">","end")))}function g(e,o){if(e.indexOf)return e.indexOf(o);for(var t=0,n=e.length;t<n;++t)if(e[t]==o)return t;return-1}}();