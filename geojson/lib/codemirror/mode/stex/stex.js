CodeMirror.defineMode("stex",function(){"use strict";function a(t,e){t.cmdState.push(e)}function c(t){return 0<t.cmdState.length?t.cmdState[t.cmdState.length-1]:null}function t(t,e,n){return function(){this.name=t,this.bracketNo=0,this.style=e,this.styles=n,this.argument=null,this.styleIdentifier=function(){return this.styles[this.bracketNo-1]||null},this.openBracket=function(){return this.bracketNo++,"bracket"},this.closeBracket=function(){}}}var i={};function o(t,e){t.f=e}function r(t,e){var n,r;return t.match(/^\\[a-zA-Z@]+/)?(n=t.current().slice(1),a(e,n=new(n=i[n]||i.DEFAULT)),o(e,m),n.style):t.match(/^\\[$&%#{}_]/)||t.match(/^\\[,;!\/\\]/)?"tag":t.match("\\[")?(o(e,function(t,e){return s(t,e,"\\]")}),"keyword"):t.match("$$")?(o(e,function(t,e){return s(t,e,"$$")}),"keyword"):t.match("$")?(o(e,function(t,e){return s(t,e,"$")}),"keyword"):"%"==(r=t.next())?(t.eol()||o(e,u),"comment"):"}"==r||"]"==r?(n=c(e))?(n.closeBracket(r),o(e,m),"bracket"):"error":"{"==r||"["==r?(a(e,n=new(n=i.DEFAULT)),"bracket"):/\d/.test(r)?(t.eatWhile(/[\w.%]/),"atom"):(t.eatWhile(/[\w\-_]/),"begin"==(n=function(t){for(var e=t.cmdState,n=e.length-1;0<=n;n--){var r=e[n];if("DEFAULT"!=r.name)return r}return{styleIdentifier:function(){return null}}}(e)).name&&(n.argument=t.current()),n.styleIdentifier())}function u(t,e){return t.skipToEnd(),o(e,r),"comment"}function s(t,e,n){return t.eatSpace()?null:t.match(n)?(o(e,r),"keyword"):t.match(/^\\[a-zA-Z@]+/)?"tag":t.match(/^[a-zA-Z]+/)?"variable-2":t.match(/^\\[$&%#{}_]/)||t.match(/^\\[,;!\/]/)||t.match(/^[\^_&]/)?"tag":t.match(/^[+\-<>|=,\/@!*:;'"`~#?]/)?null:t.match(/^(\d+\.\d*|\d*\.\d+|\d+)/)?"number":"{"==(n=t.next())||"}"==n||"["==n||"]"==n||"("==n||")"==n?"bracket":"%"==n?(t.eol()||t.skipToEnd(),"comment"):"error"}function m(t,e){var n=t.peek();return"{"==n||"["==n?(c(e).openBracket(n),t.eat(n),o(e,r),"bracket"):/[ \t\r]/.test(n)?(t.eat(n),null):(o(e,r),(n=(n=e).cmdState.pop())&&n.closeBracket(),r(t,e))}return i.importmodule=t("importmodule","tag",["string","builtin"]),i.documentclass=t("documentclass","tag",["","atom"]),i.usepackage=t("usepackage","tag",["atom"]),i.begin=t("begin","tag",["atom"]),i.end=t("end","tag",["atom"]),i.DEFAULT=function(){this.name="DEFAULT",this.style="tag",this.styleIdentifier=this.openBracket=this.closeBracket=function(){}},{startState:function(){return{cmdState:[],f:r}},copyState:function(t){return{cmdState:t.cmdState.slice(),f:t.f}},token:function(t,e){return e.f(t,e)}}}),CodeMirror.defineMIME("text/x-stex","stex"),CodeMirror.defineMIME("text/x-latex","stex");