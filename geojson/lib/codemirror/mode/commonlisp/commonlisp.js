CodeMirror.defineMode("commonlisp",function(o){var r,c=/^with|^def|^do|^prog|case$|^cond$|bind$|when$|unless$/,i=/^(?:[+\-]?(?:\d+|\d*\.\d+)(?:[efd][+\-]?\d+)?|[+\-]?\d+(?:\/[+\-]?\d+)?|#b[+\-]?[01]+|#o[+\-]?[0-7]+|#x[+\-]?[\da-f]+)/,e=/[^\s'`,@()\[\]";]/;function a(t){for(var n;n=t.next();)if("\\"==n)t.next();else if(!e.test(n)){t.backUp(1);break}return t.current()}function d(t,n){var e;return t.eatSpace()?(r="ws",null):t.match(i)?"number":'"'==(e="\\"==(e=t.next())?t.next():e)?(n.tokenize=l)(t,n):"("==e?(r="open","bracket"):")"==e||"]"==e?(r="close","bracket"):";"==e?(t.skipToEnd(),r="ws","comment"):/['`,@]/.test(e)?null:"|"==e?t.skipTo("|")?(t.next(),"symbol"):(t.skipToEnd(),"error"):"#"==e?"["==(e=t.next())?(r="open","bracket"):/[+\-=\.']/.test(e)||/\d/.test(e)&&t.match(/^\d*#/)?null:"|"==e?(n.tokenize=s)(t,n):":"==e?(a(t),"meta"):"error":"."==(n=a(t))?null:(r="symbol","nil"==n||"t"==n?"atom":":"==n.charAt(0)?"keyword":"&"==n.charAt(0)?"variable-2":"variable")}function l(t,n){for(var e,o=!1;e=t.next();){if('"'==e&&!o){n.tokenize=d;break}o=!o&&"\\"==e}return"string"}function s(t,n){for(var e,o;e=t.next();){if("#"==e&&"|"==o){n.tokenize=d;break}o=e}return r="ws","comment"}return{startState:function(){return{ctx:{prev:null,start:0,indentTo:0},tokenize:d}},token:function(t,n){t.sol()&&"number"!=typeof n.ctx.indentTo&&(n.ctx.indentTo=n.ctx.start+1),r=null;var e=n.tokenize(t,n);return"ws"!=r&&(null==n.ctx.indentTo?"symbol"==r&&c.test(t.current())?n.ctx.indentTo=n.ctx.start+o.indentUnit:n.ctx.indentTo="next":"next"==n.ctx.indentTo&&(n.ctx.indentTo=t.column())),"open"==r?n.ctx={prev:n.ctx,start:t.column(),indentTo:null}:"close"==r&&(n.ctx=n.ctx.prev||n.ctx),e},indent:function(t,n){var e=t.ctx.indentTo;return"number"==typeof e?e:t.ctx.start+1},lineComment:";;",blockCommentStart:"#|",blockCommentEnd:"|#"}}),CodeMirror.defineMIME("text/x-common-lisp","commonlisp");