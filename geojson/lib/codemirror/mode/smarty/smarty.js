CodeMirror.defineMode("smarty",function(e){"use strict";var l,f={rightDelimiter:"}",leftDelimiter:"{",smartyVersion:2},u=(e.hasOwnProperty("leftDelimiter")&&(f.leftDelimiter=e.leftDelimiter),e.hasOwnProperty("rightDelimiter")&&(f.rightDelimiter=e.rightDelimiter),e.hasOwnProperty("smartyVersion")&&3===e.smartyVersion&&(f.smartyVersion=3),["debug","extends","function","include","literal"]),s={operatorChars:/[+\-*&%=<>!?]/,validIdentifier:/[a-zA-Z0-9_]/,stringChar:/['"]/},d=function(e,t){return l=t,e},n=function(e,t,r){return(t.tokenize=r)(e,t)},m={tokenizer:function(e,t){var r,i;return e.match(f.leftDelimiter,!0)?e.eat("*")?n(e,t,m.inBlock("comment","*"+f.rightDelimiter)):(t.depth++,r=e.eol(),i=/\s/.test(e.peek()),3===f.smartyVersion&&"{"===f.leftDelimiter&&(r||i)?(t.depth--,null):(t.tokenize=m.smarty,l="startTag","tag")):(e.next(),null)},smarty:function(e,t){if(e.match(f.rightDelimiter,!0))return(3!==f.smartyVersion||(t.depth--,t.depth<=0))&&(t.tokenize=m.tokenizer),d("tag",null);if(e.match(f.leftDelimiter,!0))return t.depth++,d("tag","startTag");var r=e.next();if("$"==r)return e.eatWhile(s.validIdentifier),d("variable-2","variable");if("|"==r)return d("operator","pipe");if("."==r)return d("operator","property");if(s.stringChar.test(r))return t.tokenize=m.inAttribute(r),d("string","string");if(s.operatorChars.test(r))return e.eatWhile(s.operatorChars),d("operator","operator");if("["==r||"]"==r)return d("bracket","bracket");if("("==r||")"==r)return d("bracket","operator");if(/\d/.test(r))return e.eatWhile(/\d/),d("number","number");if("variable"==t.last){if("@"==r)return e.eatWhile(s.validIdentifier),d("property","property");if("|"==r)return e.eatWhile(s.validIdentifier),d("qualifier","modifier")}else{if("pipe"==t.last)return e.eatWhile(s.validIdentifier),d("qualifier","modifier");if("whitespace"==t.last)return e.eatWhile(s.validIdentifier),d("attribute","modifier")}if("property"==t.last)return e.eatWhile(s.validIdentifier),d("property",null);if(/\s/.test(r))return l="whitespace",null;var i,n="";for("/"!=r&&(n+=r);i=e.eat(s.validIdentifier);)n+=i;for(var a=0,o=u.length;a<o;a++)if(u[a]==n)return d("keyword","keyword");return/\s/.test(r)?null:d("tag","tag")},inAttribute:function(n){return function(e,t){for(var r,i=null;!e.eol();){if(r=e.peek(),e.next()==n&&"\\"!==i){t.tokenize=m.smarty;break}i=r}return"string"}},inBlock:function(r,i){return function(e,t){for(;!e.eol();){if(e.match(i)){t.tokenize=m.tokenizer;break}e.next()}return r}}};return{startState:function(){return{tokenize:m.tokenizer,mode:"smarty",last:null,depth:0}},token:function(e,t){e=t.tokenize(e,t);return t.last=l,e},electricChars:""}}),CodeMirror.defineMIME("text/x-smarty","smarty");