CodeMirror.defineMode("rst-base",function(e){function t(e){var a=Array.prototype.slice.call(arguments,1);return e.replace(/{(\d+)}/g,function(e,t){return void 0!==a[t]?a[t]:e})}function a(e){this.message=e}function c(e,t){if(!e)throw new a(t)}a.prototype.toString=function(){return"AssertException: "+this.message};var r=CodeMirror.getMode(e,"python"),n=CodeMirror.getMode(e,"stex"),e="\\s+",s="(?:\\s*|\\W|$)",m=new RegExp(t("^{0}",s)),o="(?:[^\\W\\d_](?:[\\w\\+\\.\\-:]*[^\\W_])?)",i=new RegExp(t("^{0}",o)),h=t("(?:{0}|`{1}`)",o,"(?:[^\\W\\d_](?:[\\w\\s\\+\\.\\-:]*[^\\W_])?)"),u="(?:[^\\s\\|](?:[^\\|]*[^\\s\\|])?)",l="(?:[^\\`]+)",p=new RegExp(t("^{0}",l)),d=new RegExp("^([!'#$%&\"()*+,-./:;<=>?@\\[\\\\\\]^_`{|}~])\\1{3,}\\s*$"),f=new RegExp(t("^\\.\\.{0}",e)),k=new RegExp(t("^_{0}:{1}|^__:{1}",h,s)),x=new RegExp(t("^{0}::{1}",h,s)),w=new RegExp(t("^\\|{0}\\|{1}{2}::{3}",u,e,h,s)),g=new RegExp(t("^\\[(?:\\d+|#{0}?|\\*)]{1}",h,s)),b=new RegExp(t("^\\[{0}\\]{1}",h,s)),E=new RegExp(t("^\\|{0}\\|",u)),R=new RegExp(t("^\\[(?:\\d+|#{0}?|\\*)]_",h)),P=new RegExp(t("^\\[{0}\\]_",h)),j=new RegExp(t("^{0}__?",h)),_=new RegExp(t("^`{0}`_",l)),y=new RegExp(t("^:{0}:`{1}`{2}",o,l,s)),M=new RegExp(t("^`{1}`:{0}:{2}",o,l,s)),v=new RegExp(t("^:{0}:{1}",o,s)),z=new RegExp(t("^{0}",h)),B=new RegExp(t("^::{0}",s)),S=new RegExp(t("^\\|{0}\\|",u)),D=new RegExp(t("^{0}",e)),F=new RegExp(t("^{0}",h)),G=new RegExp(t("^::{0}",s)),J=new RegExp("^_"),K=new RegExp(t("^{0}|_",h)),L=new RegExp(t("^:{0}",s)),N=new RegExp("^::\\s*$"),O=new RegExp("^\\s+(?:>>>|In \\[\\d+\\]:)\\s");function $(e,t){var a=null;if(e.sol()&&e.match(O,!1))A(t,T,{mode:r,local:r.startState()});else if(e.sol()&&e.match(f))A(t,C),a="meta";else if(e.sol()&&e.match(d))A(t,$),a="header";else if(H(t)==y||e.match(y,!1))switch(I(t)){case 0:A(t,$,q(y,1)),c(e.match(/^:/)),a="meta";break;case 1:A(t,$,q(y,2)),c(e.match(i)),a="keyword",e.current().match(/^(?:math|latex)/)&&(t.tmp={mode:n,local:n.startState()});break;case 2:A(t,$,q(y,3)),c(e.match(/^:`/)),a="meta";break;case 3:if(t.tmp){if("`"==e.peek()){A(t,$,q(y,4)),t.tmp=void 0;break}a=t.tmp.mode.token(e,t.tmp.local)}else A(t,$,q(y,4)),c(e.match(p)),a="string";break;case 4:A(t,$,q(y,5)),c(e.match(/^`/)),a="meta";break;case 5:A(t,$,q(y,6)),c(e.match(m));break;default:A(t,$),c(""==e.current())}else if(H(t)==M||e.match(M,!1))switch(I(t)){case 0:A(t,$,q(M,1)),c(e.match(/^`/)),a="meta";break;case 1:A(t,$,q(M,2)),c(e.match(p)),a="string";break;case 2:A(t,$,q(M,3)),c(e.match(/^`:/)),a="meta";break;case 3:A(t,$,q(M,4)),c(e.match(i)),a="keyword";break;case 4:A(t,$,q(M,5)),c(e.match(/^:/)),a="meta";break;case 5:A(t,$,q(M,6)),c(e.match(m));break;default:A(t,$),c(""==e.current())}else if(H(t)==v||e.match(v,!1))switch(I(t)){case 0:A(t,$,q(v,1)),c(e.match(/^:/)),a="meta";break;case 1:A(t,$,q(v,2)),c(e.match(i)),a="keyword";break;case 2:A(t,$,q(v,3)),c(e.match(/^:/)),a="meta";break;case 3:A(t,$,q(v,4)),c(e.match(m));break;default:A(t,$),c(""==e.current())}else if(H(t)==E||e.match(E,!1))switch(I(t)){case 0:A(t,$,q(E,1)),c(e.match(S)),a="variable-2";break;case 1:A(t,$,q(E,2)),e.match(/^_?_?/)&&(a="link");break;default:A(t,$),c(""==e.current())}else if(e.match(R))A(t,$),a="quote";else if(e.match(P))A(t,$),a="quote";else if(e.match(j))A(t,$),e.peek()&&!e.peek().match(/^\W$/)||(a="link");else if(H(t)==_||e.match(_,!1))switch(I(t)){case 0:!e.peek()||e.peek().match(/^\W$/)?A(t,$,q(_,1)):e.match(_);break;case 1:A(t,$,q(_,2)),c(e.match(/^`/)),a="link";break;case 2:A(t,$,q(_,3)),c(e.match(p));break;case 3:A(t,$,q(_,4)),c(e.match(/^`_/)),a="link";break;default:A(t,$),c(""==e.current())}else e.match(N)?A(t,U):e.next()&&A(t,$);return a}function C(e,t){var a=null;if(H(t)==w||e.match(w,!1))switch(I(t)){case 0:A(t,C,q(w,1)),c(e.match(S)),a="variable-2";break;case 1:A(t,C,q(w,2)),c(e.match(D));break;case 2:A(t,C,q(w,3)),c(e.match(F)),a="keyword";break;case 3:A(t,C,q(w,4)),c(e.match(G)),a="meta";break;default:A(t,$),c(""==e.current())}else if(H(t)==x||e.match(x,!1))switch(I(t)){case 0:A(t,C,q(x,1)),c(e.match(z)),a="keyword",e.current().match(/^(?:math|latex)/)?t.tmp_stex=!0:e.current().match(/^python/)&&(t.tmp_py=!0);break;case 1:A(t,C,q(x,2)),c(e.match(B)),a="meta";break;default:e.match(/^latex\s*$/)||t.tmp_stex?(t.tmp_stex=void 0,A(t,T,{mode:n,local:n.startState()})):e.match(/^python\s*$/)||t.tmp_py?(t.tmp_py=void 0,A(t,T,{mode:r,local:r.startState()})):(A(t,$),c(""==e.current()))}else if(H(t)==k||e.match(k,!1))switch(I(t)){case 0:A(t,C,q(k,1)),c(e.match(J)),c(e.match(K)),a="link";break;case 1:A(t,C,q(k,2)),c(e.match(L)),a="meta";break;default:A(t,$),c(""==e.current())}else e.match(g)||e.match(b)?(A(t,$),a="quote"):(e.eatSpace(),e.eol()?A(t,$):(e.skipToEnd(),A(t,Q),a="comment"));return a}function Q(e,t){return W(e,t,"comment")}function U(e,t){return W(e,t,"meta")}function W(e,t,a){return e.eol()||e.eatSpace()?(e.skipToEnd(),a):(A(t,$),null)}function T(e,t){if(t.ctx.mode&&t.ctx.local){if(e.sol())return e.eatSpace()||A(t,$),null;try{return t.ctx.mode.token(e,t.ctx.local)}catch(e){}}return A(t,$),null}function q(e,t,a,c){return{phase:e,stage:t,mode:a,local:c}}function A(e,t,a){e.tok=t,e.ctx=a||{}}function I(e){return e.ctx.stage||0}function H(e){return e.ctx.phase}return{startState:function(){return{tok:$,ctx:q(void 0,0)}},copyState:function(e){return{tok:e.tok,ctx:e.ctx}},innerMode:function(e){return{state:e.ctx.local,mode:e.ctx.mode}},token:function(e,t){return t.tok(e,t)}}},"python","stex"),CodeMirror.defineMode("rst",function(e,t){var a=new RegExp("^[Hh][Tt][Tt][Pp][Ss]?://(?:[\\d\\w.-]+)\\.(?:\\w{2,6})(?:/[\\d\\w\\#\\%\\&\\-\\.\\,\\/\\:\\=\\?\\~]+)*"),c=/^\*\*[^\*\s](?:[^\*]*[^\*\s])?\*\*(\s+|$)/,r=/^[^\*]\*[^\*\s](?:[^\*]*[^\*\s])?\*(\s+|$)/,n=/^``[^`\s](?:[^`]*[^`\s])``(\s+|$)/,s=/^(?:[\d]+(?:[\.,]\d+)*)/,m=/^(?:\s\+[\d]+(?:[\.,]\d+)*)/,o=/^(?:\s\-[\d]+(?:[\.,]\d+)*)/,i={token:function(e){if(e.match(a))return"link";if(e.match(c))return"strong";if(e.match(r))return"em";if(e.match(n))return"string-2";if(e.match(s))return"number";if(e.match(m))return"positive";if(e.match(o))return"negative";for(;!(null==e.next()||e.match(a,!1)||e.match(c,!1)||e.match(r,!1)||e.match(n,!1)||e.match(s,!1)||e.match(m,!1)||e.match(o,!1)););return null}},e=CodeMirror.getMode(e,t.backdrop||"rst-base");return CodeMirror.overlayMode(e,i,!0)},"python","stex"),CodeMirror.defineMIME("text/x-rst","rst");