function bucket(){var e,i=d3.dispatch("chosen");return{deposit:function(){return function(t){(e=t).each(function(){var t=d3.select(this);t.attr("data-text",t.text())})}},store:function(){var n,t;function s(){i.chosen(e.filter(function(){return d3.select(this).classed("filled")}).map(function(t){return t.map(function(t){return d3.select(t).text()})})[0])}var o=d3.behavior.drag().origin(function(){return{x:this.offsetLeft,y:this.offsetTop}}).on("dragstart",function(){n=d3.select(this.parentNode.insertBefore(this.cloneNode(!0),this)),d3.select(this).style("position","absolute").style("pointer-events","none"),t=[this.offsetWidth,this.offsetHeight]}).on("drag",function(){d3.select(this).style("left",d3.event.x-t[0]/2+"px").style("top",d3.event.y-t[1]/2+"px")}).on("dragend",function(){var t=d3.select(this),e=d3.select(d3.event.sourceEvent.target);e.classed("bucket")?(e.text(t.text()).classed("filled",!0),e.append("span").classed("remove-button",!0).on("click",function(){e.text(e.attr("data-text")).classed("filled",!1),s()}),t.remove(),n.call(o),s()):(t.remove(),n.call(o))});return d3.rebind(function(t){t.each(function(){var t=d3.select(this).call(o);t.attr("data-text",t.text())})},i,"on")}}}