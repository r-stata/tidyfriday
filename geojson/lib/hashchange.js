!function(){function n(n,t){this.oldURL=n,this.newURL=t,this.timeStamp=(new Date).getTime()}window.HashChangeEvent=(n.prototype={bubbles:!1,cancelable:!1,currentTarget:null,defaultPrevented:!1,returnValue:!0,srcElement:null,target:null,timeStamp:null,type:"hashchange"},n);var s={listeners:{funcs:[],remove:function(n){for(var t=[],e=0,a=s.listeners.funcs.length;e<a;e++)s.listeners.funcs[e]!==n&&t.push(s.listeners.funcs[e]);s.listeners.funcs=t}},init:function(){var e,a;s.lastHash=s.getHash(),s.lastLocation=String(location),window.addEventListener&&(e=window.addEventListener,window.addEventListener=function(n,t){if("hashchange"!==n)return e.apply(window,arguments);s.listeners.funcs.push(t)}),window.attachEvent&&(a=window.attachEvent,window.attachEvent=function(n,t){if("onhashchange"!==n)return a.apply(window,arguments);s.listeners.funcs.push(t)}),s.setTimeout()},lastHash:null,lastLocation:null,pollerRate:50,getHash:function(){return location.hash.slice(1)},setTimeout:function(){window.setTimeout(s.pollerInterval,s.pollerRate)},createEventObject:function(n,t){return new window.HashChangeEvent(n,t)},pollerInterval:function(){if(s.getHash()!==s.lastHash){var n=s.listeners.funcs.slice(0);"function"==typeof window.onhashchange&&n.push(window.onhashchange);for(var t=0,e=n.length;t<e;t++)s.createEventObject({oldURL:s.lastLocation,newURL:String(location)});s.lastHash=s.getHash(),s.lastLocation=String(location)}s.setTimeout()}};s.init()}();