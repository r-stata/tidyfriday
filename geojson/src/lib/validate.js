var geojsonhint=require("geojsonhint");module.exports=function(l){return function(r,e){var t=geojsonhint.hint(r.getValue());if(r.clearGutter("error"),t instanceof Error)return a=t.message,(n=a.match(/line (\d+)/))&&n[1]&&(r.clearGutter("error"),r.setGutterMarker(parseInt(n[1],10)-1,"error",i(a))),l({class:"icon-circle-blank",title:"invalid JSON",message:"invalid JSON"});if(t.length)return n=t,r.clearGutter("error"),n.forEach(function(e){r.setGutterMarker(e.line,"error",i(e.message))}),l({class:"icon-circle-blank",title:"invalid GeoJSON",message:"invalid GeoJSON"});var n,a=0===e.from.ch&&0===e.from.line&&"paste"==e.origin,t=JSON.parse(r.getValue());try{return l(null,t,a)}catch(e){return l({class:"icon-circle-blank",title:"invalid GeoJSON",message:"invalid GeoJSON"})}function i(e){return d3.select(document.createElement("div")).attr("class","error-marker").attr("message",e).node()}}};