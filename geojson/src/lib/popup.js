module.exports=function(l){return function(e){var t=d3.select(e.popup._contentNode);t.selectAll(".cancel").on("click",function(){l.map.closePopup(e.popup)}),t.selectAll(".save").on("click",function(){var p={};t.select("table.marker-properties").selectAll("tr").each(function(){var e,t;d3.select(this).selectAll("input")[0][0].value&&(p[d3.select(this).selectAll("input")[0][0].value]=(e=d3.select(this).selectAll("input")[0][1].value,(t=parseFloat(e)).toString()===e?t:e))}),e.popup._source.feature.properties=p,l.data.set({map:l.mapLayer.toGeoJSON()},"popup"),l.map.closePopup(e.popup)}),t.selectAll(".add").on("click",function(){var e=t.select("table.marker-properties tbody").append("tr");e.append("th").append("input").attr("type","text"),e.append("td").append("input").attr("type","text")}),t.selectAll(".delete-invert").on("click",function(){e.popup._source&&l.mapLayer.hasLayer(e.popup._source)&&(l.mapLayer.removeLayer(e.popup._source),l.data.set({map:l.mapLayer.toGeoJSON()},"popup"))})}};