var escape=require("escape-html"),geojsonRandom=require("geojson-random"),geojsonExtent=require("geojson-extent"),geojsonFlatten=require("geojson-flatten"),polyline=require("polyline"),wkx=require("wkx"),zoomextent=require("../lib/zoomextent");module.exports.adduserlayer=function(e,o,t){o=escape(o),t=escape(t),o=L.tileLayer(o,{maxZoom:e.map.getMaxZoom()});e.layerControl?(e.map.addLayer(o),e.layerControl.addOverlay(o,t)):(e.layerControl=L.control.layers(null,{},{position:"bottomright",collapsed:!1}).addTo(e.map).addOverlay(o,t),e.map.addLayer(o))},module.exports.zoomextent=function(e){zoomextent(e)},module.exports.clear=function(e){e.data.clear()},module.exports.random=function(e,o,t){e.data.mergeFeatures(geojsonRandom(o,t).features,"meta")},module.exports.bboxify=function(e){e.data.set({map:geojsonExtent.bboxify(e.data.get("map"))})},module.exports.flatten=function(e){e.data.set({map:geojsonFlatten(e.data.get("map"))})},module.exports.polyline=function(e){var o=prompt("Enter your polyline");try{var t=polyline.toGeoJSON(o);e.data.set({map:t})}catch(e){alert("Sorry, we were unable to decode that polyline")}},module.exports.wkxBase64=function(e){var o=prompt("Enter your Base64 encoded WKB/EWKB");try{var t=wkx.Geometry.parse(Buffer.from(o,"base64"));e.data.set({map:t.toGeoJSON()}),zoomextent(e)}catch(e){console.error(e),alert("Sorry, we were unable to decode that Base64 encoded WKX data")}},module.exports.wkxHex=function(e){var o=prompt("Enter your Hex encoded WKB/EWKB");try{var t=wkx.Geometry.parse(Buffer.from(o,"hex"));e.data.set({map:t.toGeoJSON()}),zoomextent(e)}catch(e){console.error(e),alert("Sorry, we were unable to decode that Hex encoded WKX data")}},module.exports.wkxString=function(e){var o=prompt("Enter your WKT/EWKT String");try{var t=wkx.Geometry.parse(o);e.data.set({map:t.toGeoJSON()}),zoomextent(e)}catch(e){console.error(e),alert("Sorry, we were unable to decode that WKT data")}};