var metatable=require("d3-metatable")(d3),smartZoom=require("../lib/smartzoom.js");module.exports=function(n){function e(t){function a(){var e=n.data.get("map");e&&(e.geometry||e.features&&e.features.length)?(e=e.geometry?[e.properties]:e.features.map(r),t.select(".blank-banner").remove(),t.data([e]).call(metatable().on("change",function(e,t){var a=n.data.get("map");a.geometry?a.properties=e:a.features[t].properties=e,n.data.set("map",a)}).on("rowfocus",function(e,t){var a=n.mapLayer.getBounds(),r=0;n.mapLayer.eachLayer(function(e){t===r++&&smartZoom(n.map,e,a)})}))):t.html("").append("div").attr("class","blank-banner center").text("no features")}function r(e){return e.properties}t.html(""),n.dispatch.on("change.table",function(e){a()}),a()}return e.off=function(){n.dispatch.on("change.table",null)},e};