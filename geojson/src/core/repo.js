var config=require("../config.js")(location.hostname);module.exports=function(n){var e={};return e.details=function(t){var e=config.GithubAPI?config.GithubAPI+"/api/v3/repos/":"https://api.github.com/repos/",o=n.storage.get("github_repo_details"),r=n.data.get("meta"),i=r.login,r=r.repo;o&&o.login===i&&o.repo===r&&o.when>+new Date-36e5?t(null,o.data):(n.storage.remove("github_repo_details"),d3.json(e+[i,r].join("/")).header("Authorization","token "+n.storage.get("github_token")).on("load",function(e){n.storage.set("github_repo_details",{when:+new Date,data:e}),n.storage.set("github_repo",e),t(null,e)}).on("error",function(e){n.storage.remove("github_repo_details"),t(new Error(e))}).get())},e};