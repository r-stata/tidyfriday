module.exports=function(l){return function(t){function e(a){var t=this instanceof d3.selection?this.node():this;r.classed("active",function(){return t===this}),o.forEach(function(t){var e=a instanceof d3.selection?a.datum():a;t.layer==e.layer?l.map.addLayer(e.layer):l.map.hasLayer(t.layer)&&l.map.removeLayer(t.layer)})}var o=/a\.tiles\.mapbox.com/.test(L.mapbox.config.HTTP_URL)?[{title:"Mapbox",layer:L.mapbox.tileLayer("mapbox.streets")},{title:"Satellite",layer:L.mapbox.tileLayer("mapbox.satellite")},{title:"OSM",layer:L.tileLayer("https://a.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'})},{title:"GAODE",layer:L.tileLayer("http://webrd02.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}",{attribution:'&copy; <a href="http://amap.com">amap.com</a> contributors'})}]:[{title:"Mapbox",layer:L.mapbox.tileLayer("mapbox.osm-bright")},{title:"Mapbox Outdoors",layer:L.mapbox.tileLayer("mapbox.mapbox-outdoors")},{title:"Satellite",layer:L.mapbox.tileLayer("mapbox.satellite-full")}],r=t.append("div").attr("class","layer-switch").selectAll("button").data(o).enter().append("button").attr("class","pad0x").on("click",e).text(function(t){return t.title});r.filter(function(t,e){return 0===e}).call(e)}};