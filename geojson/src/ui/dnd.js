var readDrop=require("../lib/readfile.js").readDrop,flash=require("./flash.js"),zoomextent=require("../lib/zoomextent");module.exports=function(o){function e(){d3.event.stopPropagation(),d3.event.preventDefault(),d3.event.dataTransfer.dropEffect="copy",d3.select("body").classed("dragover",!0)}d3.select("body").attr("dropzone","copy").on("drop.import",readDrop(function(e,r,t){e&&e.message&&flash(o.container,e.message).classed("error","true"),r&&r.features&&(o.data.mergeFeatures(r.features),t?flash(o.container,t.message):flash(o.container,"Imported "+r.features.length+" features.").classed("success","true"),zoomextent(o)),d3.select("body").classed("dragover",!1)})).on("dragenter.import",e).on("dragleave.import",function(){d3.event.stopPropagation(),d3.event.preventDefault(),d3.event.dataTransfer.dropEffect="copy",d3.select("body").classed("dragover",!1)}).on("dragover.import",e)};