var importSupport=!!window.FileReader,flash=require("./flash.js"),readFile=require("../lib/readfile.js"),zoomextent=require("../lib/zoomextent");module.exports=function(o){return function(e){e.html("");var a,t,r,e=e.append("div").attr("class","pad1");function s(e,a,t){e?e.message&&flash(o.container,e.message).classed("error","true"):a&&a.features&&(o.data.mergeFeatures(a.features),t?flash(o.container,t.message):flash(o.container,"Imported "+a.features.length+" features.").classed("success","true"),zoomextent(o))}e.append("div").attr("class","modal-message").text("Drop files to map!"),importSupport?((t=(a=e.append("div").attr("class","pad2 fillL").append("div").attr("class","center")).append("button").on("click",function(){r.node().click()})).append("span").attr("class","icon-arrow-down"),t.append("span").text(" Open"),a.append("p").attr("class","deemphasize").append("small").text("GeoJSON, TopoJSON, KML, CSV, GPX and OSM XML supported. You can also drag & drop files."),r=a.append("input").attr("type","file").style("visibility","hidden").style("position","absolute").style("height","0").on("change",function(){var t=this.files;t&&t[0]&&readFile.readAsText(t[0],function(e,a){readFile.readFile(t[0],a,s),t[0].path&&o.data.set({path:t[0].path})})})):e.append("p").attr("class","blank-banner center").text("Sorry, geojson.io supports importing GeoJSON, TopoJSON, KML, CSV, GPX, and OSM XML files, but your browser isn't compatible. Please use Google Chrome, Safari 6, IE10, Firefox, or Opera for an optimal experience."),e.append("div").attr("class","pad1")}};