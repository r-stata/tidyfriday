this.workbox=this.workbox||{},this.workbox.expiration=function(e,t,a,r,n){"use strict";try{self.workbox.v["workbox:cache-expiration:3.6.3"]=1}catch(e){}const s="timestamp";class i{constructor(e){this.e=e,this.t=e,this.r=new t.DBWrapper(this.e,2,{onupgradeneeded:e=>this.n(e)})}n(e){var t=e.target.result;e.oldVersion<2&&t.objectStoreNames.contains("workbox-cache-expiration")&&t.deleteObjectStore("workbox-cache-expiration"),t.createObjectStore(this.t,{keyPath:"url"}).createIndex(s,s,{unique:!1})}setTimestamp(e,t){var r=this;return babelHelpers.asyncToGenerator(function*(){yield r.r.put(r.t,{url:new URL(e,location).href,timestamp:t})})()}getAllTimestamps(){var e=this;return babelHelpers.asyncToGenerator(function*(){return yield e.r.getAllMatching(e.t,{index:s})})()}getTimestamp(e){var t=this;return babelHelpers.asyncToGenerator(function*(){return(yield t.r.get(t.t,e)).timestamp})()}deleteUrl(e){var t=this;return babelHelpers.asyncToGenerator(function*(){yield t.r.delete(t.t,new URL(e,location).href)})()}delete(){var e=this;return babelHelpers.asyncToGenerator(function*(){yield e.r.deleteDatabase(),e.r=null})()}}class o{constructor(e,t={}){this.i=!1,this.s=!1,this.a=t.maxEntries,this.l=t.maxAgeSeconds,this.e=e,this.o=new i(e)}expireEntries(){var r=this;return babelHelpers.asyncToGenerator(function*(){var e,t;r.i?r.s=!0:(r.i=!0,t=Date.now(),t=yield r.c(t),e=yield r.u(),t=[...new Set(t.concat(e))],yield Promise.all([r.h(t),r.d(t)]),r.i=!1,r.s&&(r.s=!1,r.expireEntries()))})()}c(e){var a=this;return babelHelpers.asyncToGenerator(function*(){if(!a.l)return[];const t=e-1e3*a.l,r=[];return(yield a.o.getAllTimestamps()).forEach(function(e){e.timestamp<t&&r.push(e.url)}),r})()}u(){var r=this;return babelHelpers.asyncToGenerator(function*(){var e=[];if(!r.a)return[];for(var t=yield r.o.getAllTimestamps();t.length>r.a;){const r=t.shift();e.push(r.url)}return e})()}h(t){var r=this;return babelHelpers.asyncToGenerator(function*(){var e=yield caches.open(r.e);for(const r of t)yield e.delete(r)})()}d(t){var r=this;return babelHelpers.asyncToGenerator(function*(){for(const e of t)yield r.o.deleteUrl(e)})()}updateTimestamp(t){var r=this;return babelHelpers.asyncToGenerator(function*(){var e=new URL(t,location);e.hash="",yield r.o.setTimestamp(e.href,Date.now())})()}isURLExpired(t){var r=this;return babelHelpers.asyncToGenerator(function*(){var e;if(r.l)return(e=new URL(t,location)).hash="",(yield r.o.getTimestamp(e.href))<Date.now()-1e3*r.l;throw new a.WorkboxError("expired-test-without-max-age",{methodName:"isURLExpired",paramName:"maxAgeSeconds"})})()}delete(){var e=this;return babelHelpers.asyncToGenerator(function*(){e.s=!1,yield e.o.delete()})()}}return e.CacheExpiration=o,e.Plugin=class{constructor(e={}){this.p=e,this.l=e.maxAgeSeconds,this.b=new Map,e.purgeOnQuotaError&&n.registerQuotaErrorCallback(()=>this.deleteCacheAndMetadata())}f(e){if(e===r.cacheNames.getRuntimeName())throw new a.WorkboxError("expire-custom-caches-only");let t=this.b.get(e);return t||(t=new o(e,this.p),this.b.set(e,t)),t}cachedResponseWillBeUsed({cacheName:e,cachedResponse:t}){var r;return t&&(r=this.m(t),this.f(e).expireEntries(),r)?t:null}m(e){return!this.l||(null===(e=this.y(e))||e>=Date.now()-1e3*this.l)}y(e){return!e.headers.has("date")||(e=e.headers.get("date"),e=new Date(e).getTime(),isNaN(e))?null:e}cacheDidUpdate({cacheName:t,request:r}){var a=this;return babelHelpers.asyncToGenerator(function*(){var e=a.f(t);yield e.updateTimestamp(r.url),yield e.expireEntries()})()}deleteCacheAndMetadata(){var r=this;return babelHelpers.asyncToGenerator(function*(){for(var[e,t]of r.b)yield caches.delete(e),yield t.delete();r.b=new Map})()}},e}({},workbox.core._private,workbox.core._private,workbox.core._private,workbox.core);