this.workbox=this.workbox||{},this.workbox.backgroundSync=function(t,a){"use strict";try{self.workbox.v["workbox:background-sync:3.6.3"]=1}catch(t){}const r=["method","referrer","referrerPolicy","mode","credentials","cache","redirect","integrity","keepalive"];class s{static fromRequest(t){return babelHelpers.asyncToGenerator(function*(){var e={headers:{}};"GET"!==t.method&&(e.body=yield t.clone().blob());for(const[r,s]of t.headers.entries())e.headers[r]=s;for(const s of r)void 0!==t[s]&&(e[s]=t[s]);return new s({url:t.url,requestInit:e})})()}constructor({url:e,requestInit:t,timestamp:r=Date.now()}){this.url=e,this.requestInit=t,this.e=r}get timestamp(){return this.e}toObject(){return{url:this.url,timestamp:this.timestamp,requestInit:this.requestInit}}toRequest(){return new Request(this.url,this.requestInit)}clone(){var e=Object.assign({},this.requestInit);return e.headers=Object.assign({},this.requestInit.headers),this.requestInit.body&&(e.body=this.requestInit.body.slice()),new s({url:this.url,timestamp:this.timestamp,requestInit:e})}}const n="requests",i="queueName",o="workbox-background-sync";class u{constructor(e){this.t=e,this.r=new t.DBWrapper("workbox-background-sync",1,{onupgradeneeded:e=>e.target.result.createObjectStore(n,{autoIncrement:!0}).createIndex(i,i,{unique:!1})})}addEntry(e){var t=this;return babelHelpers.asyncToGenerator(function*(){yield t.r.add(n,{queueName:t.t.name,storableRequest:e.toObject()})})()}getAndRemoveOldestEntry(){var t=this;return babelHelpers.asyncToGenerator(function*(){var[e]=yield t.r.getAllMatching(n,{index:i,query:IDBKeyRange.only(t.t.name),count:1,includeKeys:!0});if(e)return yield t.r.delete(n,e.primaryKey),new s(e.value.storableRequest)})()}}const l=new Set;class c{constructor(e,{callbacks:t={},maxRetentionTime:r=10080}={}){if(l.has(e))throw new a.WorkboxError("duplicate-queue-name",{name:e});l.add(e),this.s=e,this.i=t,this.n=r,this.u=new u(this),this.c()}get name(){return this.s}addRequest(t){var r=this;return babelHelpers.asyncToGenerator(function*(){var e=yield s.fromRequest(t.clone());yield r.o("requestWillEnqueue",e),yield r.u.addEntry(e),yield r.l()})()}replayRequests(){var i=this;return babelHelpers.asyncToGenerator(function*(){for(var e=Date.now(),t=[],r=[];s=yield i.u.getAndRemoveOldestEntry();){const a=s.clone(),n=60*i.n*1e3;if(!(e-s.timestamp>n)){yield i.o("requestWillReplay",s);var s={request:s.toRequest()};try{s.response=yield fetch(s.request.clone())}catch(e){s.error=e,r.push(a)}t.push(s)}}if(yield i.o("queueDidReplay",t),r.length)throw yield Promise.all(r.map(function(e){return i.u.addEntry(e)})),new a.WorkboxError("queue-replay-failed",{name:i.s,count:r.length})})()}o(e,...t){var r=this;return babelHelpers.asyncToGenerator(function*(){"function"==typeof r.i[e]&&(yield r.i[e].apply(null,t))})()}c(){"sync"in registration?self.addEventListener("sync",e=>{e.tag===o+":"+this.s&&e.waitUntil(this.replayRequests())}):this.replayRequests()}l(){var e=this;return babelHelpers.asyncToGenerator(function*(){if("sync"in registration)try{yield registration.sync.register(o+":"+e.s)}catch(e){}})()}static get a(){return l}}return Object.freeze({Queue:c,Plugin:class{constructor(...e){this.t=new c(...e),this.fetchDidFail=this.fetchDidFail.bind(this)}fetchDidFail({request:e}){var t=this;return babelHelpers.asyncToGenerator(function*(){yield t.t.addRequest(e)})()}}})}(workbox.core._private,workbox.core._private);