function setURL(e){document.location.href=e}function backButton(){history.back()}function forwardButton(){history.forward()}function goForwardOrBackInHistory(e){history.go(e)}BrowserHistoryUtils={addEvent:function(e,t,n,r){return r=r||!1,e.addEventListener?(e.addEventListener(t,n,r),!0):e.attachEvent?e.attachEvent("on"+t,n):void(e["on"+t]=n)}},BrowserHistory=function(){var c={ie:!1,firefox:!1,safari:!1,opera:!1,version:-1},d="",s=document.location.href,f=document.location.href,a=document.location.hash,m="history/historyFrame.html?",l=-1,u=[],h=x(f,f+"#"+a,a),g=[],p=[],o=null,e=navigator.userAgent.toLowerCase();function y(){return document.getElementById("ie_historyFrame")}function v(e){if(e&&document.getElementById(e)){e=document.getElementById(e);if(void 0!==e.SetVariable)return e;var t=e.getElementsByTagName("object"),n=e.getElementsByTagName("embed");if(0<t.length&&void 0!==t[0].SetVariable)return t[0];if(0<n.length&&void 0!==n[0].SetVariable)return n[0]}else{t=document.getElementsByTagName("object");if(0<(n=document.getElementsByTagName("embed")).length&&void 0!==n[0].SetVariable)return n[0];if(0<t.length&&void 0!==t[0].SetVariable)return t[0];if(1<t.length&&void 0!==t[1].SetVariable)return t[1]}}function w(){var e=[];return e=0!=(e=0==e.length?document.getElementsByTagName("object"):e).length&&null!=e[0].object?e:document.getElementsByTagName("embed")}function b(){var e=document.location.href.indexOf("#");return 0<=e?document.location.href.substr(e+1):""}function E(e){""==e&&(e="#"),document.location.hash=e}function x(e,t,n){return{baseUrl:e,newUrl:t,flexAppUrl:n,title:null}}function r(e,t,n){if(p=[],c.ie){if(n==d&&document.location.href==f&&window._ie_firstload)return void(s=f);n&&n!=d||!window._ie_firstload?y().src=m+n:(t=e+"#"+d,n=d),E(n)}else if(0==g.length&&h.flexAppUrl==n?h=x(e,t,n):0<g.length&&g[g.length-1].flexAppUrl==n&&(g[g.length-1]=x(e,t,n)),c.safari){if(c.version<=419.3){var r=(r=window.location.pathname.toString()).substring(r.lastIndexOf("/")+1);document.getElementById("safari_formDiv").innerHTML='<form name="historyForm" action="'+r+"#"+n+'" method="GET"></form>';for(var o=window.location.search.substring(1).split("&"),i=0;i<o.length;i++){var a=o[i].split("="),l=document.createElement("input");l.type="hidden",l.name=a[0],l.value=a[1],document.forms.historyForm.appendChild(l)}document.forms.historyForm.submit()}else top.location.hash=n;u[history.length]=n,B()}else r=n,0==document.getElementsByName(r).length&&(document.getElementById("firefox_anchorDiv").innerHTML+="<a name='"+r+"'>"+r+"</a>"),E(n);g.push(x(e,t,n))}function B(){c.safari&&(document.getElementById("safari_remember_field").value=u.join(","))}function _(){var e=g.pop();e&&(g[g.length-1]||g.length,p.push(e))}function i(){var e;if(c.ie&&s!=document.location.href&&s+"#"!=document.location.href&&(c.version<7?(s=document.location.href,document.location.reload()):b()!=(i=y().contentWindow.document,1==(i=String(i.location.search)).length&&"?"==i.charAt(0)?i="":2<=i.length&&"?"==i.charAt(0)&&(i=i.substring(1)),i)&&(i=m+b(),y().src=i)),c.safari&&0<=l&&history.length!=l){l=history.length;var t=u[l];if("undefined"!=typeof BrowserHistory_multiple&&1==BrowserHistory_multiple)for(var n=w(),r=0;r<n.length;r++)n[r].browserURLChange(t);else v().browserURLChange(t);B()}if(c.firefox&&s!=document.location.href){var o=g.length,i={back:!1,forward:!1,set:!1};if(window.location.hash!=a&&window.location.href!=f||1!=o||(i.back=!0,_()),0<p.length&&p[p.length-1].flexAppUrl==b()&&(i.forward=!0,(e=p.pop())&&g.push(e)),2<=o&&g[o-2]&&g[o-2].flexAppUrl==b()&&(i.back=!0,_()),!i.back&&!i.forward){for(r=0;r<g.length;r++)g[r].flexAppUrl==b()&&r!=o-2&&(arbitraryUrl=!0,0);for(r=0;r<p.length;r++)p[r].flexAppUrl==b()&&r!=o-2&&(arbitraryUrl=!0,0);p=[]}s=document.location.href;t=b();if("undefined"!=typeof BrowserHistory_multiple&&1==BrowserHistory_multiple)for(n=w(),r=0;r<n.length;r++)n[r].browserURLChange(t);else v().browserURLChange(t)}}-1!=e.indexOf("opera")?c.opera=!0:-1!=e.indexOf("msie")?(c.ie=!0,c.version=parseFloat(e.substring(e.indexOf("msie")+4))):-1!=e.indexOf("safari")?(c.safari=!0,c.version=parseFloat(e.substring(e.indexOf("safari")+7))):-1!=e.indexOf("gecko")&&(c.firefox=!0),1==c.ie&&7==c.version&&(window._ie_firstload=!1);return{historyHash:u,backStack:function(){return g},forwardStack:function(){return p},getPlayer:v,initialize:function(e){if(c.ie){for(var t,n=document.getElementsByTagName("script"),r=0;i=n[r];r++)-1<i.src.indexOf("history.js")&&(t=new String(i.src).replace("history.js","historyFrame.html"));m=t+"?";var o=document.createElement("iframe");o.id="ie_historyFrame",o.name="ie_historyFrame";try{document.body.appendChild(o)}catch(e){setTimeout(function(){document.body.appendChild(o)},0)}}if(c.safari){for(var i,a=document.createElement("div"),a=(a.id="safari_rememberDiv",document.body.appendChild(a),a.innerHTML='<input type="text" id="safari_remember_field" style="width: 500px;">',document.createElement("div")),a=(a.id="safari_formDiv",document.body.appendChild(a),document.createElement("div")),n=(a.id="safarireloader",document.getElementsByTagName("script")),r=0;i=n[r];r++)-1<i.src.indexOf("history.js")&&(html=new String(i.src).replace(".js",".html"));a.innerHTML='<iframe id="safarireloader-iframe" src="about:blank" frameborder="no" scrolling="no"></iframe>',document.body.appendChild(a),a.style.position="absolute",a.style.left=a.style.top="-9999px",o=a.getElementsByTagName("iframe")[0],""!=document.getElementById("safari_remember_field").value&&(u=document.getElementById("safari_remember_field").value.split(","))}c.firefox&&((a=document.createElement("div")).id="firefox_anchorDiv",document.body.appendChild(a))},setURL:function(e){document.location.href=e},getURL:function(){return document.location.href},getTitle:function(){return document.title},setTitle:function(t){try{g[g.length-1].title=t}catch(e){}if(c.safari&&""==t)try{var e=window.location.href.toString();t=e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("#"))}catch(e){t=""}document.title=t},setDefaultURL:function(e){if(d=e,e=b(),c.ie){window._ie_firstload=!0;function t(){y().src=n,window.location.replace("#"+e),setInterval(i,50)}var n=m+e;try{t()}catch(e){window.setTimeout(function(){t()},0)}}var r,o;c.safari&&(l=history.length,0==u.length&&(o="#"+(u[l]=e),window.location.replace(o)),setInterval(i,50)),(c.firefox||c.opera)&&(r=new RegExp("#"+e+"$"),window.location.toString().match(r)||(o="#"+e,window.location.replace(o)),setInterval(i,50))},setBrowserURL:function(e,t){c.ie&&void 0!==t&&(o=t);var t=document.location.href.indexOf("#"),t=-1!=t?document.location.href.substr(0,t):document.location.href,n=t+"#"+e;return document.location.href!=n&&document.location.href+"#"!=n&&(r(t,s=n,e),l=history.length),!1},browserURLChange:function(e){var t=null;if(c.ie&&null!=o&&(t=o),pendingURL="","undefined"!=typeof BrowserHistory_multiple&&1==BrowserHistory_multiple)for(var n=w(),r=0;r<n.length;r++)try{n[r].browserURLChange(e)}catch(e){}else try{v(t).browserURLChange(e)}catch(e){}o=null}}}(),function(t){var e=navigator.userAgent,n=setTimeout;/webkit/i.test(e)?n(function(){var e=document.readyState;"loaded"==e||"complete"==e?t():n(arguments.callee,10)},10):/mozilla/i.test(e)&&!/(compati)/.test(e)||/opera/i.test(e)?document.addEventListener("DOMContentLoaded",t,!1):window.onload=t}(function(){BrowserHistory.initialize()});